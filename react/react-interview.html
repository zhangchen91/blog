<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ React é¢è¯•é¢˜ | blog</title>
    <meta name="description" content="composition api form validator for vue">
    <link rel="stylesheet" href="/blog/assets/style.208d2b36.css">
    <link rel="modulepreload" href="/blog/assets/app.8207ecbb.js">
    <link rel="modulepreload" href="/blog/assets/react_react-interview.md.12f4d43a.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-110af560><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b84e82df></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b84e82df> Skip to content </a><!--]--><!----><header class="VPNav" data-v-110af560 data-v-ee214162><div class="VPNavBar has-sidebar" data-v-ee214162 data-v-badb2c5b><div class="container" data-v-badb2c5b><div class="VPNavBarTitle has-sidebar" data-v-badb2c5b data-v-7f53dfea><a class="title" href="/blog/" data-v-7f53dfea><!--[--><!--]--><!----><!--[-->blog<!--]--><!--[--><!--]--></a></div><div class="content" data-v-badb2c5b><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-badb2c5b data-v-d53ff040><span id="main-nav-aria-label" class="visually-hidden" data-v-d53ff040>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> JavaScript <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/" data-v-9dfa7b1e data-v-4aa6d729><!--[-->JavaScript<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->å¼‚æ­¥å¤„ç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/%E4%BB%A3%E7%90%86%E4%B8%8E%E5%8F%8D%E5%B0%84.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä»£ç†ä¸åå°„<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->è¿­ä»£å™¨å’Œç”Ÿæˆå™¨<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> TypeScript <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/ts/TypeScript-onePage.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->TypeScript OnePage<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> å‰ç«¯å·¥ç¨‹åŒ– <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/performance.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->è¿™ä¸€å®šæ˜¯ä½ è§è¿‡æœ€å…¨çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ³•è®º<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/git.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Git<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/webpack%E5%B8%B8%E7%94%A8%E6%8B%93%E5%B1%95.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->webpackå¸¸ç”¨æ‹“å±•<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/CSS%E5%B7%A5%E7%A8%8B%E5%8C%96.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->CSSå·¥ç¨‹åŒ–<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/jscompatibility.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->JS å…¼å®¹æ€§<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/webpack5.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->webpack5<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/pnpm%E5%8E%9F%E7%90%86.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->pnpmåŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/modularization.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->æ¨¡å—åŒ–<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/PackageManager.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->åŒ…ç®¡ç†å™¨<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> Vuejs 22ç¯‡ <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/index.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vuejs OnePage<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-interview.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ Vuejs é¢è¯•é¢˜<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vdom.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->è™šæ‹ŸDOMè¯¦è§£<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/component-communication.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vuejs ç»„ä»¶é€šä¿¡æ¦‚è§ˆ<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/v-model.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->æ¢ç´¢ v-model åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/reactive.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue2 æ•°æ®å“åº”åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/reactive-v3.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue3 æ•°æ®å“åº”åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/diff.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue2 diffç®—æ³•åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/lifecycle.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue ç”Ÿå‘½å‘¨æœŸ<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/computed.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä½ ä¸çŸ¥é“çš„ computed Vue2<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/keep-alive-LRU.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->keep-alive ä¸ LRU ç®—æ³•<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue3-onepage.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue3 onePage<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-cli.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->vue-cli åˆ°åº•å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆ<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-compile.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue ç¼–è¯‘å™¨ä¸ºä»€ä¹ˆå¦‚æ­¤å¼ºå¤§<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/nextTick.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->$nextTick å·¥ä½œåŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vs.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue å’Œ React çš„æ ¸å¿ƒåŒºåˆ«<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/slot.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä¸€ç¯‡ç²¾é€š slot<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/SSR.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue SSR æœåŠ¡ç«¯æ¸²æŸ“<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/directive.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue æŒ‡ä»¤ç¯‡<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-router.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->VueRouter è·¯ç”±ä»ä½¿ç”¨åˆ°æºç <!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vuex.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vuex æ€æƒ³å’Œæºç <!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/interviewer.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä»Šå¤©æˆ‘æ˜¯é¢è¯•å®˜<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-badb2c5b data-v-b0be3cf9 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-2ce07b2d><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg>  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><!----><!--[--><!--[--><div class="items" data-v-b0be3cf9><p class="title" data-v-b0be3cf9>English</p><!--[--><div class="VPMenuLink" data-v-b0be3cf9 data-v-9dfa7b1e><a class="VPLink link" href="https://netlify.app" target="_blank" rel="noreferrer" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ç®€ä½“ä¸­æ–‡<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-4aa6d729><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-badb2c5b data-v-095115f7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-095115f7 data-v-29b1d827 data-v-bf7c4b07><span class="check" data-v-bf7c4b07><span class="icon" data-v-bf7c4b07><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-29b1d827><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-29b1d827><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-badb2c5b data-v-7774bba7 data-v-80f6e95f><!--[--><a class="VPSocialLink" href="https://github.com/Sunny-117/blog" target="_blank" rel="noopener" data-v-80f6e95f data-v-963f0260><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-badb2c5b data-v-cb2189d2 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-2ce07b2d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-2ce07b2d><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><!----><!--[--><!--[--><div class="group" data-v-cb2189d2><p class="trans-title" data-v-cb2189d2>English</p><!--[--><div class="VPMenuLink" data-v-cb2189d2 data-v-9dfa7b1e><a class="VPLink link" href="https://netlify.app" target="_blank" rel="noreferrer" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ç®€ä½“ä¸­æ–‡<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-4aa6d729><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--></div><div class="group" data-v-cb2189d2><div class="item appearance" data-v-cb2189d2><p class="label" data-v-cb2189d2>Appearance</p><div class="appearance-action" data-v-cb2189d2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-cb2189d2 data-v-29b1d827 data-v-bf7c4b07><span class="check" data-v-bf7c4b07><span class="icon" data-v-bf7c4b07><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-29b1d827><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-29b1d827><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-cb2189d2><div class="item social-links" data-v-cb2189d2><div class="VPSocialLinks social-links-list" data-v-cb2189d2 data-v-80f6e95f><!--[--><a class="VPSocialLink" href="https://github.com/Sunny-117/blog" target="_blank" rel="noopener" data-v-80f6e95f data-v-963f0260><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-badb2c5b data-v-d61f3d22><span class="container" data-v-d61f3d22><span class="top" data-v-d61f3d22></span><span class="middle" data-v-d61f3d22></span><span class="bottom" data-v-d61f3d22></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-110af560 data-v-a2e5b643><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a2e5b643><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-a2e5b643><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-a2e5b643>Menu</span></button><a class="top-link" href="#" data-v-a2e5b643> Return to top </a></div><aside class="VPSidebar" data-v-110af560 data-v-fd5bafd6><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-fd5bafd6><span class="visually-hidden" id="sidebar-aria-label" data-v-fd5bafd6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>Introduction</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/getting-started.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Getting Started</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>JavaScript</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/js/" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>JavaScript</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/js/%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>å¼‚æ­¥å¤„ç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/js/%E4%BB%A3%E7%90%86%E4%B8%8E%E5%8F%8D%E5%B0%84.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä»£ç†ä¸åå°„</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/js/%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup" data-v-fd5bafd6 data-v-540f7de3><div class="title" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>TypeScript</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/ts/TypeScript-onePage.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>TypeScript OnePage</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>å‰ç«¯å·¥ç¨‹åŒ–</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/performance.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è¿™ä¸€å®šæ˜¯ä½ è§è¿‡æœ€å…¨çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ³•è®º</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/git.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Git</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/webpack%E5%B8%B8%E7%94%A8%E6%8B%93%E5%B1%95.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>webpackå¸¸ç”¨æ‹“å±•</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/CSS%E5%B7%A5%E7%A8%8B%E5%8C%96.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSSå·¥ç¨‹åŒ–</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/jscompatibility.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>JS å…¼å®¹æ€§</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/webpack5.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>webpack5</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/pnpm%E5%8E%9F%E7%90%86.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>pnpmåŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/modularization.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ¨¡å—åŒ–</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/PackageManager.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>åŒ…ç®¡ç†å™¨</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible collapsed" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>Vuejs 22ç¯‡</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/vue/index.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vuejs OnePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-interview.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ Vuejs é¢è¯•é¢˜</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vdom.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è™šæ‹ŸDOMè¯¦è§£</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/component-communication.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vuejs ç»„ä»¶é€šä¿¡æ¦‚è§ˆ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/v-model.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ¢ç´¢ v-model åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/reactive.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue2 æ•°æ®å“åº”åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/reactive-v3.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue3 æ•°æ®å“åº”åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/diff.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue2 diffç®—æ³•åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/lifecycle.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue ç”Ÿå‘½å‘¨æœŸ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/computed.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä½ ä¸çŸ¥é“çš„ computed Vue2</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/keep-alive-LRU.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>keep-alive ä¸ LRU ç®—æ³•</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue3-onepage.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue3 onePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-cli.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>vue-cli åˆ°åº•å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-compile.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue ç¼–è¯‘å™¨ä¸ºä»€ä¹ˆå¦‚æ­¤å¼ºå¤§</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/nextTick.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>$nextTick å·¥ä½œåŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vs.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue å’Œ React çš„æ ¸å¿ƒåŒºåˆ«</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/slot.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä¸€ç¯‡ç²¾é€š slot</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/SSR.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue SSR æœåŠ¡ç«¯æ¸²æŸ“</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/directive.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue æŒ‡ä»¤ç¯‡</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-router.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>VueRouter è·¯ç”±ä»ä½¿ç”¨åˆ°æºç </span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vuex.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vuex æ€æƒ³å’Œæºç </span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/interviewer.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä»Šå¤©æˆ‘æ˜¯é¢è¯•å®˜</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>React 16ç¯‡</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/react/" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React onePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/blog/react/react-interview.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ React é¢è¯•é¢˜</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/hooks.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React Hooks</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/component-communication.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React ç»„ä»¶é€šä¿¡</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/context.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React Context</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/lifecycle.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React ç”Ÿå‘½å‘¨æœŸ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/event.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React äº‹ä»¶æœºåˆ¶</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/render.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React æ¸²æŸ“åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/transition.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React åŠ¨ç”»</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/ReactRouter.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React Router</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/Redux.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>JS åº”ç”¨çš„çŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç† Redux</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/react-redux-router.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è§†å›¾-ä»“åº“-è·¯ç”±</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/dva.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>dva è®¾è®¡æ€æƒ³</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/umi.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Umi ä¼ä¸šçº§å‰ç«¯æ¡†æ¶</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/utils.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React è°ƒè¯•å·¥å…·</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/Fiber.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Fiber</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup" data-v-fd5bafd6 data-v-540f7de3><div class="title" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>å‰ç«¯å·¥å…·</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/fe-utils/js%E5%B7%A5%E5%85%B7%E5%BA%93.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>å‰ç«¯ JavaScript å¿…ä¼šå·¥å…·åº“åˆé›†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/fe-utils/%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B0%8F%E5%8A%A9%E6%89%8B.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä½ çš„å‰ç«¯å¼€å‘å°åŠ©æ‰‹</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/fe-utils/%E4%B8%93%E4%B8%9A%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%B6%E8%97%8F%E5%A4%B9.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä¸“ä¸šå‰ç«¯å·¥ç¨‹å¸ˆçš„æµè§ˆå™¨æ”¶è—å¤¹</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>algorithm</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/algorithm/%F0%9F%94%A5%E5%88%B7%E9%A2%98%E4%B9%8B%E6%8E%A2%E7%B4%A2%E6%9C%80%E4%BC%98%E8%A7%A3.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ğŸ”¥åˆ·é¢˜ä¹‹æ¢ç´¢æœ€ä¼˜è§£</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>interview</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/interview/%E9%9D%A2%E8%AF%95%E5%AE%98%EF%BC%9A%E4%BD%A0%E8%BF%98%E6%9C%89%E9%97%AE%E9%A2%98%E8%A6%81%E9%97%AE%E6%88%91%E5%90%97.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>é¢è¯•å®˜ï¼šä½ è¿˜æœ‰é—®é¢˜è¦é—®æˆ‘å—</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/interview/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ç®—æ³•ç¬”è¯•</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible collapsed" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>HTML-CSS 8ç¯‡</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/html-css/interview.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>HTML_CSS é¢è¯•é¢˜</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/HTML.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>HTML5 OnePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/CSS.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSS3 OnePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/canvas-svg.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Canvas å’Œ svg</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/animation.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSS3åŠ¨ç”»</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/selector.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSS3é€‰æ‹©å™¨</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/principle.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ˜¾ç¤ºå™¨çš„æˆåƒåŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/drag.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ‹–æ‹½ API</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-110af560 data-v-64d08e6a><div class="VPDoc has-sidebar has-aside" data-v-64d08e6a data-v-24d2ee3f><div class="container" data-v-24d2ee3f><div class="aside" data-v-24d2ee3f><div class="aside-curtain" data-v-24d2ee3f></div><div class="aside-container" data-v-24d2ee3f><div class="aside-content" data-v-24d2ee3f><div class="VPDocAside" data-v-24d2ee3f data-v-c9c58101><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-c9c58101 data-v-955380af><div class="content" data-v-955380af><div class="outline-marker" data-v-955380af></div><div class="outline-title" data-v-955380af>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-955380af><span class="visually-hidden" id="doc-outline-aria-label" data-v-955380af> Table of Contents for current page </span><ul class="root" data-v-955380af data-v-384f799e><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-c9c58101></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-24d2ee3f><div class="content-container" data-v-24d2ee3f><!--[--><!--]--><main class="main" data-v-24d2ee3f><div style="position:relative;" class="vp-doc _blog_react_react-interview" data-v-24d2ee3f><div><h1 id="é‚£äº›å¹´-è¢«é—®çƒ‚äº†çš„-react-é¢è¯•é¢˜" tabindex="-1">é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ React é¢è¯•é¢˜ <a class="header-anchor" href="#é‚£äº›å¹´-è¢«é—®çƒ‚äº†çš„-react-é¢è¯•é¢˜" aria-hidden="true">#</a></h1><h2 id="react-ç»„ä»¶å‘½åæ¨èçš„æ–¹å¼æ˜¯å“ªä¸ª" tabindex="-1">React ç»„ä»¶å‘½åæ¨èçš„æ–¹å¼æ˜¯å“ªä¸ªï¼Ÿ <a class="header-anchor" href="#react-ç»„ä»¶å‘½åæ¨èçš„æ–¹å¼æ˜¯å“ªä¸ª" aria-hidden="true">#</a></h2><p>é€šè¿‡å¼•ç”¨è€Œä¸æ˜¯ä½¿ç”¨æ¥å‘½åç»„ä»¶ displayNameã€‚</p><p>ä½¿ç”¨ displayName å‘½åç»„ä»¶ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createClass</span><span style="color:#ABB2BF;">({  </span><span style="color:#E06C75;">displayName</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;TodoApp&#39;</span><span style="color:#ABB2BF;">,  </span><span style="color:#7F848E;font-style:italic;">// ...})</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.createClass({  displayName</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;TodoApp&#39;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// ...})</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>React æ¨èçš„æ–¹æ³•ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TodoApp</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {  </span><span style="color:#7F848E;font-style:italic;">// ...}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> TodoApp </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {  </span><span style="color:#6B737C;">// ...}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="react-æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜-å¢åŠ äº†å“ªäº›ä¸œè¥¿" tabindex="-1">react æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œå¢åŠ äº†å“ªäº›ä¸œè¥¿ <a class="header-anchor" href="#react-æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜-å¢åŠ äº†å“ªäº›ä¸œè¥¿" aria-hidden="true">#</a></h2><p>React 16.x çš„ä¸‰å¤§æ–°ç‰¹æ€§ Time Slicingã€Suspenseã€ hooks</p><ul><li><strong>Time Slicingï¼ˆè§£å†³ CPU é€Ÿåº¦é—®é¢˜</strong>ï¼‰ä½¿å¾—åœ¨æ‰§è¡Œä»»åŠ¡çš„æœŸé—´å¯ä»¥éšæ—¶æš‚åœï¼Œè·‘å»å¹²åˆ«çš„äº‹æƒ…ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾— react èƒ½åœ¨æ€§èƒ½æå…¶å·®çš„æœºå™¨è·‘æ—¶ï¼Œä»ç„¶ä¿æŒæœ‰è‰¯å¥½çš„æ€§èƒ½</li><li><strong>Suspense ï¼ˆè§£å†³ç½‘ç»œ IO é—®é¢˜ï¼‰</strong> å’Œ lazy é…åˆï¼Œå®ç°å¼‚æ­¥åŠ è½½ç»„ä»¶ã€‚ èƒ½æš‚åœå½“å‰ç»„ä»¶çš„æ¸²æŸ“ï¼Œ å½“å®ŒæˆæŸä»¶äº‹ä»¥åå†ç»§ç»­æ¸²æŸ“ï¼Œè§£å†³ä» react å‡ºç”Ÿåˆ°ç°åœ¨éƒ½å­˜åœ¨çš„ã€Œå¼‚æ­¥å‰¯ä½œç”¨ã€çš„é—®é¢˜ï¼Œè€Œä¸”è§£å†³å¾—éçš„ä¼˜é›…ï¼Œä½¿ç”¨çš„æ˜¯ T å¼‚æ­¥ä½†æ˜¯åŒæ­¥çš„å†™æ³•ï¼Œè¿™æ˜¯æœ€å¥½çš„è§£å†³å¼‚æ­¥é—®é¢˜çš„æ–¹å¼</li><li>æä¾›äº†ä¸€ä¸ª<strong>å†…ç½®å‡½æ•° componentDidCatch</strong>ï¼Œå½“æœ‰é”™è¯¯å‘ç”Ÿæ—¶ï¼Œå¯ä»¥å‹å¥½åœ°å±•ç¤º fallback ç»„ä»¶; å¯ä»¥æ•æ‰åˆ°å®ƒçš„å­å…ƒç´ ï¼ˆåŒ…æ‹¬åµŒå¥—å­å…ƒç´ ï¼‰æŠ›å‡ºçš„å¼‚å¸¸; å¯ä»¥å¤ç”¨é”™è¯¯ç»„ä»¶ã€‚</li></ul><p><strong>ï¼ˆ1ï¼‰React16.8</strong> åŠ å…¥ hooksï¼Œè®© React å‡½æ•°å¼ç»„ä»¶æ›´åŠ çµæ´»ï¼Œhooks ä¹‹å‰ï¼ŒReact å­˜åœ¨å¾ˆå¤šé—®é¢˜ï¼š</p><ul><li>åœ¨ç»„ä»¶é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾</li><li>å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£ï¼Œé«˜é˜¶ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åµŒå¥—è¿‡æ·±ã€‚</li><li>class ç»„ä»¶çš„ this æŒ‡å‘é—®é¢˜</li><li>éš¾ä»¥è®°å¿†çš„ç”Ÿå‘½å‘¨æœŸ</li></ul><p>hooks å¾ˆå¥½çš„è§£å†³äº†ä¸Šè¿°é—®é¢˜ï¼Œhooks æä¾›äº†å¾ˆå¤šæ–¹æ³•</p><ul><li>useState è¿”å›æœ‰çŠ¶æ€å€¼ï¼Œä»¥åŠæ›´æ–°è¿™ä¸ªçŠ¶æ€å€¼çš„å‡½æ•°</li><li>useEffect æ¥å—åŒ…å«å‘½ä»¤å¼ï¼Œå¯èƒ½æœ‰å‰¯ä½œç”¨ä»£ç çš„å‡½æ•°ã€‚</li><li>useContext æ¥å—ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆä» React.createContext è¿”å›çš„å€¼ï¼‰å¹¶è¿”å›å½“å‰ä¸Šä¸‹æ–‡å€¼ï¼Œ</li><li>useReducer useState çš„æ›¿ä»£æ–¹æ¡ˆã€‚æ¥å—ç±»å‹ä¸º ï¼ˆstateï¼Œactionï¼‰=&gt; newState çš„ reducerï¼Œå¹¶è¿”å›ä¸ dispatch æ–¹æ³•é…å¯¹çš„å½“å‰çŠ¶æ€ã€‚</li><li>useCalLback è¿”å›ä¸€ä¸ªå›å¿†çš„ memoized ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ä»…åœ¨å…¶ä¸­ä¸€ä¸ªè¾“å…¥å‘ç”Ÿæ›´æ”¹æ—¶æ‰ä¼šæ›´æ”¹ã€‚çº¯å‡½æ•°çš„è¾“å…¥è¾“å‡ºç¡®å®šæ€§ o useMemo çº¯çš„ä¸€ä¸ªè®°å¿†å‡½æ•° o useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ Current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ é€’çš„å‚æ•°ï¼Œè¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚</li><li>useImperativeMethods è‡ªå®šä¹‰ä½¿ç”¨ ref æ—¶å…¬å¼€ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼</li><li>useMutationEffect æ›´æ–°å…„å¼Ÿç»„ä»¶ä¹‹å‰ï¼Œå®ƒåœ¨ React æ‰§è¡Œå…¶ DOM æ”¹å˜çš„åŒä¸€é˜¶æ®µåŒæ­¥è§¦å‘</li><li>useLayoutEffect DOM æ”¹å˜ååŒæ­¥è§¦å‘ã€‚ä½¿ç”¨å®ƒæ¥ä» DOM è¯»å–å¸ƒå±€å¹¶åŒæ­¥é‡æ–°æ¸²æŸ“</li></ul><p><strong>ï¼ˆ2ï¼‰React16.9</strong></p><ul><li>é‡å‘½å Unsafe çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚æ–°çš„ UNSAFE_å‰ç¼€å°†æœ‰åŠ©äºåœ¨ä»£ç  review å’Œ debug æœŸé—´ï¼Œä½¿è¿™äº›æœ‰é—®é¢˜çš„å­—æ ·æ›´çªå‡º</li><li>åºŸå¼ƒ javascrip:å½¢å¼çš„ URLã€‚ä»¥ javascript:å¼€å¤´çš„ URL éå¸¸å®¹æ˜“é­å—æ”»å‡»ï¼Œé€ æˆå®‰å…¨æ¼æ´ã€‚</li><li>åºŸå¼ƒ&quot;Factory&quot;ç»„ä»¶ã€‚ å·¥å‚ç»„ä»¶ä¼šå¯¼è‡´ React å˜å¤§ä¸”å˜æ…¢ã€‚</li><li>actï¼ˆï¼‰ä¹Ÿæ”¯æŒå¼‚æ­¥å‡½æ•°ï¼Œå¹¶ä¸”ä½ å¯ä»¥åœ¨è°ƒç”¨å®ƒæ—¶ä½¿ç”¨ awaitã€‚</li><li>ä½¿ç”¨ &lt;React.ProfiLer&gt; è¿›è¡Œæ€§èƒ½è¯„ä¼°ã€‚åœ¨è¾ƒå¤§çš„åº”ç”¨ä¸­è¿½è¸ªæ€§èƒ½å›å½’å¯èƒ½ä¼šå¾ˆæ–¹ä¾¿</li></ul><p><strong>ï¼ˆ3ï¼‰React16.13.0</strong></p><ul><li>æ”¯æŒåœ¨æ¸²æŸ“æœŸé—´è°ƒç”¨ setStateï¼Œä½†ä»…é€‚ç”¨äºåŒä¸€ç»„ä»¶</li><li>å¯æ£€æµ‹å†²çªçš„æ ·å¼è§„åˆ™å¹¶è®°å½•è­¦å‘Š</li><li>åºŸå¼ƒ unstable_createPortalï¼Œä½¿ç”¨ CreatePortal</li><li>å°†ç»„ä»¶å †æ ˆæ·»åŠ åˆ°å…¶å¼€å‘è­¦å‘Šä¸­ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿéš”ç¦» bug å¹¶è°ƒè¯•å…¶ç¨‹åºï¼Œè¿™å¯ä»¥æ¸…æ¥šåœ°è¯´æ˜é—®é¢˜æ‰€åœ¨ï¼Œå¹¶æ›´å¿«åœ°å®šä½å’Œä¿®å¤é”™è¯¯ã€‚</li></ul><h2 id="react-å®ç°ä¸€ä¸ªå…¨å±€çš„-dialog" tabindex="-1">react å®ç°ä¸€ä¸ªå…¨å±€çš„ dialog <a class="header-anchor" href="#react-å®ç°ä¸€ä¸ªå…¨å±€çš„-dialog" aria-hidden="true">#</a></h2><h2 id="react-æ•°æ®æŒä¹…åŒ–æœ‰ä»€ä¹ˆå®è·µå—" tabindex="-1">React æ•°æ®æŒä¹…åŒ–æœ‰ä»€ä¹ˆå®è·µå—ï¼Ÿ <a class="header-anchor" href="#react-æ•°æ®æŒä¹…åŒ–æœ‰ä»€ä¹ˆå®è·µå—" aria-hidden="true">#</a></h2><p>å°è£…æ•°æ®æŒä¹…åŒ–ç»„ä»¶ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">storage</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// å¢åŠ </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">localStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setItem</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stringify</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// è·å–</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">localStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getItem</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// åˆ é™¤</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">localStorage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeItem</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Storage</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#B392F0;"> storage </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// å¢åŠ </span></span>
<span class="line"><span style="color:#B392F0;">  set(key</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> value) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">localStorage</span><span style="color:#B392F0;">.setItem(key</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#B392F0;">.stringify(value));</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// è·å–</span></span>
<span class="line"><span style="color:#B392F0;">  get(key) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#B392F0;">.parse(</span><span style="color:#79B8FF;">localStorage</span><span style="color:#B392F0;">.getItem(key));</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// åˆ é™¤</span></span>
<span class="line"><span style="color:#B392F0;">  remove(key) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">localStorage</span><span style="color:#B392F0;">.removeItem(key);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> Storage;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>åœ¨ React é¡¹ç›®ä¸­ï¼Œé€šè¿‡ redux å­˜å‚¨å…¨å±€æ•°æ®æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœç”¨æˆ·åˆ·æ–°äº†ç½‘é¡µï¼Œé‚£ä¹ˆé€šè¿‡ redux å­˜å‚¨çš„å…¨å±€æ•°æ®å°±ä¼šè¢«å…¨éƒ¨æ¸…ç©ºï¼Œæ¯”å¦‚ç™»å½•ä¿¡æ¯ç­‰ã€‚è¿™æ—¶å°±ä¼šæœ‰å…¨å±€æ•°æ®æŒä¹…åŒ–å­˜å‚¨çš„éœ€æ±‚ã€‚é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ localStorageï¼ŒlocalStorage æ˜¯æ²¡æœ‰æ—¶é—´é™åˆ¶çš„æ•°æ®å­˜å‚¨ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥å®ç°æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨ã€‚</p><p>ä½†æ˜¯åœ¨å·²ç»ä½¿ç”¨ redux æ¥ç®¡ç†å’Œå­˜å‚¨å…¨å±€æ•°æ®çš„åŸºç¡€ä¸Šï¼Œå†å»ä½¿ç”¨ localStorage æ¥è¯»å†™æ•°æ®ï¼Œè¿™æ ·ä¸ä»…æ˜¯å·¥ä½œé‡å·¨å¤§ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ç»“åˆ redux æ¥è¾¾åˆ°æŒä¹…æ•°æ®å­˜å‚¨åŠŸèƒ½çš„æ¡†æ¶å‘¢ï¼Ÿå½“ç„¶ï¼Œå®ƒå°±æ˜¯<strong>redux-persist</strong>ã€‚redux-persist ä¼šå°† redux çš„ store ä¸­çš„æ•°æ®ç¼“å­˜åˆ°æµè§ˆå™¨çš„ localStorage ä¸­ã€‚å…¶ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š</p><p><strong>ï¼ˆ1ï¼‰é¦–å…ˆè¦å®‰è£… redux-persistï¼š</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#E06C75;">npm</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">redux</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">persist</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">npm i redux</span><span style="color:#F97583;">-</span><span style="color:#B392F0;">persist</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>ï¼ˆ2ï¼‰å¯¹äº reducer å’Œ action çš„å¤„ç†ä¸å˜ï¼Œåªéœ€ä¿®æ”¹ store çš„ç”Ÿæˆä»£ç ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">createStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;redux&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">reducers</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;../reducers/index&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">persistStore</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">persistReducer</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;redux-persist&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">storage</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;redux-persist/lib/storage&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">autoMergeLevel2</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;redux-persist/lib/stateReconciler/autoMergeLevel2&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">persistConfig</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;root&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">storage</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">storage</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">stateReconciler</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">autoMergeLevel2</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// æŸ¥çœ‹ &#39;Merge Process&#39; éƒ¨åˆ†çš„å…·ä½“æƒ…å†µ</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">myPersistReducer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">persistReducer</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">persistConfig</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reducers</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createStore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">myPersistReducer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">persistor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">persistStore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { createStore } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;redux&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> reducers </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;../reducers/index&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { persistStore</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> persistReducer } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;redux-persist&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> storage </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;redux-persist/lib/storage&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> autoMergeLevel2 </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;redux-persist/lib/stateReconciler/autoMergeLevel2&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">persistConfig</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  key</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;root&quot;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  storage</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> storage</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  stateReconciler</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> autoMergeLevel2</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// æŸ¥çœ‹ &#39;Merge Process&#39; éƒ¨åˆ†çš„å…·ä½“æƒ…å†µ</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">myPersistReducer</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> persistReducer(persistConfig</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reducers);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">store</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> createStore(myPersistReducer);</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">persistor</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> persistStore(store);</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> store;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>ï¼ˆ3ï¼‰åœ¨ index.js ä¸­ï¼Œå°† PersistGate æ ‡ç­¾ä½œä¸ºç½‘é¡µå†…å®¹çš„çˆ¶æ ‡ç­¾ï¼š</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">React</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;react&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">ReactDOM</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;react-dom&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">Provider</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;react-redux&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./redux/store/store&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">persistor</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./redux/store/store&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">PersistGate</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;redux-persist/lib/integration/react&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">ReactDOM</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E5C07B;">Provider</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">store</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">store</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">PersistGate</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">loading</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#D19A66;">null</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">persistor</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">persistor</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">{</span><span style="color:#7F848E;font-style:italic;">/*ç½‘é¡µå†…å®¹*/</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E5C07B;">PersistGate</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E5C07B;">Provider</span><span style="color:#ABB2BF;">&gt;,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;root&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> React </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;react&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> ReactDOM </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;react-dom&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { Provider } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;react-redux&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> store </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./redux/store/store&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { persistor } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./redux/store/store&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { PersistGate } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;redux-persist/lib/integration/react&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">ReactDOM</span><span style="color:#B392F0;">.render(</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#79B8FF;">Provider</span><span style="color:#B392F0;"> store</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{store}&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#79B8FF;">PersistGate</span><span style="color:#B392F0;"> loading</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">} persistor</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{persistor}&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      {</span><span style="color:#6B737C;">/*ç½‘é¡µå†…å®¹*/</span><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#79B8FF;">PersistGate</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#79B8FF;">Provider</span><span style="color:#B392F0;">&gt;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.getElementById(</span><span style="color:#FFAB70;">&quot;root&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>è¿™å°±å®Œæˆäº†é€šè¿‡ redux-persist å®ç° React æŒä¹…åŒ–æœ¬åœ°æ•°æ®å­˜å‚¨çš„ç®€å•åº”ç”¨ã€‚</p><h2 id="å¯¹-react-å’Œ-vue-çš„ç†è§£-å®ƒä»¬çš„å¼‚åŒ" tabindex="-1">å¯¹ React å’Œ Vue çš„ç†è§£ï¼Œå®ƒä»¬çš„å¼‚åŒ <a class="header-anchor" href="#å¯¹-react-å’Œ-vue-çš„ç†è§£-å®ƒä»¬çš„å¼‚åŒ" aria-hidden="true">#</a></h2><p><strong>ç›¸ä¼¼ä¹‹å¤„ï¼š</strong></p><ul><li>éƒ½å°†æ³¨æ„åŠ›é›†ä¸­ä¿æŒåœ¨æ ¸å¿ƒåº“ï¼Œè€Œå°†å…¶ä»–åŠŸèƒ½å¦‚è·¯ç”±å’Œå…¨å±€çŠ¶æ€ç®¡ç†äº¤ç»™ç›¸å…³çš„åº“</li><li>éƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·ï¼Œèƒ½è®©ä½ å¾—åˆ°ä¸€ä¸ªæ ¹æ®æœ€ä½³å®è·µè®¾ç½®çš„é¡¹ç›®æ¨¡æ¿ã€‚</li><li>éƒ½ä½¿ç”¨äº† Virtual DOMï¼ˆè™šæ‹Ÿ DOMï¼‰æé«˜é‡ç»˜æ€§èƒ½</li><li>éƒ½æœ‰ props çš„æ¦‚å¿µï¼Œå…è®¸ç»„ä»¶é—´çš„æ•°æ®ä¼ é€’</li><li>éƒ½é¼“åŠ±ç»„ä»¶åŒ–åº”ç”¨ï¼Œå°†åº”ç”¨åˆ†æ‹†æˆä¸€ä¸ªä¸ªåŠŸèƒ½æ˜ç¡®çš„æ¨¡å—ï¼Œæé«˜å¤ç”¨æ€§</li></ul><p><strong>ä¸åŒä¹‹å¤„ï¼š</strong></p><p><strong>1ï¼‰æ•°æ®æµ</strong></p><p>Vue é»˜è®¤æ”¯æŒæ•°æ®åŒå‘ç»‘å®šï¼Œè€Œ React ä¸€ç›´æå€¡å•å‘æ•°æ®æµ</p><p><strong>2ï¼‰è™šæ‹Ÿ DOM</strong></p><p>Vue2.x å¼€å§‹å¼•å…¥&quot;Virtual DOM&quot;ï¼Œæ¶ˆé™¤äº†å’Œ React åœ¨è¿™æ–¹é¢çš„å·®å¼‚ï¼Œä½†æ˜¯åœ¨å…·ä½“çš„ç»†èŠ‚è¿˜æ˜¯æœ‰å„è‡ªçš„ç‰¹ç‚¹ã€‚</p><ul><li>Vue å®£ç§°å¯ä»¥æ›´å¿«åœ°è®¡ç®—å‡º Virtual DOM çš„å·®å¼‚ï¼Œè¿™æ˜¯ç”±äºå®ƒåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œä¼šè·Ÿè¸ªæ¯ä¸€ä¸ªç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œä¸éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘ã€‚</li><li>å¯¹äº React è€Œè¨€ï¼Œæ¯å½“åº”ç”¨çš„çŠ¶æ€è¢«æ”¹å˜æ—¶ï¼Œå…¨éƒ¨å­ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å½“ç„¶ï¼Œè¿™å¯ä»¥é€šè¿‡ PureComponent/shouldComponentUpdate è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ¥è¿›è¡Œæ§åˆ¶ï¼Œä½† Vue å°†æ­¤è§†ä¸ºé»˜è®¤çš„ä¼˜åŒ–ã€‚</li></ul><p><strong>3ï¼‰ç»„ä»¶åŒ–</strong></p><p>React ä¸ Vue æœ€å¤§çš„ä¸åŒæ˜¯æ¨¡æ¿çš„ç¼–å†™ã€‚</p><ul><li>Vue é¼“åŠ±å†™è¿‘ä¼¼å¸¸è§„ HTML çš„æ¨¡æ¿ã€‚å†™èµ·æ¥å¾ˆæ¥è¿‘æ ‡å‡† HTML å…ƒç´ ï¼Œåªæ˜¯å¤šäº†ä¸€äº›å±æ€§ã€‚</li><li>React æ¨èä½ æ‰€æœ‰çš„æ¨¡æ¿é€šç”¨ JavaScript çš„è¯­æ³•æ‰©å±•â€”â€”JSX ä¹¦å†™ã€‚</li></ul><p>å…·ä½“æ¥è®²ï¼šReact ä¸­ render å‡½æ•°æ˜¯æ”¯æŒé—­åŒ…ç‰¹æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ import çš„ç»„ä»¶åœ¨ render ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚ä½†æ˜¯åœ¨ Vue ä¸­ï¼Œç”±äºæ¨¡æ¿ä¸­ä½¿ç”¨çš„æ•°æ®éƒ½å¿…é¡»æŒ‚åœ¨ this ä¸Šè¿›è¡Œä¸€æ¬¡ä¸­è½¬ï¼Œæ‰€ä»¥ import å®Œç»„ä»¶ä¹‹åï¼Œè¿˜éœ€è¦åœ¨ components ä¸­å†å£°æ˜ä¸‹ã€‚</p><p><strong>4ï¼‰ç›‘å¬æ•°æ®å˜åŒ–çš„å®ç°åŸç†ä¸åŒ</strong></p><ul><li>Vue é€šè¿‡ getter/setter ä»¥åŠä¸€äº›å‡½æ•°çš„åŠ«æŒï¼Œèƒ½ç²¾ç¡®çŸ¥é“æ•°æ®å˜åŒ–ï¼Œä¸éœ€è¦ç‰¹åˆ«çš„ä¼˜åŒ–å°±èƒ½è¾¾åˆ°å¾ˆå¥½çš„æ€§èƒ½</li><li>React é»˜è®¤æ˜¯é€šè¿‡æ¯”è¾ƒå¼•ç”¨çš„æ–¹å¼è¿›è¡Œçš„ï¼Œå¦‚æœä¸ä¼˜åŒ–ï¼ˆPureComponent/shouldComponentUpdateï¼‰å¯èƒ½å¯¼è‡´å¤§é‡ä¸å¿…è¦çš„ vDOM çš„é‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯å› ä¸º Vue ä½¿ç”¨çš„æ˜¯å¯å˜æ•°æ®ï¼Œè€Œ React æ›´å¼ºè°ƒæ•°æ®çš„ä¸å¯å˜ã€‚</li></ul><p><strong>5ï¼‰é«˜é˜¶ç»„ä»¶</strong></p><p>react å¯ä»¥é€šè¿‡é«˜é˜¶ç»„ä»¶ï¼ˆHigher Order Components-- HOCï¼‰æ¥æ‰©å±•ï¼Œè€Œ vue éœ€è¦é€šè¿‡ mixins æ¥æ‰©å±•ã€‚</p><p>åŸå› é«˜é˜¶ç»„ä»¶å°±æ˜¯é«˜é˜¶å‡½æ•°ï¼Œè€Œ React çš„ç»„ä»¶æœ¬èº«å°±æ˜¯çº¯ç²¹çš„å‡½æ•°ï¼Œæ‰€ä»¥é«˜é˜¶å‡½æ•°å¯¹ React æ¥è¯´æ˜“å¦‚åæŒã€‚ç›¸å Vue.js ä½¿ç”¨ HTML æ¨¡æ¿åˆ›å»ºè§†å›¾ç»„ä»¶ï¼Œè¿™æ—¶æ¨¡æ¿æ— æ³•æœ‰æ•ˆçš„ç¼–è¯‘ï¼Œå› æ­¤ Vue ä¸é‡‡ç”¨ HOC æ¥å®ç°ã€‚</p><p><strong>6ï¼‰æ„å»ºå·¥å…·</strong></p><p>ä¸¤è€…éƒ½æœ‰è‡ªå·±çš„æ„å»ºå·¥å…·</p><ul><li>React ==&gt; Create React APP</li><li>Vue ==&gt; vue-cli</li></ul><p><strong>7ï¼‰è·¨å¹³å°</strong></p><ul><li>React ==&gt; React Native</li><li>Vue ==&gt; Weex</li></ul><h2 id="react-ç†å¿µ" tabindex="-1">React ç†å¿µ <a class="header-anchor" href="#react-ç†å¿µ" aria-hidden="true">#</a></h2><p><strong>ï¼ˆ1ï¼‰ç¼–å†™ç®€å•ç›´è§‚çš„ä»£ç </strong></p><p>React æœ€å¤§çš„ä»·å€¼ä¸æ˜¯é«˜æ€§èƒ½çš„è™šæ‹Ÿ DOMã€å°è£…çš„äº‹ä»¶æœºåˆ¶ã€æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œè€Œæ˜¯å£°æ˜å¼çš„ç›´è§‚çš„ç¼–ç æ–¹å¼ã€‚react æ–‡æ¡£ç¬¬ä¸€æ¡å°±æ˜¯å£°æ˜å¼ï¼ŒReact ä½¿åˆ›å»ºäº¤äº’å¼ UI å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä¸ºåº”ç”¨çš„æ¯ä¸€ä¸ªçŠ¶æ€è®¾è®¡ç®€æ´çš„è§†å›¾ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ React èƒ½æœ‰æ•ˆåœ°æ›´æ–°å¹¶æ­£ç¡®åœ°æ¸²æŸ“ç»„ä»¶ã€‚ ä»¥å£°æ˜å¼ç¼–å†™ UIï¼Œå¯ä»¥è®©ä»£ç æ›´åŠ å¯é ï¼Œä¸”æ–¹ä¾¿è°ƒè¯•ã€‚</p><p><strong>ï¼ˆ2ï¼‰ç®€åŒ–å¯å¤ç”¨çš„ç»„ä»¶</strong></p><p>React æ¡†æ¶é‡Œé¢ä½¿ç”¨äº†ç®€åŒ–çš„ç»„ä»¶æ¨¡å‹ï¼Œä½†æ›´å½»åº•åœ°ä½¿ç”¨äº†ç»„ä»¶åŒ–çš„æ¦‚å¿µã€‚React å°†æ•´ä¸ª UI ä¸Šçš„æ¯ä¸€ä¸ªåŠŸèƒ½æ¨¡å—å®šä¹‰æˆç»„ä»¶ï¼Œç„¶åå°†å°çš„ç»„ä»¶é€šè¿‡ç»„åˆæˆ–è€…åµŒå¥—çš„æ–¹å¼æ„æˆæ›´å¤§çš„ç»„ä»¶ã€‚React çš„ç»„ä»¶å…·æœ‰å¦‚ä¸‹çš„ç‰¹æ€§ âˆ¶</p><ul><li>å¯ç»„åˆï¼šç®€å•ç»„ä»¶å¯ä»¥ç»„åˆä¸ºå¤æ‚çš„ç»„ä»¶</li><li>å¯é‡ç”¨ï¼šæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå¯ä»¥è¢«å¤šä¸ªç»„ä»¶ä½¿ç”¨</li><li>å¯ç»´æŠ¤ï¼šå’Œç»„ä»¶ç›¸å…³çš„é€»è¾‘å’Œ UI éƒ½å°è£…åœ¨äº†ç»„ä»¶çš„å†…éƒ¨ï¼Œæ–¹ä¾¿ç»´æŠ¤</li><li>å¯æµ‹è¯•ï¼šå› ä¸ºç»„ä»¶çš„ç‹¬ç«‹æ€§ï¼Œæµ‹è¯•ç»„ä»¶å°±å˜å¾—æ–¹ä¾¿å¾ˆå¤šã€‚</li></ul><p><strong>ï¼ˆ3) Virtual DOM</strong></p><p>çœŸå®é¡µé¢å¯¹åº”ä¸€ä¸ª DOM æ ‘ã€‚åœ¨ä¼ ç»Ÿé¡µé¢çš„å¼€å‘æ¨¡å¼ä¸­ï¼Œæ¯æ¬¡éœ€è¦æ›´æ–°é¡µé¢æ—¶ï¼Œéƒ½è¦æ‰‹åŠ¨æ“ä½œ DOM æ¥è¿›è¡Œæ›´æ–°ã€‚ DOM æ“ä½œéå¸¸æ˜‚è´µã€‚åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæ€§èƒ½æ¶ˆè€—æœ€å¤§çš„å°±æ˜¯ DOM æ“ä½œï¼Œè€Œä¸”è¿™éƒ¨åˆ†ä»£ç ä¼šè®©æ•´ä½“é¡¹ç›®çš„ä»£ç å˜å¾—éš¾ ä»¥ç»´æŠ¤ã€‚React æŠŠçœŸå® DOM æ ‘è½¬æ¢æˆ JavaScript å¯¹è±¡æ ‘ï¼Œä¹Ÿå°±æ˜¯ Virtual DOMï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°åï¼Œé‡æ–°è®¡ç®— Virtual DOMï¼Œå¹¶å’Œä¸Šä¸€æ¬¡ç”Ÿæˆçš„ Virtual DOM åšå¯¹æ¯”ï¼Œå¯¹å‘ç”Ÿå˜åŒ–çš„éƒ¨åˆ†åšæ‰¹é‡æ›´æ–°ã€‚React ä¹Ÿæä¾›äº†ç›´è§‚çš„ shouldComponentUpdate ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œæ¥å‡å°‘æ•°æ®å˜åŒ–åä¸å¿…è¦çš„ Virtual DOM å¯¹æ¯”è¿‡ç¨‹ï¼Œä»¥ä¿è¯æ€§èƒ½ã€‚</p><p><strong>ï¼ˆ4ï¼‰å‡½æ•°å¼ç¼–ç¨‹</strong></p><p>React æŠŠè¿‡å»ä¸æ–­é‡å¤æ„å»º UI çš„è¿‡ç¨‹æŠ½è±¡æˆäº†ç»„ä»¶ï¼Œä¸”åœ¨ç»™å®šå‚æ•°çš„æƒ…å†µä¸‹çº¦å®šæ¸²æŸ“å¯¹åº”çš„ UI ç•Œé¢ã€‚React èƒ½å……åˆ†åˆ©ç”¨å¾ˆå¤šå‡½æ•°å¼æ–¹æ³•å»å‡å°‘å†—ä½™ä»£ç ã€‚æ­¤å¤–ï¼Œç”±äºå®ƒæœ¬èº«å°±æ˜¯ç®€å•å‡½æ•°ï¼Œæ‰€ä»¥æ˜“äºæµ‹è¯•ã€‚</p><p><strong>ï¼ˆ5ï¼‰ä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ç¼–å†™</strong></p><p>æ— è®ºç°åœ¨æ­£åœ¨ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯æ ˆï¼Œéƒ½å¯ä»¥éšæ—¶å¼•å…¥ React æ¥å¼€å‘æ–°ç‰¹æ€§ï¼Œè€Œä¸éœ€è¦é‡å†™ç°æœ‰ä»£ç ã€‚</p><p>React è¿˜å¯ä»¥ä½¿ç”¨ Node è¿›è¡ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œæˆ–ä½¿ç”¨ React Native å¼€å‘åŸç”Ÿç§»åŠ¨åº”ç”¨ã€‚å› ä¸º React ç»„ä»¶å¯ä»¥æ˜ å°„ä¸ºå¯¹åº”çš„åŸç”Ÿæ§ä»¶ã€‚åœ¨è¾“å‡ºçš„æ—¶å€™ï¼Œæ˜¯è¾“å‡º Web DOMï¼Œè¿˜æ˜¯ Android æ§ä»¶ï¼Œè¿˜æ˜¯ iOS æ§ä»¶ï¼Œå°±ç”±å¹³å°æœ¬èº«å†³å®šäº†ã€‚æ‰€ä»¥ï¼Œreact å¾ˆæ–¹ä¾¿å’Œå…¶ä»–å¹³å°é›†æˆ</p><h2 id="react-ä¸­-props-children-å’Œ-react-children-çš„åŒºåˆ«" tabindex="-1">React ä¸­ props.children å’Œ React.Children çš„åŒºåˆ« <a class="header-anchor" href="#react-ä¸­-props-children-å’Œ-react-children-çš„åŒºåˆ«" aria-hidden="true">#</a></h2><p>åœ¨ React ä¸­ï¼Œå½“æ¶‰åŠç»„ä»¶åµŒå¥—ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨<code>props.children</code>æŠŠæ‰€æœ‰å­ç»„ä»¶æ˜¾ç¤ºå‡ºæ¥ã€‚å¦‚ä¸‹ï¼š</p><p>å¦‚æœæƒ³æŠŠçˆ¶ç»„ä»¶ä¸­çš„å±æ€§ä¼ ç»™æ‰€æœ‰çš„å­ç»„ä»¶ï¼Œéœ€è¦ä½¿ç”¨<code>React.Children</code>æ–¹æ³•ã€‚</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// App</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">React</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;react&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">RadioOption</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./Comp&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//çˆ¶ç»„ä»¶ç”¨,propsæ˜¯æŒ‡çˆ¶ç»„ä»¶çš„props</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">renderChildren</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Children</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">children</span><span style="color:#ABB2BF;">, (</span><span style="color:#E06C75;font-style:italic;">child</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">child</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">RadioOption</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cloneElement</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">child</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//æŠŠçˆ¶ç»„ä»¶çš„props.nameèµ‹å€¼ç»™æ¯ä¸ªå­ç»„ä»¶</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">child</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//çˆ¶ç»„ä»¶</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">RadioGroup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#61AFEF;">renderChildren</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">App</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">RadioGroup</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;hello&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">RadioOption</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">label</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;é€‰é¡¹ä¸€&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">RadioOption</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">label</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;é€‰é¡¹äºŒ&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;2&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">RadioOption</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">label</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;é€‰é¡¹ä¸‰&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;3&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E5C07B;">RadioGroup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">App</span><span style="color:#ABB2BF;"> };</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// App</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> React </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;react&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> RadioOption </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./Comp&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#6B737C;">//çˆ¶ç»„ä»¶ç”¨,propsæ˜¯æŒ‡çˆ¶ç»„ä»¶çš„props</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> renderChildren(props) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">Children</span><span style="color:#B392F0;">.map(</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.children</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> (child) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (</span><span style="color:#79B8FF;">child</span><span style="color:#B392F0;">.type </span><span style="color:#F97583;">===</span><span style="color:#B392F0;"> RadioOption)</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.cloneElement(child</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">//æŠŠçˆ¶ç»„ä»¶çš„props.nameèµ‹å€¼ç»™æ¯ä¸ªå­ç»„ä»¶</span></span>
<span class="line"><span style="color:#B392F0;">        name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.name</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">      });</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> child;</span></span>
<span class="line"><span style="color:#B392F0;">  });</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">//çˆ¶ç»„ä»¶</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> RadioGroup(props) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;{renderChildren(props)}&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> App() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#79B8FF;">RadioGroup</span><span style="color:#B392F0;"> name</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;hello&quot;</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">RadioOption</span><span style="color:#B392F0;"> label</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;é€‰é¡¹ä¸€&quot;</span><span style="color:#B392F0;"> value</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;1&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">RadioOption</span><span style="color:#B392F0;"> label</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;é€‰é¡¹äºŒ&quot;</span><span style="color:#B392F0;"> value</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;2&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">RadioOption</span><span style="color:#B392F0;"> label</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;é€‰é¡¹ä¸‰&quot;</span><span style="color:#B392F0;"> value</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;3&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#79B8FF;">RadioGroup</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> { App };</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// Comp</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">RadioOption</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">label</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;radio&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">name</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">label</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">label</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">RadioOption</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// Comp</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> RadioOption(props) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">label</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;radio&quot;</span><span style="color:#B392F0;"> value</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.value} name</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.name} /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      {</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.label}</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">label</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> RadioOption;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ä»¥ä¸Šï¼Œ<code>React.Children.map</code>è®©æˆ‘ä»¬å¯¹çˆ¶ç»„ä»¶çš„æ‰€æœ‰å­ç»„ä»¶åˆæ›´çµæ´»çš„æ§åˆ¶ã€‚</p><h2 id="react-çš„ä¸¥æ ¼æ¨¡å¼å¦‚ä½•ä½¿ç”¨-æœ‰ä»€ä¹ˆç”¨å¤„" tabindex="-1">React çš„ä¸¥æ ¼æ¨¡å¼å¦‚ä½•ä½¿ç”¨ï¼Œæœ‰ä»€ä¹ˆç”¨å¤„ï¼Ÿ <a class="header-anchor" href="#react-çš„ä¸¥æ ¼æ¨¡å¼å¦‚ä½•ä½¿ç”¨-æœ‰ä»€ä¹ˆç”¨å¤„" aria-hidden="true">#</a></h2><p><code>StrictMode</code> æ˜¯ä¸€ä¸ªç”¨æ¥çªå‡ºæ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ½œåœ¨é—®é¢˜çš„å·¥å…·ã€‚ä¸ <code>Fragment</code> ä¸€æ ·ï¼Œ<code>StrictMode</code> ä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„ UIã€‚å®ƒä¸ºå…¶åä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚ å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºçš„ä»»ä½•éƒ¨åˆ†å¯ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚ä¾‹å¦‚ï¼š</p><div class="language-jsx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">React</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;react&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ExampleApplication</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">Header</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">React.StrictMode</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E5C07B;">ComponentOne</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E5C07B;">ComponentTwo</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E5C07B;">React.StrictMode</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">Footer</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> React </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;react&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> ExampleApplication() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">Header</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">React.StrictMode</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">          &lt;</span><span style="color:#79B8FF;">ComponentOne</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">          &lt;</span><span style="color:#79B8FF;">ComponentTwo</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;/</span><span style="color:#79B8FF;">React.StrictMode</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">Footer</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>åœ¨ä¸Šè¿°çš„ç¤ºä¾‹ä¸­ï¼Œä¸ä¼šå¯¹ <code>Header</code> å’Œ <code>Footer</code> ç»„ä»¶è¿è¡Œä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ã€‚ä½†æ˜¯ï¼Œ<code>ComponentOne</code> å’Œ <code>ComponentTwo</code> ä»¥åŠå®ƒä»¬çš„æ‰€æœ‰åä»£å…ƒç´ éƒ½å°†è¿›è¡Œæ£€æŸ¥ã€‚</p><p><code>StrictMode</code> ç›®å‰æœ‰åŠ©äºï¼š</p><ul><li>è¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ</li><li>å…³äºä½¿ç”¨è¿‡æ—¶å­—ç¬¦ä¸² ref API çš„è­¦å‘Š</li><li>å…³äºä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³•çš„è­¦å‘Š</li><li>æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨</li><li>æ£€æµ‹è¿‡æ—¶çš„ context API</li></ul><h2 id="åœ¨-react-ä¸­é¡µé¢é‡æ–°åŠ è½½æ—¶æ€æ ·ä¿ç•™æ•°æ®" tabindex="-1">åœ¨ React ä¸­é¡µé¢é‡æ–°åŠ è½½æ—¶æ€æ ·ä¿ç•™æ•°æ®ï¼Ÿ <a class="header-anchor" href="#åœ¨-react-ä¸­é¡µé¢é‡æ–°åŠ è½½æ—¶æ€æ ·ä¿ç•™æ•°æ®" aria-hidden="true">#</a></h2><p>è¿™ä¸ªé—®é¢˜å°±è®¾è®¡åˆ°äº†<strong>æ•°æ®æŒä¹…åŒ–ï¼Œ</strong> ä¸»è¦çš„å®ç°æ–¹å¼æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li><strong>Reduxï¼š</strong> å°†é¡µé¢çš„æ•°æ®å­˜å‚¨åœ¨ redux ä¸­ï¼Œåœ¨é‡æ–°åŠ è½½é¡µé¢æ—¶ï¼Œè·å– Redux ä¸­çš„æ•°æ®ï¼›</li><li><strong>data.jsï¼š</strong> ä½¿ç”¨ webpack æ„å»ºçš„é¡¹ç›®ï¼Œå¯ä»¥å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œdata.jsï¼Œå°†æ•°æ®ä¿å­˜ data.js ä¸­ï¼Œè·³è½¬é¡µé¢åè·å–ï¼›</li><li><strong>sessionStorgeï¼š</strong> åœ¨è¿›å…¥é€‰æ‹©åœ°å€é¡µé¢ä¹‹å‰ï¼ŒcomponentWillUnMount çš„æ—¶å€™ï¼Œå°†æ•°æ®å­˜å‚¨åˆ° sessionStorage ä¸­ï¼Œæ¯æ¬¡è¿›å…¥é¡µé¢åˆ¤æ–­ sessionStorage ä¸­æœ‰æ²¡æœ‰å­˜å‚¨çš„é‚£ä¸ªå€¼ï¼Œæœ‰ï¼Œåˆ™è¯»å–æ¸²æŸ“æ•°æ®ï¼›æ²¡æœ‰ï¼Œåˆ™è¯´æ˜æ•°æ®æ˜¯åˆå§‹åŒ–çš„çŠ¶æ€ã€‚è¿”å›æˆ–è¿›å…¥é™¤äº†é€‰æ‹©åœ°å€ä»¥å¤–çš„é¡µé¢ï¼Œæ¸…æ‰å­˜å‚¨çš„ sessionStorageï¼Œä¿è¯ä¸‹æ¬¡è¿›å…¥æ˜¯åˆå§‹åŒ–çš„æ•°æ®</li><li><strong>history APIï¼š</strong> History API çš„ <code>pushState</code> å‡½æ•°å¯ä»¥ç»™å†å²è®°å½•å…³è”ä¸€ä¸ªä»»æ„çš„å¯åºåˆ—åŒ– <code>state</code>ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è·¯ç”± <code>push</code> çš„æ—¶å€™å°†å½“å‰é¡µé¢çš„ä¸€äº›ä¿¡æ¯å­˜åˆ° <code>state</code> ä¸­ï¼Œä¸‹æ¬¡è¿”å›åˆ°è¿™ä¸ªé¡µé¢çš„æ—¶å€™å°±èƒ½ä» <code>state</code> é‡Œé¢å–å‡ºç¦»å¼€å‰çš„æ•°æ®é‡æ–°æ¸²æŸ“ã€‚react-router ç›´æ¥å¯ä»¥æ”¯æŒã€‚è¿™ä¸ªæ–¹æ³•é€‚åˆä¸€äº›éœ€è¦ä¸´æ—¶å­˜å‚¨çš„åœºæ™¯ã€‚</li></ul><h2 id="åŒæ—¶å¼•ç”¨è¿™ä¸‰ä¸ªåº“-react-jsã€react-dom-js-å’Œ-babel-js-å®ƒä»¬éƒ½æœ‰ä»€ä¹ˆä½œç”¨" tabindex="-1">åŒæ—¶å¼•ç”¨è¿™ä¸‰ä¸ªåº“ react.jsã€react-dom.js å’Œ babel.js å®ƒä»¬éƒ½æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ <a class="header-anchor" href="#åŒæ—¶å¼•ç”¨è¿™ä¸‰ä¸ªåº“-react-jsã€react-dom-js-å’Œ-babel-js-å®ƒä»¬éƒ½æœ‰ä»€ä¹ˆä½œç”¨" aria-hidden="true">#</a></h2><ul><li>reactï¼šåŒ…å« react æ‰€å¿…é¡»çš„æ ¸å¿ƒä»£ç </li><li>react-domï¼šreact æ¸²æŸ“åœ¨ä¸åŒå¹³å°æ‰€éœ€è¦çš„æ ¸å¿ƒä»£ç </li><li>babelï¼šå°† jsx è½¬æ¢æˆ React ä»£ç çš„å·¥å…·</li></ul><h2 id="react-å¿…é¡»ä½¿ç”¨-jsx-å—" tabindex="-1">React å¿…é¡»ä½¿ç”¨ JSX å—ï¼Ÿ <a class="header-anchor" href="#react-å¿…é¡»ä½¿ç”¨-jsx-å—" aria-hidden="true">#</a></h2><p>React å¹¶ä¸å¼ºåˆ¶è¦æ±‚ä½¿ç”¨ JSXã€‚å½“ä¸æƒ³åœ¨æ„å»ºç¯å¢ƒä¸­é…ç½®æœ‰å…³ JSX ç¼–è¯‘æ—¶ï¼Œä¸åœ¨ React ä¸­ä½¿ç”¨ JSX ä¼šæ›´åŠ æ–¹ä¾¿;æ¯ä¸ª JSX å…ƒç´ åªæ˜¯è°ƒç”¨ <code>React.createElement(component, props, ...children)</code> çš„è¯­æ³•ç³–ã€‚å› æ­¤ï¼Œä½¿ç”¨ JSX å¯ä»¥å®Œæˆçš„ä»»ä½•äº‹æƒ…éƒ½å¯ä»¥é€šè¿‡çº¯ JavaScript å®Œæˆã€‚</p><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨-jsx-çš„ç»„ä»¶ä¸­æ²¡æœ‰çœ‹åˆ°ä½¿ç”¨-react-å´éœ€è¦å¼•å…¥-react" tabindex="-1">ä¸ºä»€ä¹ˆä½¿ç”¨ jsx çš„ç»„ä»¶ä¸­æ²¡æœ‰çœ‹åˆ°ä½¿ç”¨ react å´éœ€è¦å¼•å…¥ reactï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä½¿ç”¨-jsx-çš„ç»„ä»¶ä¸­æ²¡æœ‰çœ‹åˆ°ä½¿ç”¨-react-å´éœ€è¦å¼•å…¥-react" aria-hidden="true">#</a></h2><p>æœ¬è´¨ä¸Šæ¥è¯´ JSX æ˜¯<code>React.createElement(component, props, ...children)</code>æ–¹æ³•çš„è¯­æ³•ç³–ã€‚åœ¨ React 17 ä¹‹å‰ï¼Œå¦‚æœä½¿ç”¨äº† JSXï¼Œå…¶å®å°±æ˜¯åœ¨ä½¿ç”¨ Reactï¼Œ <code>babel</code> ä¼šæŠŠç»„ä»¶è½¬æ¢ä¸º <code>CreateElement</code> å½¢å¼ã€‚åœ¨ React 17 ä¹‹åï¼Œå°±ä¸å†éœ€è¦å¼•å…¥ï¼Œå› ä¸º <code>babel</code> å·²ç»å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨å¼•å…¥ reactã€‚</p><h2 id="åœ¨-react-ä¸­æ€ä¹ˆä½¿ç”¨-async-await" tabindex="-1">åœ¨ React ä¸­æ€ä¹ˆä½¿ç”¨ async/awaitï¼Ÿ <a class="header-anchor" href="#åœ¨-react-ä¸­æ€ä¹ˆä½¿ç”¨-async-await" aria-hidden="true">#</a></h2><p>async/await æ˜¯ ES7 æ ‡å‡†ä¸­çš„æ–°ç‰¹æ€§ã€‚å¦‚æœæ˜¯ä½¿ç”¨ React å®˜æ–¹çš„è„šæ‰‹æ¶åˆ›å»ºçš„é¡¹ç›®ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å¦‚æœæ˜¯åœ¨è‡ªå·±æ­å»ºçš„ webpack é…ç½®çš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¯èƒ½ä¼šé‡åˆ° <strong>regeneratorRuntime is not defined</strong> çš„å¼‚å¸¸é”™è¯¯ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¼•å…¥ babelï¼Œå¹¶åœ¨ babel ä¸­é…ç½®ä½¿ç”¨ async/awaitã€‚å¯ä»¥åˆ©ç”¨ babel çš„ transform-async-to-module-method æ’ä»¶æ¥è½¬æ¢å…¶æˆä¸ºæµè§ˆå™¨æ”¯æŒçš„è¯­æ³•ï¼Œè™½ç„¶æ²¡æœ‰æ€§èƒ½çš„æå‡ï¼Œä½†å¯¹äºä»£ç ç¼–å†™ä½“éªŒè¦æ›´å¥½ã€‚</p><h2 id="react-children-map-å’Œ-js-çš„-map-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1">React.Children.map å’Œ js çš„ map æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#react-children-map-å’Œ-js-çš„-map-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a></h2><p>JavaScript ä¸­çš„ map ä¸ä¼šå¯¹ä¸º null æˆ–è€… undefined çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œè€Œ React.Children.map ä¸­çš„ map å¯ä»¥å¤„ç† React.Children ä¸º null æˆ–è€… undefined çš„æƒ…å†µã€‚</p><h2 id="å¯¹-react-ssr-çš„ç†è§£" tabindex="-1">å¯¹ React SSR çš„ç†è§£ <a class="header-anchor" href="#å¯¹-react-ssr-çš„ç†è§£" aria-hidden="true">#</a></h2><p>æœåŠ¡ç«¯æ¸²æŸ“æ˜¯æ•°æ®ä¸æ¨¡ç‰ˆç»„æˆçš„ htmlï¼Œå³ HTML = æ•°æ® ï¼‹ æ¨¡ç‰ˆã€‚å°†ç»„ä»¶æˆ–é¡µé¢é€šè¿‡æœåŠ¡å™¨ç”Ÿæˆ html å­—ç¬¦ä¸²ï¼Œå†å‘é€åˆ°æµè§ˆå™¨ï¼Œæœ€åå°†é™æ€æ ‡è®°&quot;æ··åˆ&quot;ä¸ºå®¢æˆ·ç«¯ä¸Šå®Œå…¨äº¤äº’çš„åº”ç”¨ç¨‹åºã€‚é¡µé¢æ²¡ä½¿ç”¨æœåŠ¡æ¸²æŸ“ï¼Œå½“è¯·æ±‚é¡µé¢æ—¶ï¼Œè¿”å›çš„ body é‡Œä¸ºç©ºï¼Œä¹‹åæ‰§è¡Œ js å°† html ç»“æ„æ³¨å…¥åˆ° body é‡Œï¼Œç»“åˆ css æ˜¾ç¤ºå‡ºæ¥;</p><p><strong>SSR çš„ä¼˜åŠ¿ï¼š</strong></p><ul><li>å¯¹ SEO å‹å¥½</li><li>æ‰€æœ‰çš„æ¨¡ç‰ˆã€å›¾ç‰‡ç­‰èµ„æºéƒ½å­˜åœ¨æœåŠ¡å™¨ç«¯</li><li>ä¸€ä¸ª html è¿”å›æ‰€æœ‰æ•°æ®</li><li>å‡å°‘ HTTP è¯·æ±‚</li><li>å“åº”å¿«ã€ç”¨æˆ·ä½“éªŒå¥½ã€é¦–å±æ¸²æŸ“å¿«</li></ul><p><strong>1ï¼‰æ›´åˆ©äº SEO</strong></p><p>ä¸åŒçˆ¬è™«å·¥ä½œåŸç†ç±»ä¼¼ï¼Œåªä¼šçˆ¬å–æºç ï¼Œä¸ä¼šæ‰§è¡Œç½‘ç«™çš„ä»»ä½•è„šæœ¬ä½¿ç”¨äº† React æˆ–è€…å…¶å®ƒ MVVM æ¡†æ¶ä¹‹åï¼Œé¡µé¢å¤§å¤šæ•° DOM å…ƒç´ éƒ½æ˜¯åœ¨å®¢æˆ·ç«¯æ ¹æ® js åŠ¨æ€ç”Ÿæˆï¼Œå¯ä¾›çˆ¬è™«æŠ“å–åˆ†æçš„å†…å®¹å¤§å¤§å‡å°‘ã€‚å¦å¤–ï¼Œæµè§ˆå™¨çˆ¬è™«ä¸ä¼šç­‰å¾…æˆ‘ä»¬çš„æ•°æ®å®Œæˆä¹‹åå†å»æŠ“å–é¡µé¢æ•°æ®ã€‚æœåŠ¡ç«¯æ¸²æŸ“è¿”å›ç»™å®¢æˆ·ç«¯çš„æ˜¯å·²ç»è·å–äº†å¼‚æ­¥æ•°æ®å¹¶æ‰§è¡Œ JavaScript è„šæœ¬çš„æœ€ç»ˆ HTMLï¼Œç½‘ç»œçˆ¬ä¸­å°±å¯ä»¥æŠ“å–åˆ°å®Œæ•´é¡µé¢çš„ä¿¡æ¯ã€‚</p><p><strong>2ï¼‰æ›´åˆ©äºé¦–å±æ¸²æŸ“</strong></p><p>é¦–å±çš„æ¸²æŸ“æ˜¯ node å‘é€è¿‡æ¥çš„ html å­—ç¬¦ä¸²ï¼Œå¹¶ä¸ä¾èµ–äº js æ–‡ä»¶äº†ï¼Œè¿™å°±ä¼šä½¿ç”¨æˆ·æ›´å¿«çš„çœ‹åˆ°é¡µé¢çš„å†…å®¹ã€‚å°¤å…¶æ˜¯é’ˆå¯¹å¤§å‹å•é¡µåº”ç”¨ï¼Œæ‰“åŒ…åæ–‡ä»¶ä½“ç§¯æ¯”è¾ƒå¤§ï¼Œæ™®é€šå®¢æˆ·ç«¯æ¸²æŸ“åŠ è½½æ‰€æœ‰æ‰€éœ€æ–‡ä»¶æ—¶é—´è¾ƒé•¿ï¼Œé¦–é¡µå°±ä¼šæœ‰ä¸€ä¸ªå¾ˆé•¿çš„ç™½å±ç­‰å¾…æ—¶é—´ã€‚</p><p><strong>SSR çš„å±€é™ï¼š</strong></p><p><strong>1ï¼‰æœåŠ¡ç«¯å‹åŠ›è¾ƒå¤§</strong></p><p>æœ¬æ¥æ˜¯é€šè¿‡å®¢æˆ·ç«¯å®Œæˆæ¸²æŸ“ï¼Œç°åœ¨ç»Ÿä¸€åˆ°æœåŠ¡ç«¯ node æœåŠ¡å»åšã€‚å°¤å…¶æ˜¯é«˜å¹¶å‘è®¿é—®çš„æƒ…å†µï¼Œä¼šå¤§é‡å ç”¨æœåŠ¡ç«¯ CPU èµ„æº;</p><p><strong>2ï¼‰å¼€å‘æ¡ä»¶å—é™</strong></p><p>åœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸­ï¼Œåªä¼šæ‰§è¡Œåˆ° componentDidMount ä¹‹å‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå› æ­¤é¡¹ç›®å¼•ç”¨çš„ç¬¬ä¸‰æ–¹çš„åº“ä¹Ÿä¸å¯ç”¨å…¶å®ƒç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œè¿™å¯¹å¼•ç”¨åº“çš„é€‰æ‹©äº§ç”Ÿäº†å¾ˆå¤§çš„é™åˆ¶;</p><p><strong>3ï¼‰å­¦ä¹ æˆæœ¬ç›¸å¯¹è¾ƒé«˜</strong> é™¤äº†å¯¹ webpackã€MVVM æ¡†æ¶è¦ç†Ÿæ‚‰ï¼Œè¿˜éœ€è¦æŒæ¡ nodeã€ Koa2 ç­‰ç›¸å…³æŠ€æœ¯ã€‚ç›¸å¯¹äºå®¢æˆ·ç«¯æ¸²æŸ“ï¼Œé¡¹ç›®æ„å»ºã€éƒ¨ç½²è¿‡ç¨‹æ›´åŠ å¤æ‚ã€‚</p><p><strong>æ—¶é—´è€—æ—¶æ¯”è¾ƒï¼š</strong></p><p><strong>1ï¼‰æ•°æ®è¯·æ±‚</strong></p><p>ç”±æœåŠ¡ç«¯è¯·æ±‚é¦–å±æ•°æ®ï¼Œè€Œä¸æ˜¯å®¢æˆ·ç«¯è¯·æ±‚é¦–å±æ•°æ®ï¼Œè¿™æ˜¯&quot;å¿«&quot;çš„ä¸€ä¸ªä¸»è¦åŸå› ã€‚æœåŠ¡ç«¯åœ¨å†…ç½‘è¿›è¡Œè¯·æ±‚ï¼Œæ•°æ®å“åº”é€Ÿåº¦å¿«ã€‚å®¢æˆ·ç«¯åœ¨ä¸åŒç½‘ç»œç¯å¢ƒè¿›è¡Œæ•°æ®è¯·æ±‚ï¼Œä¸”å¤–ç½‘ http è¯·æ±‚å¼€é”€å¤§ï¼Œå¯¼è‡´æ—¶é—´å·®</p><h2 id="ä¸ºä»€ä¹ˆ-react-è¦ç”¨-jsx" tabindex="-1">ä¸ºä»€ä¹ˆ React è¦ç”¨ JSXï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-react-è¦ç”¨-jsx" aria-hidden="true">#</a></h2><p>JSX æ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ä¸ªç±»ä¼¼äº XML çš„ ECMAScript è¯­æ³•æ‰©å±•ã€‚å®ƒæœ¬èº«æ²¡æœ‰å¤ªå¤šçš„è¯­æ³•å®šä¹‰ï¼Œä¹Ÿä¸æœŸæœ›å¼•å…¥æ›´å¤šçš„æ ‡å‡†ã€‚</p><p>è€Œ JSX æ›´åƒæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œé€šè¿‡ç±»ä¼¼ XML çš„æè¿°æ–¹å¼ï¼Œæå†™å‡½æ•°å¯¹è±¡ã€‚</p><p>é€šè¿‡å¯¹æ¯”ï¼Œå¯ä»¥æ¸…æ™°åœ°å‘ç°ï¼Œä»£ç å˜å¾—æ›´ä¸ºç®€æ´ï¼Œè€Œä¸”ä»£ç ç»“æ„å±‚æ¬¡æ›´ä¸ºæ¸…æ™°ã€‚</p><p>å› ä¸º React éœ€è¦å°†ç»„ä»¶è½¬åŒ–ä¸ºè™šæ‹Ÿ DOM æ ‘ï¼Œæ‰€ä»¥åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ‰‹å†™ä¸€æ£µç»“æ„æ ‘ã€‚è€Œ<strong>XML åœ¨æ ‘ç»“æ„çš„æè¿°ä¸Šå¤©ç”Ÿå…·æœ‰å¯è¯»æ€§å¼ºçš„ä¼˜åŠ¿ã€‚</strong></p><p>ä½†è¿™æ ·å¯è¯»æ€§å¼ºçš„ä»£ç ä»…ä»…æ˜¯ç»™å†™ç¨‹åºçš„åŒå­¦çœ‹çš„ï¼Œå®é™…ä¸Šåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¼šä½¿ç”¨ Babel æ’ä»¶å°† JSX è¯­æ³•çš„ä»£ç è¿˜åŸä¸º React.createElement çš„ä»£ç ã€‚</p><p><strong>æ€»ç»“ï¼š</strong> JSX æ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•ï¼Œç»“æ„ç±»ä¼¼ XMLã€‚JSX ä¸»è¦ç”¨äºå£°æ˜ React å…ƒç´ ï¼Œä½† React ä¸­å¹¶ä¸å¼ºåˆ¶ä½¿ç”¨ JSXã€‚å³ä½¿ä½¿ç”¨äº† JSXï¼Œä¹Ÿä¼šåœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡ Babel æ’ä»¶ç¼–è¯‘ä¸º React.createElementã€‚æ‰€ä»¥ JSX æ›´åƒæ˜¯ React.createElement çš„ä¸€ç§è¯­æ³•ç³–ã€‚</p><p>React å›¢é˜Ÿå¹¶ä¸æƒ³å¼•å…¥ JavaScript æœ¬èº«ä»¥å¤–çš„å¼€å‘ä½“ç³»ã€‚è€Œæ˜¯å¸Œæœ›é€šè¿‡åˆç†çš„å…³æ³¨ç‚¹åˆ†ç¦»ä¿æŒç»„ä»¶å¼€å‘çš„çº¯ç²¹æ€§ã€‚</p><h2 id="hoc-ç›¸æ¯”-mixins-æœ‰ä»€ä¹ˆä¼˜ç‚¹" tabindex="-1">HOC ç›¸æ¯” mixins æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ <a class="header-anchor" href="#hoc-ç›¸æ¯”-mixins-æœ‰ä»€ä¹ˆä¼˜ç‚¹" aria-hidden="true">#</a></h2><p>HOC å’Œ Vue ä¸­çš„ mixins ä½œç”¨æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸”åœ¨æ—©æœŸ React ä¹Ÿæ˜¯ä½¿ç”¨ mixins çš„æ–¹å¼ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨ class çš„æ–¹å¼åˆ›å»ºç»„ä»¶ä»¥åï¼Œmixins çš„æ–¹å¼å°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œå¹¶ä¸”å…¶å® mixins ä¹Ÿæ˜¯å­˜åœ¨ä¸€äº›é—®é¢˜çš„ï¼Œæ¯”å¦‚ï¼š</p><ul><li>éšå«äº†ä¸€äº›ä¾èµ–ï¼Œæ¯”å¦‚æˆ‘åœ¨ç»„ä»¶ä¸­å†™äº†æŸä¸ª <code>state</code> å¹¶ä¸”åœ¨ <code>mixin</code> ä¸­ä½¿ç”¨äº†ï¼Œå°±è¿™å­˜åœ¨äº†ä¸€ä¸ªä¾èµ–å…³ç³»ã€‚ä¸‡ä¸€ä¸‹æ¬¡åˆ«äººè¦ç§»é™¤å®ƒï¼Œå°±å¾—å» <code>mixin</code> ä¸­æŸ¥æ‰¾ä¾èµ–</li><li>å¤šä¸ª <code>mixin</code> ä¸­å¯èƒ½å­˜åœ¨ç›¸åŒå‘½åçš„å‡½æ•°ï¼ŒåŒæ—¶ä»£ç ç»„ä»¶ä¸­ä¹Ÿä¸èƒ½å‡ºç°ç›¸åŒå‘½åçš„å‡½æ•°ï¼Œå¦åˆ™å°±æ˜¯é‡å†™äº†ï¼Œå…¶å®æˆ‘ä¸€ç›´è§‰å¾—å‘½åçœŸçš„æ˜¯ä¸€ä»¶éº»çƒ¦äº‹ã€‚ã€‚</li><li>é›ªçƒæ•ˆåº”ï¼Œè™½ç„¶æˆ‘ä¸€ä¸ªç»„ä»¶è¿˜æ˜¯ä½¿ç”¨ç€åŒä¸€ä¸ª <code>mixin</code>ï¼Œä½†æ˜¯ä¸€ä¸ª <code>mixin</code> ä¼šè¢«å¤šä¸ªç»„ä»¶ä½¿ç”¨ï¼Œå¯èƒ½ä¼šå­˜åœ¨éœ€æ±‚ä½¿å¾— <code>mixin</code> ä¿®æ”¹åŸæœ¬çš„å‡½æ•°æˆ–è€…æ–°å¢æ›´å¤šçš„å‡½æ•°ï¼Œè¿™æ ·å¯èƒ½å°±ä¼šäº§ç”Ÿä¸€ä¸ªç»´æŠ¤æˆæœ¬</li></ul><p>HOC è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œå¹¶ä¸”å®ƒä»¬è¾¾æˆçš„æ•ˆæœä¹Ÿæ˜¯ä¸€è‡´çš„ï¼ŒåŒæ—¶ä¹Ÿæ›´åŠ çš„æ”¿æ²»æ­£ç¡®ï¼ˆæ¯•ç«Ÿæ›´åŠ å‡½æ•°å¼äº†ï¼‰ã€‚</p><h2 id="react-ä¸­çš„é«˜é˜¶ç»„ä»¶è¿ç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼" tabindex="-1">React ä¸­çš„é«˜é˜¶ç»„ä»¶è¿ç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼ï¼Ÿ <a class="header-anchor" href="#react-ä¸­çš„é«˜é˜¶ç»„ä»¶è¿ç”¨äº†ä»€ä¹ˆè®¾è®¡æ¨¡å¼" aria-hidden="true">#</a></h2><p>ä½¿ç”¨äº†è£…é¥°æ¨¡å¼ï¼Œé«˜é˜¶ç»„ä»¶çš„è¿ç”¨ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withWindowWidth</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">BaseComponent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DerivedClass</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">windowWidth</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerWidth</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">onResize</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">windowWidth</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">innerWidth</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">componentDidMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;resize&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">onResize</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">componentWillUnmount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removeEventListener</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;resize&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">onResize</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">BaseComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">DerivedClass</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MyComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;Window width is: </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">windowWidth</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withWindowWidth</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">MyComponent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> withWindowWidth(BaseComponent) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> DerivedClass </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">    state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      windowWidth</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.innerWidth</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">    onResize </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">        windowWidth</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.innerWidth</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">      });</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">    componentDidMount() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.addEventListener(</span><span style="color:#FFAB70;">&quot;resize&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.onResize);</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    componentWillUnmount() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.removeEventListener(</span><span style="color:#FFAB70;">&quot;resize&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.onResize);</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">BaseComponent</span><span style="color:#B392F0;"> {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props} {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.state} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> DerivedClass;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> MyComponent </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> (props) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;Window width is: {</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.windowWidth}&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> withWindowWidth(MyComponent);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>è£…é¥°æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯ä¸éœ€è¦æ”¹å˜ è¢«è£…é¥°å¯¹è±¡ æœ¬èº«ï¼Œè€Œåªæ˜¯åœ¨å¤–é¢å¥—ä¸€ä¸ªå¤–å£³æ¥å£ã€‚JavaScript ç›®å‰å·²ç»æœ‰äº†åŸç”Ÿè£…é¥°å™¨çš„ææ¡ˆï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E06C75;">testable</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyTestableClass</span><span style="color:#ABB2BF;"> {}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">@testable</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> MyTestableClass {}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="react-memo-ä½œç”¨åŠå®ç°" tabindex="-1">React.memo ä½œç”¨åŠå®ç° <a class="header-anchor" href="#react-memo-ä½œç”¨åŠå®ç°" aria-hidden="true">#</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#E06C75;">ä½œç”¨</span><span style="color:#ABB2BF;">ï¼š</span><span style="color:#E06C75;">ä¸ºå‡½æ•°ç»„ä»¶æä¾›ç±»ä¼¼PureComponentçš„åŠŸèƒ½</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">è°ƒç”¨æ–¹å¼</span></span>
<span class="line"><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">memo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Component</span><span style="color:#ABB2BF;">, [</span><span style="color:#E06C75;">isEqual</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#E06C75;">å…¶ä¸­isEqualæ–¹æ³•çš„è¿”å›å€¼ä¸shouldComponentUpdateè¿”å›å€¼ç›¸å</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 3ç§å®ç°æ–¹å¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å‡½æ•°å¼ç»„ä»¶</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">memo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Component</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">isEqual</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MemoComponent</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">prevProps</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">useRef</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">useEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">prevProps</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">props</span></span>
<span class="line"><span style="color:#ABB2BF;">    })</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">useMemo</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;, [</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">isEqual</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">prevProps</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ])</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">MemoComponent</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨PureComponent</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">memo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Component</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">isEqual</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MemoComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">PureComponent</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨shouldComponentUpdate</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">memo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Component</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">isEqual</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MemoComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">shouldComponentUpdate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">prevProps</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!</span><span style="color:#61AFEF;">isEqual</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">prevProps</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">ä½œç”¨ï¼šä¸ºå‡½æ•°ç»„ä»¶æä¾›ç±»ä¼¼PureComponentçš„åŠŸèƒ½ï¼Œè°ƒç”¨æ–¹å¼</span></span>
<span class="line"><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.memo(Component</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> [isEqual])</span></span>
<span class="line"><span style="color:#B392F0;">å…¶ä¸­isEqualæ–¹æ³•çš„è¿”å›å€¼ä¸shouldComponentUpdateè¿”å›å€¼ç›¸å</span></span>
<span class="line"><span style="color:#6B737C;">// 3ç§å®ç°æ–¹å¼</span></span>
<span class="line"><span style="color:#6B737C;">// å‡½æ•°å¼ç»„ä»¶</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> memo(Component</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> isEqual) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> MemoComponent(props) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">prevProps</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.useRef(props)</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.useEffect(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">prevProps</span><span style="color:#B392F0;">.current </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> props</span></span>
<span class="line"><span style="color:#B392F0;">    })</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.useMemo(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">Component</span><span style="color:#B392F0;"> {</span><span style="color:#F97583;">...</span><span style="color:#B392F0;">props} /&gt;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> [</span></span>
<span class="line"><span style="color:#B392F0;">      isEqual(</span><span style="color:#79B8FF;">prevProps</span><span style="color:#B392F0;">.current</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> props)</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    ])</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> MemoComponent</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨PureComponent</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> memo(Component</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> isEqual) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> MemoComponent </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.PureComponent {</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">Component</span><span style="color:#B392F0;"> {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props} /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨shouldComponentUpdate</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> memo(Component</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> isEqual) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> MemoComponent </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">    shouldComponentUpdate(prevProps) {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">!</span><span style="color:#B392F0;">isEqual(prevProps</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props)</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">Component</span><span style="color:#B392F0;"> {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props} /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="react-æœ‰å“ªäº›ä»£ç å¤ç”¨çš„æ–¹å¼-ä¸¾ä¸€äº›å®è·µçš„ä¾‹å­" tabindex="-1">React æœ‰å“ªäº›ä»£ç å¤ç”¨çš„æ–¹å¼ï¼Ÿä¸¾ä¸€äº›å®è·µçš„ä¾‹å­ï¼Ÿ <a class="header-anchor" href="#react-æœ‰å“ªäº›ä»£ç å¤ç”¨çš„æ–¹å¼-ä¸¾ä¸€äº›å®è·µçš„ä¾‹å­" aria-hidden="true">#</a></h2><p>é«˜é˜¶ç»„ä»¶ï¼ŒRenderPropsï¼ŒHooks ç­‰</p><p><a href="https://juejin.cn/post/6941546135827775525" target="_blank" rel="noreferrer">https://juejin.cn/post/6941546135827775525</a></p><h2 id="redux-è§£å†³äº†ä»€ä¹ˆé—®é¢˜-å®ç°åŸç†æ˜¯ä»€ä¹ˆ-ä¸­é—´ä»¶çš„åŸç†" tabindex="-1">Redux è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿå®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸­é—´ä»¶çš„åŸç†ï¼Ÿ <a class="header-anchor" href="#redux-è§£å†³äº†ä»€ä¹ˆé—®é¢˜-å®ç°åŸç†æ˜¯ä»€ä¹ˆ-ä¸­é—´ä»¶çš„åŸç†" aria-hidden="true">#</a></h2><p><a href="https://juejin.cn/post/6844903857135304718#heading-40" target="_blank" rel="noreferrer">https://juejin.cn/post/6844903857135304718#heading-40</a></p><h2 id="react-å—æ§ç»„ä»¶" tabindex="-1">react å—æ§ç»„ä»¶ <a class="header-anchor" href="#react-å—æ§ç»„ä»¶" aria-hidden="true">#</a></h2><p>åœ¨ Ant Design ä¸­ï¼Œå¯¹ Input è¾“å…¥æ¡†è¿›è¡Œæ“ä½œï¼Œå¦‚æœæ˜¯æ”¹å˜ defaultValue ä¼šå‘ç°æ¯«æ— ä½œç”¨ã€‚ è¿™æ˜¯å› ä¸º React çš„ form è¡¨å•ç»„ä»¶ä¸­çš„ defaultValue ä¸€ç»ä¼ é€’å€¼åï¼Œåç»­æ”¹å˜ defaultValue éƒ½å°†ä¸èµ·ä½œç”¨ï¼Œè¢«å¿½ç•¥äº†ã€‚ å…·ä½“æ¥è¯´è¿™æ˜¯ä¸€ç§ React éå—æ§ç»„ä»¶ï¼Œå…¶çŠ¶æ€æ˜¯åœ¨ input çš„ React å†…éƒ¨æ§åˆ¶ï¼Œä¸å—è°ƒç”¨è€…æ§åˆ¶ã€‚ æ‰€ä»¥å—æ§ç»„ä»¶å°±æ˜¯å¯ä»¥è¢« React çŠ¶æ€æ§åˆ¶çš„ç»„ä»¶ã€‚åŒå‘æ•°æ®ç»‘å®šå°±æ˜¯å—æ§ç»„ä»¶ï¼Œä½ å¯ä»¥ä¸º form ä¸­æŸä¸ªè¾“å…¥æ¡†æ·»åŠ  value å±æ€§ï¼Œç„¶åæ§åˆ¶å®ƒçš„ä¸€ä¸ªæ”¹å˜ã€‚è€Œéå—æ§ç»„ä»¶å°±æ˜¯æ²¡æœ‰æ·»åŠ  value å±æ€§çš„ç»„ä»¶ï¼Œä½ å¹¶ä¸èƒ½å¯¹å®ƒçš„å›ºå®šå€¼è¿›è¡Œæ“ä½œã€‚</p><h2 id="react-ç»„ä»¶åœ¨å¤šæ¬¡-render-ä¸­-hooks-çš„è°ƒç”¨é¡ºåºä¸ºä»€ä¹ˆè¦ä¿æŒä¸€è‡´" tabindex="-1">React ç»„ä»¶åœ¨å¤šæ¬¡ render ä¸­ï¼Œ hooks çš„è°ƒç”¨é¡ºåºä¸ºä»€ä¹ˆè¦ä¿æŒä¸€è‡´? <a class="header-anchor" href="#react-ç»„ä»¶åœ¨å¤šæ¬¡-render-ä¸­-hooks-çš„è°ƒç”¨é¡ºåºä¸ºä»€ä¹ˆè¦ä¿æŒä¸€è‡´" aria-hidden="true">#</a></h2><p>Hooks é€šè¿‡é“¾è¡¨å­˜å‚¨ï¼Œéœ€è¦é¡ºåºè®¿é—® <a href="https://juejin.cn/post/6944863057000529933" target="_blank" rel="noreferrer">https://juejin.cn/post/6944863057000529933</a></p><h2 id="è¯·æ¯”è¾ƒ-react-hooks-ä¸-react-class-component-æ€§èƒ½çš„åŒºåˆ«" tabindex="-1">è¯·æ¯”è¾ƒ React hooks ä¸ React class component æ€§èƒ½çš„åŒºåˆ« <a class="header-anchor" href="#è¯·æ¯”è¾ƒ-react-hooks-ä¸-react-class-component-æ€§èƒ½çš„åŒºåˆ«" aria-hidden="true">#</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Counter</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">setCount</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useState</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">useEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`You clicked </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> times`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }, </span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;You clicked </span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> times&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setCount</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        Click me</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Counter</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">componentDidMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`You clicked </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> times`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }, </span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">componentDidUpdate</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`You clicked </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> times`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }, </span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;You clicked </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> times&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;">        })</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          Click me</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D19A66;">1.</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">è¿ç»­ç‚¹å‡»</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Click</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">me</span><span style="color:#ABB2BF;"> 5</span><span style="color:#E06C75;">ä¸‹</span><span style="color:#ABB2BF;">ï¼Œ </span><span style="color:#E06C75;">fcå’Œclass</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">åˆ†åˆ«è¾“å‡ºå•¥</span><span style="color:#ABB2BF;">ï¼Ÿ </span><span style="color:#E06C75;">ä¸ºä»€ä¹ˆ</span><span style="color:#ABB2BF;">ï¼Ÿ</span></span>
<span class="line"><span style="color:#D19A66;">2.</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">å¦‚ä½•ä¿®æ”¹class</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">è®©å…¶è¾“å‡º</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">ï¼Ÿ</span></span>
<span class="line"><span style="color:#D19A66;">3.</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">å¦‚ä½•ä¿®æ”¹fcè®©å…¶è¾“å‡º</span><span style="color:#ABB2BF;"> 5</span><span style="color:#E06C75;">æ¬¡5</span><span style="color:#ABB2BF;">ï¼Ÿ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D19A66;">1.</span><span style="color:#ABB2BF;"> fc: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;"> class: </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;">æ¯æ¬¡çš„countå€¼</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#D19A66;">2.</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">componentDidUpdate</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`You clicked </span><span style="color:#C678DD;">${</span><span style="color:#E06C75;">count</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> times`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }, </span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#D19A66;">3.</span><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">latestCount</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useRef</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">useEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">latestCount</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">`You clicked </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">latestCount</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">current</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> times`</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }, </span><span style="color:#D19A66;">3000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> Counter() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">setCount</span><span style="color:#B392F0;">] </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useState(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">  useEffect(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">`You clicked </span><span style="color:#F97583;">${</span><span style="color:#B392F0;">count</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> times`</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">3000</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;"> </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;You clicked {count} times&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> setCount(count </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;">)}&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        Click me</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> Counter </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> Component {</span></span>
<span class="line"><span style="color:#B392F0;">  state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    count</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">  componentDidMount() {</span></span>
<span class="line"><span style="color:#B392F0;">    setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">`You clicked </span><span style="color:#F97583;">${</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> times`</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">3000</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">  componentDidUpdate() {</span></span>
<span class="line"><span style="color:#B392F0;">    setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">`You clicked </span><span style="color:#F97583;">${</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> times`</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">3000</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;You clicked {</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count} times&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">          count</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span></span>
<span class="line"><span style="color:#B392F0;">        })}&gt;</span></span>
<span class="line"><span style="color:#B392F0;">          Click me</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    )</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F8;">1.</span><span style="color:#B392F0;"> è¿ç»­ç‚¹å‡» Click me 5ä¸‹ï¼Œ fcå’Œclass component åˆ†åˆ«è¾“å‡ºå•¥ï¼Ÿ ä¸ºä»€ä¹ˆï¼Ÿ</span></span>
<span class="line"><span style="color:#F8F8F8;">2.</span><span style="color:#B392F0;"> å¦‚ä½•ä¿®æ”¹class è®©å…¶è¾“å‡º </span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;">ï¼Œ</span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;">ï¼Œ</span><span style="color:#F8F8F8;">3</span><span style="color:#B392F0;">ï¼Œ</span><span style="color:#F8F8F8;">4</span><span style="color:#B392F0;">ï¼Œ</span><span style="color:#F8F8F8;">5</span><span style="color:#B392F0;">ï¼Ÿ</span></span>
<span class="line"><span style="color:#F8F8F8;">3.</span><span style="color:#B392F0;"> å¦‚ä½•ä¿®æ”¹fcè®©å…¶è¾“å‡º 5æ¬¡5ï¼Ÿ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F8;">1.</span><span style="color:#B392F0;"> fc</span><span style="color:#BBBBBB;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">2</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">3</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">4</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">5</span><span style="color:#B392F0;"> class</span><span style="color:#BBBBBB;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">5</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">5</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">5</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">5</span><span style="color:#BBBBBB;">,</span><span style="color:#F8F8F8;">5</span><span style="color:#B392F0;">  (æ¯æ¬¡çš„countå€¼)</span></span>
<span class="line"><span style="color:#F8F8F8;">2.</span><span style="color:#B392F0;"> componentDidUpdate() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count;</span></span>
<span class="line"><span style="color:#B392F0;">    setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">`You clicked </span><span style="color:#F97583;">${</span><span style="color:#B392F0;">count</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> times`</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">3000</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#F8F8F8;">3.</span><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">latestCount</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useRef(count);</span></span>
<span class="line"><span style="color:#B392F0;">    useEffect(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">latestCount</span><span style="color:#B392F0;">.current </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> count;</span></span>
<span class="line"><span style="color:#B392F0;">      setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">`You clicked </span><span style="color:#F97583;">${</span><span style="color:#79B8FF;">latestCount</span><span style="color:#B392F0;">.current</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> times`</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">      }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">3000</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    });</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><h2 id="è¯·ä»‹ç»-react-diff-ç®—æ³•å’Œç­–ç•¥" tabindex="-1">è¯·ä»‹ç» react diff ç®—æ³•å’Œç­–ç•¥ <a class="header-anchor" href="#è¯·ä»‹ç»-react-diff-ç®—æ³•å’Œç­–ç•¥" aria-hidden="true">#</a></h2><p>react çš„ diff ç®—æ³•å’Œç­–ç•¥äº†è§£å¤šå°‘ï¼Œä¸ºä»€ä¹ˆ react çš„ diff æ€§èƒ½å¥½ï¼Œéµå¾ªä»€ä¹ˆæ ·çš„ç­–ç•¥å¯ä»¥æŠŠ O(n3) å¤æ‚åº¦çš„é—®é¢˜è½¬æ¢æˆ O(n) å¤æ‚åº¦çš„é—®é¢˜</p><p>React åˆ†åˆ«å¯¹ tree diffã€component diff ä»¥åŠ element diff åšäº†ç®—æ³•ä¼˜åŒ–ï¼Œ åšäº†ä¸€äº›å‡è®¾</p><ol><li>Web UI ä¸­ DOM èŠ‚ç‚¹è·¨å±‚çº§çš„ç§»åŠ¨æ“ä½œç‰¹åˆ«å°‘ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡</li><li>æ‹¥æœ‰ç›¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆç›¸ä¼¼çš„æ ‘å½¢ç»“æ„ï¼Œæ‹¥æœ‰ä¸åŒç±»çš„ä¸¤ä¸ªç»„ä»¶å°†ä¼šç”Ÿæˆä¸åŒçš„æ ‘å½¢ç»“æ„</li><li>å¯¹äºåŒä¸€å±‚çº§çš„ä¸€ç»„å­èŠ‚ç‚¹ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡å”¯ä¸€ id è¿›è¡ŒåŒºåˆ†</li></ol><p>tree diffï¼šReact å¯¹æ ‘çš„ç®—æ³•è¿›è¡Œäº†ç®€æ´æ˜äº†çš„ä¼˜åŒ–ï¼Œå³å¯¹æ ‘è¿›è¡Œåˆ†å±‚æ¯”è¾ƒï¼Œä¸¤æ£µæ ‘åªä¼šå¯¹åŒä¸€å±‚æ¬¡çš„èŠ‚ç‚¹è¿›è¡Œæ¯”è¾ƒ component diffï¼š</p><p>a.å¦‚æœæ˜¯åŒä¸€ç±»å‹çš„ç»„ä»¶ï¼ŒæŒ‰ç…§åŸç­–ç•¥ç»§ç»­æ¯”è¾ƒ virtual DOM treeã€‚</p><p>b.å¦‚æœä¸æ˜¯ï¼Œåˆ™å°†è¯¥ç»„ä»¶åˆ¤æ–­ä¸º dirty componentï¼Œä»è€Œæ›¿æ¢æ•´ä¸ªç»„ä»¶ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚</p><p>c.å¯¹äºåŒä¸€ç±»å‹çš„ç»„ä»¶ï¼Œæœ‰å¯èƒ½å…¶ Virtual DOM æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œå¦‚æœèƒ½å¤Ÿç¡®åˆ‡çš„çŸ¥é“è¿™ç‚¹é‚£å¯ä»¥èŠ‚çœå¤§é‡çš„ diff è¿ç®—æ—¶é—´ï¼Œå› æ­¤ React å…è®¸ç”¨æˆ·é€šè¿‡ shouldComponentUpdate() æ¥åˆ¤æ–­è¯¥ç»„ä»¶æ˜¯å¦éœ€è¦è¿›è¡Œ diff element diffï¼š å…è®¸å¼€å‘è€…å¯¹åŒä¸€å±‚çº§çš„åŒç»„å­èŠ‚ç‚¹ï¼Œæ·»åŠ å”¯ä¸€ key è¿›è¡ŒåŒºåˆ†ï¼Œå‡å°‘å¢åŠ å’Œåˆ é™¤ è¯¦è§ï¼š<a href="https://zhuanlan.zhihu.com/p/20346379" target="_blank" rel="noreferrer">https://zhuanlan.zhihu.com/p/20346379</a></p><p><strong>è¦æ±‚ï¼šä¸“é—¨çœ‹è¿‡ç›¸å…³çš„ä»‹ç»å¹¶å¯ä»¥å…¥æ‰‹åœ¨å‡å°‘èŠ‚ç‚¹ç§»åŠ¨å’Œå‡å°‘é‡å¤æ¸²æŸ“ä¸Šåšè¿‡åŠªåŠ›,å¯¹ diff ç®—æ³•æœ‰è¾ƒæ·±å…¥çš„ä»£ç å±‚é¢çš„äº†è§£ï¼Œå¯å¾— 3.5 åˆ†</strong></p><h2 id="ä½¿ç”¨è¿‡å“ªäº›-hooks-è§£å†³äº†ä»€ä¹ˆé—®é¢˜-å¦‚ä½•å®ç°è‡ªå®šä¹‰-hooks-hooks-çš„å®ç°åŸç†" tabindex="-1">ä½¿ç”¨è¿‡å“ªäº› Hooksï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•å®ç°è‡ªå®šä¹‰ Hooksï¼ŸHooks çš„å®ç°åŸç†ï¼Ÿ <a class="header-anchor" href="#ä½¿ç”¨è¿‡å“ªäº›-hooks-è§£å†³äº†ä»€ä¹ˆé—®é¢˜-å¦‚ä½•å®ç°è‡ªå®šä¹‰-hooks-hooks-çš„å®ç°åŸç†" aria-hidden="true">#</a></h2><p><a href="https://juejin.cn/post/6844903857135304718#heading-50" target="_blank" rel="noreferrer">https://juejin.cn/post/6844903857135304718#heading-50</a></p><h2 id="react-åŸç†é¢˜-å¤šæ¬¡è°ƒç”¨-setstate-ä¼šæ‰§è¡Œå‡ æ¬¡-æˆ‘è¯´åªä¼šæ›´æ–°ä¸€æ¬¡-å…¶ä¸­ä¼šæœ‰ä¸€ä¸ªå¼‚æ­¥æ›´æ–°å»é‡é˜Ÿåˆ—ã€‚-é¢è¯•å®˜åˆæèµ·å…´è¶£äº†" tabindex="-1">React åŸç†é¢˜ï¼š å¤šæ¬¡è°ƒç”¨ setState ä¼šæ‰§è¡Œå‡ æ¬¡ï¼Ÿæˆ‘è¯´åªä¼šæ›´æ–°ä¸€æ¬¡ï¼Œå…¶ä¸­ä¼šæœ‰ä¸€ä¸ªå¼‚æ­¥æ›´æ–°å»é‡é˜Ÿåˆ—ã€‚ï¼ˆé¢è¯•å®˜åˆæèµ·å…´è¶£äº†ï¼‰ <a class="header-anchor" href="#react-åŸç†é¢˜-å¤šæ¬¡è°ƒç”¨-setstate-ä¼šæ‰§è¡Œå‡ æ¬¡-æˆ‘è¯´åªä¼šæ›´æ–°ä¸€æ¬¡-å…¶ä¸­ä¼šæœ‰ä¸€ä¸ªå¼‚æ­¥æ›´æ–°å»é‡é˜Ÿåˆ—ã€‚-é¢è¯•å®˜åˆæèµ·å…´è¶£äº†" aria-hidden="true">#</a></h2><h2 id="react-é«˜é˜¶ç»„ä»¶ã€render-propsã€hooks-æœ‰ä»€ä¹ˆåŒºåˆ«-ä¸ºä»€ä¹ˆè¦ä¸æ–­è¿­ä»£" tabindex="-1">React é«˜é˜¶ç»„ä»¶ã€Render propsã€hooks æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¦ä¸æ–­è¿­ä»£ <a class="header-anchor" href="#react-é«˜é˜¶ç»„ä»¶ã€render-propsã€hooks-æœ‰ä»€ä¹ˆåŒºåˆ«-ä¸ºä»€ä¹ˆè¦ä¸æ–­è¿­ä»£" aria-hidden="true">#</a></h2><p>è¿™ä¸‰è€…æ˜¯ç›®å‰ react è§£å†³ä»£ç å¤ç”¨çš„ä¸»è¦æ–¹å¼ï¼š</p><ul><li>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚å…·ä½“è€Œè¨€ï¼Œé«˜é˜¶ç»„ä»¶æ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•°ã€‚</li><li>render props æ˜¯æŒ‡ä¸€ç§åœ¨ React ç»„ä»¶ä¹‹é—´ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop å…±äº«ä»£ç çš„ç®€å•æŠ€æœ¯ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œrender prop æ˜¯ä¸€ä¸ªç”¨äºå‘ŠçŸ¥ç»„ä»¶éœ€è¦æ¸²æŸ“ä»€ä¹ˆå†…å®¹çš„å‡½æ•° propã€‚</li><li>é€šå¸¸ï¼Œrender props å’Œé«˜é˜¶ç»„ä»¶åªæ¸²æŸ“ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚è®© Hook æ¥æœåŠ¡è¿™ä¸ªä½¿ç”¨åœºæ™¯æ›´åŠ ç®€å•ã€‚è¿™ä¸¤ç§æ¨¡å¼ä»æœ‰ç”¨æ­¦ä¹‹åœ°ï¼Œï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªè™šæ‹Ÿæ»šåŠ¨æ¡ç»„ä»¶æˆ–è®¸ä¼šæœ‰ä¸€ä¸ª renderltem å±æ€§ï¼Œæˆ–æ˜¯ä¸€ä¸ªå¯è§çš„å®¹å™¨ç»„ä»¶æˆ–è®¸ä¼šæœ‰å®ƒè‡ªå·±çš„ DOM ç»“æ„ï¼‰ã€‚ä½†åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼ŒHook è¶³å¤Ÿäº†ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¸®åŠ©å‡å°‘åµŒå¥—ã€‚</li></ul><p><strong>ï¼ˆ1ï¼‰HOC</strong> å®˜æ–¹è§£é‡Š âˆ¶</p><blockquote><p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚</p></blockquote><p>ç®€è¨€ä¹‹ï¼ŒHOC æ˜¯ä¸€ç§ç»„ä»¶çš„è®¾è®¡æ¨¡å¼ï¼ŒHOC æ¥å—ä¸€ä¸ªç»„ä»¶å’Œé¢å¤–çš„å‚æ•°ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚HOC æ˜¯çº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// hocçš„å®šä¹‰</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withSubscription</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">WrappedComponent</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">selectData</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">selectData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">DataSource</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      };</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">WrappedComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">data</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BlogPostWithSubscription</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withSubscription</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">BlogPost</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">DataSource</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DataSource</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getBlogPost</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// hocçš„å®šä¹‰</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> withSubscription(WrappedComponent</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> selectData) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">      super(props);</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        data</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> selectData(DataSource</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> props)</span></span>
<span class="line"><span style="color:#B392F0;">      };</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">WrappedComponent</span><span style="color:#B392F0;"> data</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.data} {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">BlogPostWithSubscription</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> withSubscription(BlogPost</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  (DataSource</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> props) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">DataSource</span><span style="color:#B392F0;">.getBlogPost(</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.id));</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>HOC çš„ä¼˜ç¼ºç‚¹ âˆ¶</p><ul><li>ä¼˜ç‚¹ âˆ¶ é€»è¾‘æœç”¨ã€ä¸å½±å“è¢«åŒ…è£¹ç»„ä»¶çš„å†…éƒ¨é€»è¾‘ã€‚</li><li>ç¼ºç‚¹ âˆ¶ hoc ä¼ é€’ç»™è¢«åŒ…è£¹ç»„ä»¶çš„ props å®¹æ˜“å’Œè¢«åŒ…è£¹åçš„ç»„ä»¶é‡åï¼Œè¿›è€Œè¢«è¦†ç›–</li></ul><p><strong>ï¼ˆ2ï¼‰Render props</strong> å®˜æ–¹è§£é‡Š âˆ¶</p><blockquote><p>&quot;render prop&quot;æ˜¯æŒ‡ä¸€ç§åœ¨ React ç»„ä»¶ä¹‹é—´ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„ prop å…±äº«ä»£ç çš„ç®€å•æŠ€æœ¯</p></blockquote><p>å…·æœ‰ render prop çš„ç»„ä»¶æ¥å—ä¸€ä¸ªè¿”å› React å…ƒç´ çš„å‡½æ•°ï¼Œå°† render çš„æ¸²æŸ“é€»è¾‘æ³¨å…¥åˆ°ç»„ä»¶å†…éƒ¨ã€‚åœ¨è¿™é‡Œï¼Œ&quot;render&quot;çš„å‘½åå¯ä»¥æ˜¯ä»»ä½•å…¶ä»–æœ‰æ•ˆçš„æ ‡è¯†ç¬¦ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// DataProviderç»„ä»¶å†…éƒ¨çš„æ¸²æŸ“é€»è¾‘å¦‚ä¸‹</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DataProvider</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Components</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Tom&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;å…±äº«æ•°æ®ç»„ä»¶è‡ªå·±å†…éƒ¨çš„æ¸²æŸ“é€»è¾‘&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// è°ƒç”¨æ–¹å¼</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">DataProvider</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">render</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// DataProviderç»„ä»¶å†…éƒ¨çš„æ¸²æŸ“é€»è¾‘å¦‚ä¸‹</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> DataProvider </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Components {</span></span>
<span class="line"><span style="color:#B392F0;">  state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;Tom&quot;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;å…±äº«æ•°æ®ç»„ä»¶è‡ªå·±å†…éƒ¨çš„æ¸²æŸ“é€»è¾‘&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        {</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.render(</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.state)}</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    );</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// è°ƒç”¨æ–¹å¼</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#79B8FF;">DataProvider</span><span style="color:#B392F0;"> render</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{(data) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello {</span><span style="color:#79B8FF;">data</span><span style="color:#B392F0;">.name}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;} /&gt;;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>ç”±æ­¤å¯ä»¥çœ‹åˆ°ï¼Œrender props çš„ä¼˜ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ âˆ¶</p><ul><li>ä¼˜ç‚¹ï¼šæ•°æ®å…±äº«ã€ä»£ç å¤ç”¨ï¼Œå°†ç»„ä»¶å†…çš„ state ä½œä¸º props ä¼ é€’ç»™è°ƒç”¨è€…ï¼Œå°†æ¸²æŸ“é€»è¾‘äº¤ç»™è°ƒç”¨è€…ã€‚</li><li>ç¼ºç‚¹ï¼šæ— æ³•åœ¨ return è¯­å¥å¤–è®¿é—®æ•°æ®ã€åµŒå¥—å†™æ³•ä¸å¤Ÿä¼˜é›…</li></ul><p><strong>ï¼ˆ3ï¼‰Hooks</strong> å®˜æ–¹è§£é‡Š âˆ¶</p><blockquote><p>Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚é€šè¿‡è‡ªå®šä¹‰ hookï¼Œå¯ä»¥å¤ç”¨ä»£ç é€»è¾‘ã€‚</p></blockquote><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// è‡ªå®šä¹‰ä¸€ä¸ªè·å–è®¢é˜…æ•°æ®çš„hook</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useSubscription</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DataSource</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getComments</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> [</span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">CommentList</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">subData</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useSubscription</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">CommentList</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">data</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// è‡ªå®šä¹‰ä¸€ä¸ªè·å–è®¢é˜…æ•°æ®çš„hook</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useSubscription() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">data</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">DataSource</span><span style="color:#B392F0;">.getComments();</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> [data];</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">//</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> CommentList(props) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> {</span><span style="color:#79B8FF;">data</span><span style="color:#B392F0;">} </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> props;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> [</span><span style="color:#79B8FF;">subData</span><span style="color:#B392F0;">] </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useSubscription();</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#79B8FF;">CommentList</span><span style="color:#B392F0;"> data</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&#39;hello&#39;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ä»¥ä¸Šå¯ä»¥çœ‹å‡ºï¼Œhook è§£å†³äº† hoc çš„ prop è¦†ç›–çš„é—®é¢˜ï¼ŒåŒæ—¶ä½¿ç”¨çš„æ–¹å¼è§£å†³äº† render props çš„åµŒå¥—åœ°ç‹±çš„é—®é¢˜ã€‚hook çš„ä¼˜ç‚¹å¦‚ä¸‹ âˆ¶</p><ul><li>ä½¿ç”¨ç›´è§‚ï¼›</li><li>è§£å†³ hoc çš„ prop é‡åé—®é¢˜ï¼›</li><li>è§£å†³ render props å› å…±äº«æ•°æ® è€Œå‡ºç°åµŒå¥—åœ°ç‹±çš„é—®é¢˜ï¼›</li><li>èƒ½åœ¨ return ä¹‹å¤–ä½¿ç”¨æ•°æ®çš„é—®é¢˜ã€‚</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šhook åªèƒ½åœ¨ç»„ä»¶é¡¶å±‚ä½¿ç”¨ï¼Œä¸å¯åœ¨åˆ†æ”¯è¯­å¥ä¸­ä½¿ç”¨ã€‚</p><p><strong>æ€»ç»“ âˆ¶</strong> Hocã€render props å’Œ hook éƒ½æ˜¯ä¸ºäº†è§£å†³ä»£ç å¤ç”¨çš„é—®é¢˜ï¼Œä½†æ˜¯ hoc å’Œ render props éƒ½æœ‰ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯å’Œæ˜æ˜¾çš„ç¼ºç‚¹ã€‚hook æ˜¯ react16.8 æ›´æ–°çš„æ–°çš„ APIï¼Œè®©ç»„ä»¶é€»è¾‘å¤ç”¨æ›´ç®€æ´æ˜äº†ï¼ŒåŒæ—¶ä¹Ÿè§£å†³äº† hoc å’Œ render props çš„ä¸€äº›ç¼ºç‚¹ã€‚</p><h2 id="react-component-å’Œ-react-purecomponent-çš„åŒºåˆ«" tabindex="-1">React.Component å’Œ React.PureComponent çš„åŒºåˆ« <a class="header-anchor" href="#react-component-å’Œ-react-purecomponent-çš„åŒºåˆ«" aria-hidden="true">#</a></h2><p>PureComponent è¡¨ç¤ºä¸€ä¸ªçº¯ç»„ä»¶ï¼Œå¯ä»¥ç”¨æ¥ä¼˜åŒ– React ç¨‹åºï¼Œå‡å°‘ render å‡½æ•°æ‰§è¡Œçš„æ¬¡æ•°ï¼Œä»è€Œæé«˜ç»„ä»¶çš„æ€§èƒ½ã€‚</p><p>åœ¨ React ä¸­ï¼Œå½“ prop æˆ–è€… state å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥é€šè¿‡åœ¨ shouldComponentUpdate ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ‰§è¡Œ return false æ¥é˜»æ­¢é¡µé¢çš„æ›´æ–°ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„ render æ‰§è¡Œã€‚React.PureComponent ä¼šè‡ªåŠ¨æ‰§è¡Œ shouldComponentUpdateã€‚</p><p>ä¸è¿‡ï¼ŒpureComponent ä¸­çš„ shouldComponentUpdate() è¿›è¡Œçš„æ˜¯<strong>æµ…æ¯”è¾ƒ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„æ•°æ®ï¼Œåªä¼šæ¯”è¾ƒä¸æ˜¯åŒä¸€ä¸ªåœ°å€ï¼Œè€Œä¸ä¼šæ¯”è¾ƒè¿™ä¸ªåœ°å€é‡Œé¢çš„æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚æµ…æ¯”è¾ƒä¼šå¿½ç•¥å±æ€§å’Œæˆ–çŠ¶æ€çªå˜æƒ…å†µï¼Œå…¶å®ä¹Ÿå°±æ˜¯æ•°æ®å¼•ç”¨æŒ‡é’ˆæ²¡æœ‰å˜åŒ–ï¼Œè€Œæ•°æ®å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ render æ˜¯ä¸ä¼šæ‰§è¡Œçš„ã€‚å¦‚æœéœ€è¦é‡æ–°æ¸²æŸ“é‚£ä¹ˆå°±éœ€è¦é‡æ–°å¼€è¾Ÿç©ºé—´å¼•ç”¨æ•°æ®ã€‚PureComponent ä¸€èˆ¬ä¼šç”¨åœ¨ä¸€äº›çº¯å±•ç¤ºç»„ä»¶ä¸Šã€‚</p><p>ä½¿ç”¨ pureComponent çš„<strong>å¥½å¤„</strong>ï¼šå½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œå¦‚æœç»„ä»¶çš„ props æˆ–è€… state éƒ½æ²¡æœ‰æ”¹å˜ï¼Œrender å‡½æ•°å°±ä¸ä¼šè§¦å‘ã€‚çœå»è™šæ‹Ÿ DOM çš„ç”Ÿæˆå’Œå¯¹æ¯”è¿‡ç¨‹ï¼Œè¾¾åˆ°æå‡æ€§èƒ½çš„ç›®çš„ã€‚è¿™æ˜¯å› ä¸º react è‡ªåŠ¨åšäº†ä¸€å±‚æµ…æ¯”è¾ƒã€‚</p><h2 id="component-element-instance-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»" tabindex="-1">Component, Element, Instance ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»ï¼Ÿ <a class="header-anchor" href="#component-element-instance-ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«å’Œè”ç³»" aria-hidden="true">#</a></h2><ul><li><strong>å…ƒç´ ï¼š</strong> ä¸€ä¸ªå…ƒç´ <code>element</code>æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡(plain object)ï¼Œæè¿°äº†å¯¹äºä¸€ä¸ª DOM èŠ‚ç‚¹æˆ–è€…å…¶ä»–ç»„ä»¶<code>component</code>ï¼Œä½ æƒ³è®©å®ƒåœ¨å±å¹•ä¸Šå‘ˆç°æˆä»€ä¹ˆæ ·å­ã€‚å…ƒç´ <code>element</code>å¯ä»¥åœ¨å®ƒçš„å±æ€§<code>props</code>ä¸­åŒ…å«å…¶ä»–å…ƒç´ (è¯‘æ³¨:ç”¨äºå½¢æˆå…ƒç´ æ ‘)ã€‚åˆ›å»ºä¸€ä¸ª React å…ƒç´ <code>element</code>æˆæœ¬å¾ˆä½ã€‚å…ƒç´ <code>element</code>åˆ›å»ºä¹‹åæ˜¯ä¸å¯å˜çš„ã€‚</li><li><strong>ç»„ä»¶ï¼š</strong> ä¸€ä¸ªç»„ä»¶<code>component</code>å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å£°æ˜ã€‚å¯ä»¥æ˜¯å¸¦æœ‰ä¸€ä¸ª<code>render()</code>æ–¹æ³•çš„ç±»ï¼Œç®€å•ç‚¹ä¹Ÿå¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå®ƒéƒ½æŠŠå±æ€§<code>props</code>ä½œä¸ºè¾“å…¥ï¼ŒæŠŠè¿”å›çš„ä¸€æ£µå…ƒç´ æ ‘ä½œä¸ºè¾“å‡ºã€‚</li><li><strong>å®ä¾‹ï¼š</strong> ä¸€ä¸ªå®ä¾‹<code>instance</code>æ˜¯ä½ åœ¨æ‰€å†™çš„ç»„ä»¶ç±»<code>component class</code>ä¸­ä½¿ç”¨å…³é”®å­—<code>this</code>æ‰€æŒ‡å‘çš„ä¸œè¥¿(è¯‘æ³¨:ç»„ä»¶å®ä¾‹)ã€‚å®ƒç”¨æ¥å­˜å‚¨æœ¬åœ°çŠ¶æ€å’Œå“åº”ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å¾ˆæœ‰ç”¨ã€‚</li></ul><p>å‡½æ•°å¼ç»„ä»¶(<code>Functional component</code>)æ ¹æœ¬æ²¡æœ‰å®ä¾‹<code>instance</code>ã€‚ç±»ç»„ä»¶(<code>Class component</code>)æœ‰å®ä¾‹<code>instance</code>ï¼Œä½†æ˜¯æ°¸è¿œä¹Ÿä¸éœ€è¦ç›´æ¥åˆ›å»ºä¸€ä¸ªç»„ä»¶çš„å®ä¾‹ï¼Œå› ä¸º React å¸®æˆ‘ä»¬åšäº†è¿™äº›ã€‚</p><h2 id="react-createclass-å’Œ-extends-component-çš„åŒºåˆ«æœ‰å“ªäº›" tabindex="-1">React.createClass å’Œ extends Component çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ <a class="header-anchor" href="#react-createclass-å’Œ-extends-component-çš„åŒºåˆ«æœ‰å“ªäº›" aria-hidden="true">#</a></h2><p>React.createClass å’Œ extends Component çš„ bai åŒºåˆ«ä¸»è¦åœ¨äºï¼š</p><p><strong>ï¼ˆ1ï¼‰è¯­æ³•åŒºåˆ«</strong></p><ul><li>createClass æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼Œextends çš„æ–¹å¼æ›´åŠ æ¥è¿‘æœ€æ–°çš„ ES6 è§„èŒƒçš„ class å†™æ³•ã€‚ä¸¤ç§æ–¹å¼åœ¨è¯­æ³•ä¸Šçš„å·®åˆ«ä¸»è¦ä½“ç°åœ¨æ–¹æ³•çš„å®šä¹‰å’Œé™æ€å±æ€§çš„å£°æ˜ä¸Šã€‚</li><li>createClass æ–¹å¼çš„æ–¹æ³•å®šä¹‰ä½¿ç”¨é€—å·ï¼Œéš”å¼€ï¼Œå› ä¸º creatClass æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ é€’ç»™å®ƒçš„æ˜¯ä¸€ä¸ª Objectï¼›è€Œ class çš„æ–¹å¼å®šä¹‰æ–¹æ³•æ—¶åŠ¡å¿…è°¨è®°ä¸è¦ä½¿ç”¨é€—å·éš”å¼€ï¼Œè¿™æ˜¯ ES6 class çš„è¯­æ³•è§„èŒƒã€‚</li></ul><p><strong>ï¼ˆ2ï¼‰propType å’Œ getDefaultProps</strong></p><ul><li>React.createClassï¼šé€šè¿‡ proTypes å¯¹è±¡å’Œ getDefaultProps()æ–¹æ³•æ¥è®¾ç½®å’Œè·å– props.</li><li>React.Componentï¼šé€šè¿‡è®¾ç½®ä¸¤ä¸ªå±æ€§ propTypes å’Œ defaultProps</li></ul><p><strong>ï¼ˆ3ï¼‰çŠ¶æ€çš„åŒºåˆ«</strong></p><ul><li>React.createClassï¼šé€šè¿‡ getInitialState()æ–¹æ³•è¿”å›ä¸€ä¸ªåŒ…å«åˆå§‹å€¼çš„å¯¹è±¡</li><li>React.Componentï¼šé€šè¿‡ constructor è®¾ç½®åˆå§‹çŠ¶æ€</li></ul><p><strong>ï¼ˆ4ï¼‰this åŒºåˆ«</strong></p><ul><li>React.createClassï¼šä¼šæ­£ç¡®ç»‘å®š this</li><li>React.Componentï¼šç”±äºä½¿ç”¨äº† ES6ï¼Œè¿™é‡Œä¼šæœ‰äº›å¾®ä¸åŒï¼Œå±æ€§å¹¶ä¸ä¼šè‡ªåŠ¨ç»‘å®šåˆ° React ç±»çš„å®ä¾‹ä¸Šã€‚</li></ul><p><strong>ï¼ˆ5ï¼‰Mixins</strong></p><ul><li>React.createClassï¼šä½¿ç”¨ React.createClass çš„è¯ï¼Œå¯ä»¥åœ¨åˆ›å»ºç»„ä»¶æ—¶æ·»åŠ ä¸€ä¸ªå«åš mixins çš„å±æ€§ï¼Œå¹¶å°†å¯ä¾›æ··åˆçš„ç±»çš„é›†åˆä»¥æ•°ç»„çš„å½¢å¼èµ‹ç»™ mixinsã€‚</li><li>å¦‚æœä½¿ç”¨ ES6 çš„æ–¹å¼æ¥åˆ›å»ºç»„ä»¶ï¼Œé‚£ä¹ˆ <code>React mixins</code> çš„ç‰¹æ€§å°†ä¸èƒ½è¢«ä½¿ç”¨äº†ã€‚</li></ul><h2 id="react-é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ-å’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«-é€‚ç”¨ä»€ä¹ˆåœºæ™¯" tabindex="-1">React é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆï¼Œå’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€‚ç”¨ä»€ä¹ˆåœºæ™¯ <a class="header-anchor" href="#react-é«˜é˜¶ç»„ä»¶æ˜¯ä»€ä¹ˆ-å’Œæ™®é€šç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«-é€‚ç”¨ä»€ä¹ˆåœºæ™¯" aria-hidden="true">#</a></h2><p>å®˜æ–¹è§£é‡Š âˆ¶</p><blockquote><p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚HOC è‡ªèº«ä¸æ˜¯ React API çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒæ˜¯ä¸€ç§åŸºäº React çš„ç»„åˆç‰¹æ€§è€Œå½¢æˆçš„è®¾è®¡æ¨¡å¼ã€‚</p></blockquote><p>é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œå®ƒåªæ˜¯ä¸€ç§ç»„ä»¶çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼æ˜¯ç”± react è‡ªèº«çš„ç»„åˆæ€§è´¨å¿…ç„¶äº§ç”Ÿçš„ã€‚æˆ‘ä»¬å°†å®ƒä»¬ç§°ä¸ºçº¯ç»„ä»¶ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æ¥å—ä»»ä½•åŠ¨æ€æä¾›çš„å­ç»„ä»¶ï¼Œä½†å®ƒä»¬ä¸ä¼šä¿®æ”¹æˆ–å¤åˆ¶å…¶è¾“å…¥ç»„ä»¶ä¸­çš„ä»»ä½•è¡Œä¸ºã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// hocçš„å®šä¹‰</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withSubscription</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">WrappedComponent</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">selectData</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">selectData</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">DataSource</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">      };</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">WrappedComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">data</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BlogPostWithSubscription</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withSubscription</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">BlogPost</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">DataSource</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DataSource</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getBlogPost</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// hocçš„å®šä¹‰</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> withSubscription(WrappedComponent</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> selectData) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">      super(props);</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        data</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> selectData(DataSource</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> props)</span></span>
<span class="line"><span style="color:#B392F0;">      };</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// ä¸€äº›é€šç”¨çš„é€»è¾‘å¤„ç†</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">WrappedComponent</span><span style="color:#B392F0;"> data</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.data} {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">BlogPostWithSubscription</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> withSubscription(BlogPost</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  (DataSource</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> props) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">DataSource</span><span style="color:#B392F0;">.getBlogPost(</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.id));</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>1ï¼‰HOC çš„ä¼˜ç¼ºç‚¹</strong></p><ul><li>ä¼˜ç‚¹ âˆ¶ é€»è¾‘æœç”¨ã€ä¸å½±å“è¢«åŒ…è£¹ç»„ä»¶çš„å†…éƒ¨é€»è¾‘ã€‚</li><li>ç¼ºç‚¹ âˆ¶hoc ä¼ é€’ç»™è¢«åŒ…è£¹ç»„ä»¶çš„ props å®¹æ˜“å’Œè¢«åŒ…è£¹åçš„ç»„ä»¶é‡åï¼Œè¿›è€Œè¢«è¦†ç›–</li></ul><p><strong>2ï¼‰é€‚ç”¨åœºæ™¯</strong></p><ul><li>ä»£ç å¤ç”¨ï¼Œé€»è¾‘æŠ½è±¡</li><li>æ¸²æŸ“åŠ«æŒ</li><li>State æŠ½è±¡å’Œæ›´æ”¹</li><li>Props æ›´æ”¹</li></ul><p><strong>3ï¼‰å…·ä½“åº”ç”¨ä¾‹å­</strong></p><ul><li><strong>æƒé™æ§åˆ¶ï¼š</strong> åˆ©ç”¨é«˜é˜¶ç»„ä»¶çš„ <strong>æ¡ä»¶æ¸²æŸ“</strong> ç‰¹æ€§å¯ä»¥å¯¹é¡µé¢è¿›è¡Œæƒé™æ§åˆ¶ï¼Œæƒé™æ§åˆ¶ä¸€èˆ¬åˆ†ä¸ºä¸¤ä¸ªç»´åº¦ï¼šé¡µé¢çº§åˆ«å’Œ é¡µé¢å…ƒç´ çº§åˆ«</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// HOC.js</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withAdminAuth</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">WrappedComponent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">isAdmin</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">UNSAFE_componentWillMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">currentRole</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getCurrentUserRole</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">isAdmin</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">currentRole</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;Admin&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            });</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isAdmin</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">WrappedComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">            } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹è¯¥é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// pages/page-a.js</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PageA</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// something here...</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">UNSAFE_componentWillMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// fetching data</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// render page with data</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withAdminAuth</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">PageA</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// pages/page-b.js</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PageB</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// something here...</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">UNSAFE_componentWillMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// fetching data</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// render page with data</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withAdminAuth</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">PageB</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// HOC.js</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> withAdminAuth(WrappedComponent) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">        state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            isAdmin</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> UNSAFE_componentWillMount() {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">currentRole</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> getCurrentUserRole();</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">                isAdmin</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> currentRole </span><span style="color:#F97583;">===</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;Admin&#39;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            });</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        render() {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.isAdmin) {</span></span>
<span class="line"><span style="color:#B392F0;">                </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">WrappedComponent</span><span style="color:#B392F0;"> {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">            } </span><span style="color:#F97583;">else</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">                </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (&lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹è¯¥é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;);</span></span>
<span class="line"><span style="color:#B392F0;">            }</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// pages/page-a.js</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> PageA </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">        super(props);</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// something here...</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    UNSAFE_componentWillMount() {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// fetching data</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#6B737C;">// render page with data</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> withAdminAuth(PageA);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// pages/page-b.js</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> PageB </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">        super(props);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// something here...</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">    UNSAFE_componentWillMount() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// fetching data</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// render page with data</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> withAdminAuth(PageB);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><ul><li><strong>ç»„ä»¶æ¸²æŸ“æ€§èƒ½è¿½è¸ªï¼š</strong> å€ŸåŠ©çˆ¶ç»„ä»¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸè§„åˆ™æ•è·å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥æ–¹ä¾¿çš„å¯¹æŸä¸ªç»„ä»¶çš„æ¸²æŸ“æ—¶é—´è¿›è¡Œè®°å½• âˆ¶</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Home</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello World.&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withTiming</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">WrappedComponent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">WrappedComponent</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">start</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">end</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">UNSAFE_componentWillMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">componentWillMount</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">componentWillMount</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">start</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">componentDidMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">componentDidMount</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">componentDidMount</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">end</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Date</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">WrappedComponent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> ç»„ä»¶æ¸²æŸ“æ—¶é—´ä¸º </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">end</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">start</span><span style="color:#C678DD;">}</span><span style="color:#98C379;"> ms`</span></span>
<span class="line"><span style="color:#ABB2BF;">      );</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withTiming</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">Home</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> Home </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello World.&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> withTiming(WrappedComponent) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> WrappedComponent {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">      super(props);</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.start </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.end </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    UNSAFE_componentWillMount() {</span></span>
<span class="line"><span style="color:#B392F0;">      super.componentWillMount </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#B392F0;"> super.componentWillMount();</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.start </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Date</span><span style="color:#B392F0;">.now();</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    componentDidMount() {</span></span>
<span class="line"><span style="color:#B392F0;">      super.componentDidMount </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#B392F0;"> super.componentDidMount();</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.end </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Date</span><span style="color:#B392F0;">.now();</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#FFAB70;">`</span><span style="color:#F97583;">${</span><span style="color:#79B8FF;">WrappedComponent</span><span style="color:#B392F0;">.name</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> ç»„ä»¶æ¸²æŸ“æ—¶é—´ä¸º </span><span style="color:#F97583;">${</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.end </span><span style="color:#F97583;">-</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.start</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;"> ms`</span></span>
<span class="line"><span style="color:#B392F0;">      );</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    render() {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> super.render();</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> withTiming(Home);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>æ³¨æ„ï¼šwithTiming æ˜¯åˆ©ç”¨ åå‘ç»§æ‰¿ å®ç°çš„ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ŒåŠŸèƒ½æ˜¯è®¡ç®—è¢«åŒ…è£¹ç»„ä»¶ï¼ˆè¿™é‡Œæ˜¯ Home ç»„ä»¶ï¼‰çš„æ¸²æŸ“æ—¶é—´ã€‚</p><ul><li><strong>é¡µé¢å¤ç”¨</strong></li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withFetching</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">fetching</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">WrappedComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">: [],</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">UNSAFE_componentWillMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">fetching</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            });</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">WrappedComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">data</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">data</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// pages/page-a.js</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withFetching</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">fetching</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;science-fiction&#39;</span><span style="color:#ABB2BF;">))(</span><span style="color:#E06C75;">MovieList</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// pages/page-b.js</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withFetching</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">fetching</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;action&#39;</span><span style="color:#ABB2BF;">))(</span><span style="color:#E06C75;">MovieList</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// pages/page-other.js</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">withFetching</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">fetching</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;some-other-type&#39;</span><span style="color:#ABB2BF;">))(</span><span style="color:#E06C75;">MovieList</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> withFetching </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> fetching </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> WrappedComponent </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">        state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            data</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> []</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> UNSAFE_componentWillMount() {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">data</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> fetching();</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">                data</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            });</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">        render() {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">WrappedComponent</span><span style="color:#B392F0;"> data</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.data} {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">        }</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// pages/page-a.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> withFetching(fetching(</span><span style="color:#FFAB70;">&#39;science-fiction&#39;</span><span style="color:#B392F0;">))(MovieList);</span></span>
<span class="line"><span style="color:#6B737C;">// pages/page-b.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> withFetching(fetching(</span><span style="color:#FFAB70;">&#39;action&#39;</span><span style="color:#B392F0;">))(MovieList);</span></span>
<span class="line"><span style="color:#6B737C;">// pages/page-other.js</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> withFetching(fetching(</span><span style="color:#FFAB70;">&#39;some-other-type&#39;</span><span style="color:#B392F0;">))(MovieList);</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="å“ªäº›æ–¹æ³•ä¼šè§¦å‘-react-é‡æ–°æ¸²æŸ“-é‡æ–°æ¸²æŸ“-render-ä¼šåšäº›ä»€ä¹ˆ" tabindex="-1">å“ªäº›æ–¹æ³•ä¼šè§¦å‘ React é‡æ–°æ¸²æŸ“ï¼Ÿé‡æ–°æ¸²æŸ“ render ä¼šåšäº›ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#å“ªäº›æ–¹æ³•ä¼šè§¦å‘-react-é‡æ–°æ¸²æŸ“-é‡æ–°æ¸²æŸ“-render-ä¼šåšäº›ä»€ä¹ˆ" aria-hidden="true">#</a></h2><p><strong>ï¼ˆ1ï¼‰å“ªäº›æ–¹æ³•ä¼šè§¦å‘ react é‡æ–°æ¸²æŸ“?</strong></p><ul><li><strong>setStateï¼ˆï¼‰æ–¹æ³•è¢«è°ƒç”¨</strong></li></ul><p>setState æ˜¯ React ä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ‰§è¡Œ setState ä¼šè§¦å‘ renderã€‚ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªç‚¹å€¼å¾—å…³æ³¨ï¼Œæ‰§è¡Œ setState çš„æ—¶å€™ä¸ä¸€å®šä¼šé‡æ–°æ¸²æŸ“ã€‚å½“ setState ä¼ å…¥ null æ—¶ï¼Œå¹¶ä¸ä¼šè§¦å‘ renderã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">App</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;render&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">React.Fragement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">button</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> }); </span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œå¹¶æ²¡æœ‰æ”¹å˜ a çš„å€¼</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">        &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          Click me</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;setState null&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">Child</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E5C07B;">React.Fragement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> App </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">  state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    a</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;render&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">React.Fragement</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a}&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">button</span></span>
<span class="line"><span style="color:#B392F0;">          onClick</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({ a</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;"> }); </span><span style="color:#6B737C;">// è¿™é‡Œå¹¶æ²¡æœ‰æ”¹å˜ a çš„å€¼</span></span>
<span class="line"><span style="color:#B392F0;">          }}</span></span>
<span class="line"><span style="color:#B392F0;">        &gt;</span></span>
<span class="line"><span style="color:#B392F0;">          Click me</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState(</span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">)}&gt;setState null&lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#79B8FF;">Child</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;/</span><span style="color:#79B8FF;">React.Fragement</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    );</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li><strong>çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“</strong></li></ul><p>åªè¦çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼Œå³ä½¿ä¼ å…¥å­ç»„ä»¶çš„ props æœªå‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆå­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼Œè¿›è€Œè§¦å‘ render</p><p><strong>ï¼ˆ2ï¼‰é‡æ–°æ¸²æŸ“ render ä¼šåšäº›ä»€ä¹ˆ?</strong></p><ul><li>ä¼šå¯¹æ–°æ—§ VNode è¿›è¡Œå¯¹æ¯”ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ Diff ç®—æ³•ã€‚</li><li>å¯¹æ–°æ—§ä¸¤æ£µæ ‘è¿›è¡Œä¸€ä¸ªæ·±åº¦ä¼˜å…ˆéå†ï¼Œè¿™æ ·æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¼šä¸€ä¸ªæ ‡è®°ï¼Œåœ¨åˆ°æ·±åº¦éå†çš„æ—¶å€™ï¼Œæ¯éå†åˆ°ä¸€å’Œä¸ªèŠ‚ç‚¹ï¼Œå°±æŠŠè¯¥èŠ‚ç‚¹å’Œæ–°çš„èŠ‚ç‚¹æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæœ‰å·®å¼‚å°±æ”¾åˆ°ä¸€ä¸ªå¯¹è±¡é‡Œé¢</li><li>éå†å·®å¼‚å¯¹è±¡ï¼Œæ ¹æ®å·®å¼‚çš„ç±»å‹ï¼Œæ ¹æ®å¯¹åº”å¯¹è§„åˆ™æ›´æ–° VNode</li></ul><p>React çš„å¤„ç† render çš„åŸºæœ¬æ€ç»´æ¨¡å¼æ˜¯æ¯æ¬¡ä¸€æœ‰å˜åŠ¨å°±ä¼šå»é‡æ–°æ¸²æŸ“æ•´ä¸ªåº”ç”¨ã€‚åœ¨ Virtual DOM æ²¡æœ‰å‡ºç°ä¹‹å‰ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯ç›´æ¥è°ƒç”¨ innerHTMLã€‚Virtual DOM å‰å®³çš„åœ°æ–¹å¹¶ä¸æ˜¯è¯´å®ƒæ¯”ç›´æ¥æ“ä½œ DOM å¿«ï¼Œè€Œæ˜¯è¯´ä¸ç®¡æ•°æ®æ€ä¹ˆå˜ï¼Œéƒ½ä¼šå°½é‡ä»¥æœ€å°çš„ä»£ä»·å»æ›´æ–° DOMã€‚React å°† render å‡½æ•°è¿”å›çš„è™šæ‹Ÿ DOM æ ‘ä¸è€çš„è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œç¡®å®š DOM è¦ä¸è¦æ›´æ–°ã€æ€ä¹ˆæ›´æ–°ã€‚å½“ DOM æ ‘å¾ˆå¤§æ—¶ï¼Œéå†ä¸¤æ£µæ ‘è¿›è¡Œå„ç§æ¯”å¯¹è¿˜æ˜¯ç›¸å½“è€—æ€§èƒ½çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨é¡¶å±‚ setState ä¸€ä¸ªå¾®å°çš„ä¿®æ”¹ï¼Œé»˜è®¤ä¼šå»éå†æ•´æ£µæ ‘ã€‚å°½ç®¡ React ä½¿ç”¨é«˜åº¦ä¼˜åŒ–çš„ Diff ç®—æ³•ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹ä»ç„¶ä¼šæŸè€—æ€§èƒ½.</p><h2 id="react-å£°æ˜ç»„ä»¶æœ‰å“ªå‡ ç§æ–¹æ³•-æœ‰ä»€ä¹ˆä¸åŒ" tabindex="-1">React å£°æ˜ç»„ä»¶æœ‰å“ªå‡ ç§æ–¹æ³•ï¼Œæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ <a class="header-anchor" href="#react-å£°æ˜ç»„ä»¶æœ‰å“ªå‡ ç§æ–¹æ³•-æœ‰ä»€ä¹ˆä¸åŒ" aria-hidden="true">#</a></h2><p>React å£°æ˜ç»„ä»¶çš„ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>å‡½æ•°å¼å®šä¹‰çš„<code>æ— çŠ¶æ€ç»„ä»¶</code></li><li>ES5 åŸç”Ÿæ–¹å¼<code>React.createClass</code>å®šä¹‰çš„ç»„ä»¶</li><li>ES6 å½¢å¼çš„<code>extends React.Component</code>å®šä¹‰çš„ç»„ä»¶</li></ul><p><strong>ï¼ˆ1ï¼‰æ— çŠ¶æ€å‡½æ•°å¼ç»„ä»¶</strong> å®ƒæ˜¯ä¸ºäº†åˆ›å»ºçº¯å±•ç¤ºç»„ä»¶ï¼Œè¿™ç§ç»„ä»¶åªè´Ÿè´£æ ¹æ®ä¼ å…¥çš„ props æ¥å±•ç¤ºï¼Œä¸æ¶‰åŠåˆ° state çŠ¶æ€çš„æ“ä½œ ç»„ä»¶ä¸ä¼šè¢«å®ä¾‹åŒ–ï¼Œæ•´ä½“æ¸²æŸ“æ€§èƒ½å¾—åˆ°æå‡ï¼Œä¸èƒ½è®¿é—® this å¯¹è±¡ï¼Œä¸èƒ½è®¿é—®ç”Ÿå‘½å‘¨æœŸçš„æ–¹æ³•</p><p><strong>ï¼ˆ2ï¼‰ES5 åŸç”Ÿæ–¹å¼ React.createClass // RFC</strong> React.createClass ä¼šè‡ªç»‘å®šå‡½æ•°æ–¹æ³•ï¼Œå¯¼è‡´ä¸å¿…è¦çš„æ€§èƒ½å¼€é”€ï¼Œå¢åŠ ä»£ç è¿‡æ—¶çš„å¯èƒ½æ€§ã€‚</p><p><strong>ï¼ˆ3ï¼‰E6 ç»§æ‰¿å½¢å¼ React.Component // RCC</strong> ç›®å‰æä¸ºæ¨èçš„åˆ›å»ºæœ‰çŠ¶æ€ç»„ä»¶çš„æ–¹å¼ï¼Œæœ€ç»ˆä¼šå–ä»£ React.createClass å½¢å¼ï¼›ç›¸å¯¹äº React.createClass å¯ä»¥æ›´å¥½å®ç°ä»£ç å¤ç”¨ã€‚</p><p><strong>æ— çŠ¶æ€ç»„ä»¶ç›¸å¯¹äºäºåè€…çš„åŒºåˆ«ï¼š</strong> ä¸æ— çŠ¶æ€ç»„ä»¶ç›¸æ¯”ï¼ŒReact.createClass å’Œ React.Component éƒ½æ˜¯åˆ›å»ºæœ‰çŠ¶æ€çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶æ˜¯è¦è¢«å®ä¾‹åŒ–çš„ï¼Œå¹¶ä¸”å¯ä»¥è®¿é—®ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚</p><p><strong>React.createClass ä¸ React.Component åŒºåˆ«ï¼š</strong></p><p><strong>â‘  å‡½æ•° this è‡ªç»‘å®š</strong></p><ul><li>React.createClass åˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶æ¯ä¸€ä¸ªæˆå‘˜å‡½æ•°çš„ this éƒ½æœ‰ React è‡ªåŠ¨ç»‘å®šï¼Œå‡½æ•°ä¸­çš„ this ä¼šè¢«æ­£ç¡®è®¾ç½®ã€‚</li><li>React.Component åˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶æˆå‘˜å‡½æ•°ä¸ä¼šè‡ªåŠ¨ç»‘å®š thisï¼Œéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç»‘å®šï¼Œå¦åˆ™ this ä¸èƒ½è·å–å½“å‰ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</li></ul><p><strong>â‘¡ ç»„ä»¶å±æ€§ç±»å‹ propTypes åŠå…¶é»˜è®¤ props å±æ€§ defaultProps é…ç½®ä¸åŒ</strong></p><ul><li>React.createClass åœ¨åˆ›å»ºç»„ä»¶æ—¶ï¼Œæœ‰å…³ç»„ä»¶ props çš„å±æ€§ç±»å‹åŠç»„ä»¶é»˜è®¤çš„å±æ€§ä¼šä½œä¸ºç»„ä»¶å®ä¾‹çš„å±æ€§æ¥é…ç½®ï¼Œå…¶ä¸­ defaultProps æ˜¯ä½¿ç”¨ getDefaultProps çš„æ–¹æ³•æ¥è·å–é»˜è®¤ç»„ä»¶å±æ€§çš„</li><li>React.Component åœ¨åˆ›å»ºç»„ä»¶æ—¶é…ç½®è¿™ä¸¤ä¸ªå¯¹åº”ä¿¡æ¯æ—¶ï¼Œä»–ä»¬æ˜¯ä½œä¸ºç»„ä»¶ç±»çš„å±æ€§ï¼Œä¸æ˜¯ç»„ä»¶å®ä¾‹çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ç±»çš„é™æ€å±æ€§æ¥é…ç½®çš„ã€‚</li></ul><p><strong>â‘¢ ç»„ä»¶åˆå§‹çŠ¶æ€ state çš„é…ç½®ä¸åŒ</strong></p><ul><li>React.createClass åˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶çŠ¶æ€ state æ˜¯é€šè¿‡ getInitialState æ–¹æ³•æ¥é…ç½®ç»„ä»¶ç›¸å…³çš„çŠ¶æ€ï¼›</li><li>React.Component åˆ›å»ºçš„ç»„ä»¶ï¼Œå…¶çŠ¶æ€ state æ˜¯åœ¨ constructor ä¸­åƒåˆå§‹åŒ–ç»„ä»¶å±æ€§ä¸€æ ·å£°æ˜çš„ã€‚</li></ul><h2 id="å¯¹æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„ç†è§£åŠä½¿ç”¨åœºæ™¯" tabindex="-1">å¯¹æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„ç†è§£åŠä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#å¯¹æœ‰çŠ¶æ€ç»„ä»¶å’Œæ— çŠ¶æ€ç»„ä»¶çš„ç†è§£åŠä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a></h2><p><strong>ï¼ˆ1ï¼‰æœ‰çŠ¶æ€ç»„ä»¶</strong></p><p><strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>æ˜¯ç±»ç»„ä»¶</li><li>æœ‰ç»§æ‰¿</li><li>å¯ä»¥ä½¿ç”¨ this</li><li>å¯ä»¥ä½¿ç”¨ react çš„ç”Ÿå‘½å‘¨æœŸ</li><li>ä½¿ç”¨è¾ƒå¤šï¼Œå®¹æ˜“é¢‘ç¹è§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œå½±å“æ€§èƒ½</li><li>å†…éƒ¨ä½¿ç”¨ stateï¼Œç»´æŠ¤è‡ªèº«çŠ¶æ€çš„å˜åŒ–ï¼Œæœ‰çŠ¶æ€ç»„ä»¶æ ¹æ®å¤–éƒ¨ç»„ä»¶ä¼ å…¥çš„ props å’Œè‡ªèº«çš„ state è¿›è¡Œæ¸²æŸ“ã€‚</li></ul><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ul><li>éœ€è¦ä½¿ç”¨åˆ°çŠ¶æ€çš„ã€‚</li><li>éœ€è¦ä½¿ç”¨çŠ¶æ€æ“ä½œç»„ä»¶çš„ï¼ˆæ— çŠ¶æ€ç»„ä»¶çš„ä¹Ÿå¯ä»¥å®ç°æ–°ç‰ˆæœ¬ react hooks ä¹Ÿå¯å®ç°ï¼‰</li></ul><p><strong>æ€»ç»“ï¼š</strong> ç±»ç»„ä»¶å¯ä»¥ç»´æŠ¤è‡ªèº«çš„çŠ¶æ€å˜é‡ï¼Œå³ç»„ä»¶çš„ state ï¼Œç±»ç»„ä»¶è¿˜æœ‰ä¸åŒçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¯ä»¥è®©å¼€å‘è€…èƒ½å¤Ÿåœ¨ç»„ä»¶çš„ä¸åŒé˜¶æ®µï¼ˆæŒ‚è½½ã€æ›´æ–°ã€å¸è½½ï¼‰ï¼Œå¯¹ç»„ä»¶åšæ›´å¤šçš„æ§åˆ¶ã€‚ç±»ç»„ä»¶åˆ™æ—¢å¯ä»¥å……å½“æ— çŠ¶æ€ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥å……å½“æœ‰çŠ¶æ€ç»„ä»¶ã€‚å½“ä¸€ä¸ªç±»ç»„ä»¶ä¸éœ€è¦ç®¡ç†è‡ªèº«çŠ¶æ€æ—¶ï¼Œä¹Ÿå¯ç§°ä¸ºæ— çŠ¶æ€ç»„ä»¶ã€‚</p><p><strong>ï¼ˆ2ï¼‰æ— çŠ¶æ€ç»„ä»¶</strong> <strong>ç‰¹ç‚¹ï¼š</strong></p><ul><li>ä¸ä¾èµ–è‡ªèº«çš„çŠ¶æ€ state</li><li>å¯ä»¥æ˜¯ç±»ç»„ä»¶æˆ–è€…å‡½æ•°ç»„ä»¶ã€‚</li><li>å¯ä»¥å®Œå…¨é¿å…ä½¿ç”¨ this å…³é”®å­—ã€‚ï¼ˆç”±äºä½¿ç”¨çš„æ˜¯ç®­å¤´å‡½æ•°äº‹ä»¶æ— éœ€ç»‘å®šï¼‰</li><li>æœ‰æ›´é«˜çš„æ€§èƒ½ã€‚å½“ä¸éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­æ—¶ï¼Œåº”è¯¥é¦–å…ˆä½¿ç”¨æ— çŠ¶æ€å‡½æ•°ç»„ä»¶</li><li>ç»„ä»¶å†…éƒ¨ä¸ç»´æŠ¤ state ï¼Œåªæ ¹æ®å¤–éƒ¨ç»„ä»¶ä¼ å…¥çš„ props è¿›è¡Œæ¸²æŸ“çš„ç»„ä»¶ï¼Œå½“ props æ”¹å˜æ—¶ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</li></ul><p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p><ul><li>ç»„ä»¶ä¸éœ€è¦ç®¡ç† stateï¼Œçº¯å±•ç¤º</li></ul><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>ç®€åŒ–ä»£ç ã€ä¸“æ³¨äº render</li><li>ç»„ä»¶ä¸éœ€è¦è¢«å®ä¾‹åŒ–ï¼Œæ— ç”Ÿå‘½å‘¨æœŸï¼Œæå‡æ€§èƒ½ã€‚ è¾“å‡ºï¼ˆæ¸²æŸ“ï¼‰åªå–å†³äºè¾“å…¥ï¼ˆå±æ€§ï¼‰ï¼Œæ— å‰¯ä½œç”¨</li><li>è§†å›¾å’Œæ•°æ®çš„è§£è€¦åˆ†ç¦»</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>æ— æ³•ä½¿ç”¨ ref</li><li>æ— ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</li><li>æ— æ³•æ§åˆ¶ç»„ä»¶çš„é‡æ¸²æŸ“ï¼Œå› ä¸ºæ— æ³•ä½¿ç”¨ shouldComponentUpdate æ–¹æ³•ï¼Œå½“ç»„ä»¶æ¥å—åˆ°æ–°çš„å±æ€§æ—¶åˆ™ä¼šé‡æ¸²æŸ“</li></ul><p><strong>æ€»ç»“ï¼š</strong> ç»„ä»¶å†…éƒ¨çŠ¶æ€ä¸”ä¸å¤–éƒ¨æ— å…³çš„ç»„ä»¶ï¼Œå¯ä»¥è€ƒè™‘ç”¨çŠ¶æ€ç»„ä»¶ï¼Œè¿™æ ·çŠ¶æ€æ ‘å°±ä¸ä¼šè¿‡äºå¤æ‚ï¼Œæ˜“äºç†è§£å’Œç®¡ç†ã€‚å½“ä¸€ä¸ªç»„ä»¶ä¸éœ€è¦ç®¡ç†è‡ªèº«çŠ¶æ€æ—¶ï¼Œä¹Ÿå°±æ˜¯æ— çŠ¶æ€ç»„ä»¶ï¼Œåº”è¯¥ä¼˜å…ˆè®¾è®¡ä¸ºå‡½æ•°ç»„ä»¶ã€‚æ¯”å¦‚è‡ªå®šä¹‰çš„ <code>&lt;Button/&gt;</code>ã€ <code>&lt;Input /&gt;</code> ç­‰ç»„ä»¶ã€‚</p><h2 id="å¯¹-react-ä¸­-fragment-çš„ç†è§£-å®ƒçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ" tabindex="-1">å¯¹ React ä¸­ Fragment çš„ç†è§£ï¼Œå®ƒçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#å¯¹-react-ä¸­-fragment-çš„ç†è§£-å®ƒçš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a></h2><p>åœ¨ React ä¸­ï¼Œç»„ä»¶è¿”å›çš„å…ƒç´ åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ã€‚ä¸ºäº†ä¸æ·»åŠ å¤šä½™çš„ DOM èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Fragment æ ‡ç­¾æ¥åŒ…è£¹æ‰€æœ‰çš„å…ƒç´ ï¼ŒFragment æ ‡ç­¾ä¸ä¼šæ¸²æŸ“å‡ºä»»ä½•å…ƒç´ ã€‚React å®˜æ–¹å¯¹ Fragment çš„è§£é‡Šï¼š</p><blockquote><p>React ä¸­çš„ä¸€ä¸ªå¸¸è§æ¨¡å¼æ˜¯ä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ã€‚Fragments å…è®¸ä½ å°†å­åˆ—è¡¨åˆ†ç»„ï¼Œè€Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹ã€‚</p></blockquote><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">React</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;">Component</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">Fragment</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;react&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¸€èˆ¬å½¢å¼</span></span>
<span class="line"><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">React.Fragment</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">ChildA</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">ChildB</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">ChildC</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E5C07B;">React.Fragment</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¹Ÿå¯ä»¥å†™æˆä»¥ä¸‹å½¢å¼</span></span>
<span class="line"><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">ChildA</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">ChildB</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E5C07B;">ChildC</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> React</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> { Component</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> Fragment } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;react&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// ä¸€èˆ¬å½¢å¼</span></span>
<span class="line"><span style="color:#B392F0;">render() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#79B8FF;">React.Fragment</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">ChildA</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">ChildB</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">ChildC</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#79B8FF;">React.Fragment</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">// ä¹Ÿå¯ä»¥å†™æˆä»¥ä¸‹å½¢å¼</span></span>
<span class="line"><span style="color:#B392F0;">render() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">ChildA</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">ChildB</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#79B8FF;">ChildC</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="react-å¦‚ä½•è·å–ç»„ä»¶å¯¹åº”çš„-dom-å…ƒç´ " tabindex="-1">React å¦‚ä½•è·å–ç»„ä»¶å¯¹åº”çš„ DOM å…ƒç´ ï¼Ÿ <a class="header-anchor" href="#react-å¦‚ä½•è·å–ç»„ä»¶å¯¹åº”çš„-dom-å…ƒç´ " aria-hidden="true">#</a></h2><p>å¯ä»¥ç”¨ ref æ¥è·å–æŸä¸ªå­èŠ‚ç‚¹çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡å½“å‰ class ç»„ä»¶å®ä¾‹çš„ä¸€äº›ç‰¹å®šå±æ€§æ¥ç›´æ¥è·å–å­èŠ‚ç‚¹å®ä¾‹ã€‚ref æœ‰ä¸‰ç§å®ç°æ–¹æ³•:</p><ul><li><strong>å­—ç¬¦ä¸²æ ¼å¼</strong>ï¼šå­—ç¬¦ä¸²æ ¼å¼ï¼Œè¿™æ˜¯ React16 ç‰ˆæœ¬ä¹‹å‰ç”¨å¾—æœ€å¤šçš„ï¼Œä¾‹å¦‚ï¼š<code>&lt;p ref=&quot;info&quot;&gt;span&lt;/p&gt;</code></li><li><strong>å‡½æ•°æ ¼å¼</strong>ï¼šref å¯¹åº”ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå°±æ˜¯å¯¹åº”çš„èŠ‚ç‚¹å®ä¾‹ï¼Œä¾‹å¦‚ï¼š<code>&lt;p ref={ele =&gt; this.info = ele}&gt;&lt;/p&gt;</code></li><li><strong>createRef æ–¹æ³•</strong>ï¼šReact 16 æä¾›çš„ä¸€ä¸ª APIï¼Œä½¿ç”¨ React.createRef()æ¥å®ç°</li></ul><h2 id="react-ä¸­å¯ä»¥åœ¨-render-è®¿é—®-refs-å—-ä¸ºä»€ä¹ˆ" tabindex="-1">React ä¸­å¯ä»¥åœ¨ render è®¿é—® refs å—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#react-ä¸­å¯ä»¥åœ¨-render-è®¿é—®-refs-å—-ä¸ºä»€ä¹ˆ" aria-hidden="true">#</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">ref</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">spanRef</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">title</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">spanRef</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">current</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;æœ‰å€¼&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;æ— å€¼&quot;</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">span</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/&gt;;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">span</span><span style="color:#B392F0;"> id</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;name&quot;</span><span style="color:#B392F0;"> ref</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.spanRef}&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    {</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.title}</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#FFAB70;">span</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">span</span><span style="color:#B392F0;">&gt;{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">spanRef</span><span style="color:#B392F0;">.current </span><span style="color:#F97583;">?</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;æœ‰å€¼&quot;</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;æ— å€¼&quot;</span><span style="color:#B392F0;">}&lt;/</span><span style="color:#FFAB70;">span</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/&gt;;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¸å¯ä»¥ï¼Œrender é˜¶æ®µ DOM è¿˜æ²¡æœ‰ç”Ÿæˆï¼Œæ— æ³•è·å– DOMã€‚DOM çš„è·å–éœ€è¦åœ¨ pre-commit é˜¶æ®µå’Œ commit é˜¶æ®µï¼š</p><h2 id="å¯¹-react-çš„æ’æ§½-portals-çš„ç†è§£-å¦‚ä½•ä½¿ç”¨-æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯" tabindex="-1">å¯¹ React çš„æ’æ§½(Portals)çš„ç†è§£ï¼Œå¦‚ä½•ä½¿ç”¨ï¼Œæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#å¯¹-react-çš„æ’æ§½-portals-çš„ç†è§£-å¦‚ä½•ä½¿ç”¨-æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯" aria-hidden="true">#</a></h2><p>React å®˜æ–¹å¯¹ Portals çš„å®šä¹‰ï¼š</p><blockquote><p>Portal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆ</p></blockquote><p>Portals æ˜¯ React 16 æä¾›çš„å®˜æ–¹è§£å†³æ–¹æ¡ˆï¼Œä½¿å¾—ç»„ä»¶å¯ä»¥è„±ç¦»çˆ¶ç»„ä»¶å±‚çº§æŒ‚è½½åœ¨ DOM æ ‘çš„ä»»ä½•ä½ç½®ã€‚é€šä¿—æ¥è®²ï¼Œå°±æ˜¯æˆ‘ä»¬ render ä¸€ä¸ªç»„ä»¶ï¼Œä½†è¿™ä¸ªç»„ä»¶çš„ DOM ç»“æ„å¹¶ä¸åœ¨æœ¬ç»„ä»¶å†…ã€‚</p><p>Portals è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#E5C07B;">ReactDOM</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createPortal</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">child</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">container</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#79B8FF;">ReactDOM</span><span style="color:#B392F0;">.createPortal(child</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> container);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>ç¬¬ä¸€ä¸ªå‚æ•° child æ˜¯å¯æ¸²æŸ“çš„ React å­é¡¹ï¼Œæ¯”å¦‚å…ƒç´ ï¼Œå­—ç¬¦ä¸²æˆ–è€…ç‰‡æ®µç­‰;</li><li>ç¬¬äºŒä¸ªå‚æ•° container æ˜¯ä¸€ä¸ª DOM å…ƒç´ ã€‚</li></ul><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç»„ä»¶çš„ render å‡½æ•°è¿”å›çš„å…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨å®ƒçš„çˆ¶çº§ç»„ä»¶ä¸Šï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">DemoComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./DemoComponent&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// DemoComponentå…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨idä¸ºparentçš„divçš„å…ƒç´ ä¸Š</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;parent&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">DemoComponent</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> DemoComponent </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;./DemoComponent&#39;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">render() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// DemoComponentå…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨idä¸ºparentçš„divçš„å…ƒç´ ä¸Š</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> id</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;parent&quot;</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#79B8FF;">DemoComponent</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç„¶è€Œï¼Œæœ‰äº›å…ƒç´ éœ€è¦è¢«æŒ‚è½½åœ¨æ›´é«˜å±‚çº§çš„ä½ç½®ã€‚æœ€å…¸å‹çš„åº”ç”¨åœºæ™¯ï¼šå½“çˆ¶ç»„ä»¶å…·æœ‰<code>overflow: hidden</code>æˆ–è€…<code>z-index</code>çš„æ ·å¼è®¾ç½®æ—¶ï¼Œç»„ä»¶æœ‰å¯èƒ½è¢«å…¶ä»–å…ƒç´ é®æŒ¡ï¼Œè¿™æ—¶å°±å¯ä»¥è€ƒè™‘è¦ä¸è¦ä½¿ç”¨ Portal ä½¿ç»„ä»¶çš„æŒ‚è½½è„±ç¦»çˆ¶ç»„ä»¶ã€‚ä¾‹å¦‚ï¼šå¯¹è¯æ¡†ï¼Œæ¨¡æ€çª—ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">DemoComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;./DemoComponent&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// DemoComponentå…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨idä¸ºparentçš„divçš„å…ƒç´ ä¸Š</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;parent&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">DemoComponent</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> DemoComponent </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;./DemoComponent&#39;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">render() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// DemoComponentå…ƒç´ ä¼šè¢«æŒ‚è½½åœ¨idä¸ºparentçš„divçš„å…ƒç´ ä¸Š</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> id</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;parent&quot;</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#79B8FF;">DemoComponent</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="å¯¹-react-intl-çš„ç†è§£-å®ƒçš„å·¥ä½œåŸç†" tabindex="-1">å¯¹ React-Intl çš„ç†è§£ï¼Œå®ƒçš„å·¥ä½œåŸç†ï¼Ÿ <a class="header-anchor" href="#å¯¹-react-intl-çš„ç†è§£-å®ƒçš„å·¥ä½œåŸç†" aria-hidden="true">#</a></h2><p>React-intl æ˜¯é›…è™çš„è¯­è¨€å›½é™…åŒ–å¼€æºé¡¹ç›® FormatJS çš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡å…¶æä¾›çš„ç»„ä»¶å’Œ API å¯ä»¥ä¸ ReactJS ç»‘å®šã€‚</p><p>React-intl æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼Œä¸€ç§æ˜¯å¼•ç”¨ React ç»„ä»¶ï¼Œå¦ä¸€ç§æ˜¯ç›´æ¥è°ƒå– APIï¼Œå®˜æ–¹æ›´åŠ æ¨èåœ¨ React é¡¹ç›®ä¸­ä½¿ç”¨å‰è€…ï¼Œåªæœ‰åœ¨æ— æ³•ä½¿ç”¨ React ç»„ä»¶çš„åœ°æ–¹ï¼Œæ‰åº”è¯¥è°ƒç”¨æ¡†æ¶æä¾›çš„ APIã€‚å®ƒæä¾›äº†ä¸€ç³»åˆ—çš„ React ç»„ä»¶ï¼ŒåŒ…æ‹¬æ•°å­—æ ¼å¼åŒ–ã€å­—ç¬¦ä¸²æ ¼å¼åŒ–ã€æ—¥æœŸæ ¼å¼åŒ–ç­‰ã€‚</p><p>åœ¨ React-intl ä¸­ï¼Œå¯ä»¥é…ç½®ä¸åŒçš„è¯­è¨€åŒ…ï¼Œä»–çš„å·¥ä½œåŸç†å°±æ˜¯æ ¹æ®éœ€è¦ï¼Œåœ¨è¯­è¨€åŒ…ä¹‹é—´è¿›è¡Œåˆ‡æ¢ã€‚</p><h2 id="react-ä¸­ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶å’Œéæ§ç»„ä»¶" tabindex="-1">React ä¸­ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶å’Œéæ§ç»„ä»¶ï¼Ÿ <a class="header-anchor" href="#react-ä¸­ä»€ä¹ˆæ˜¯å—æ§ç»„ä»¶å’Œéæ§ç»„ä»¶" aria-hidden="true">#</a></h2><p><strong>ï¼ˆ1ï¼‰å—æ§ç»„ä»¶</strong> åœ¨ä½¿ç”¨è¡¨å•æ¥æ”¶é›†ç”¨æˆ·è¾“å…¥æ—¶ï¼Œä¾‹å¦‚<code>&lt;input&gt;&lt;select&gt;&lt;textearea&gt;</code>ç­‰å…ƒç´ éƒ½è¦ç»‘å®šä¸€ä¸ª change äº‹ä»¶ï¼Œå½“è¡¨å•çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘ onChange äº‹ä»¶ï¼Œæ›´æ–°ç»„ä»¶çš„ stateã€‚è¿™ç§ç»„ä»¶åœ¨ React ä¸­è¢«ç§°ä¸º<strong>å—æ§ç»„ä»¶</strong>ï¼Œåœ¨å—æ§ç»„ä»¶ä¸­ï¼Œç»„ä»¶æ¸²æŸ“å‡ºçš„çŠ¶æ€ä¸å®ƒçš„ value æˆ– checked å±æ€§ç›¸å¯¹åº”ï¼Œreact é€šè¿‡è¿™ç§æ–¹å¼æ¶ˆé™¤äº†ç»„ä»¶çš„å±€éƒ¨çŠ¶æ€ï¼Œä½¿æ•´ä¸ªçŠ¶æ€å¯æ§ã€‚react å®˜æ–¹æ¨èä½¿ç”¨å—æ§è¡¨å•ç»„ä»¶ã€‚</p><p>å—æ§ç»„ä»¶æ›´æ–° state çš„æµç¨‹ï¼š</p><ul><li>å¯ä»¥é€šè¿‡åˆå§‹ state ä¸­è®¾ç½®è¡¨å•çš„é»˜è®¤å€¼</li><li>æ¯å½“è¡¨å•çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè°ƒç”¨ onChange äº‹ä»¶å¤„ç†å™¨</li><li>äº‹ä»¶å¤„ç†å™¨é€šè¿‡äº‹ä»¶å¯¹è±¡ e æ‹¿åˆ°æ”¹å˜åçš„çŠ¶æ€ï¼Œå¹¶æ›´æ–°ç»„ä»¶çš„ state</li><li>ä¸€æ—¦é€šè¿‡ setState æ–¹æ³•æ›´æ–° stateï¼Œå°±ä¼šè§¦å‘è§†å›¾çš„é‡æ–°æ¸²æŸ“ï¼Œå®Œæˆè¡¨å•ç»„ä»¶çš„æ›´æ–°</li></ul><p><strong>å—æ§ç»„ä»¶ç¼ºé™·ï¼š</strong> è¡¨å•å…ƒç´ çš„å€¼éƒ½æ˜¯ç”± React ç»„ä»¶è¿›è¡Œç®¡ç†ï¼Œå½“æœ‰å¤šä¸ªè¾“å…¥æ¡†ï¼Œæˆ–è€…å¤šä¸ªè¿™ç§ç»„ä»¶æ—¶ï¼Œå¦‚æœæƒ³åŒæ—¶è·å–åˆ°å…¨éƒ¨çš„å€¼å°±å¿…é¡»æ¯ä¸ªéƒ½è¦ç¼–å†™äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè¿™ä¼šè®©ä»£ç çœ‹ç€å¾ˆè‡ƒè‚¿ï¼Œæ‰€ä»¥ä¸ºäº†è§£å†³è¿™ç§æƒ…å†µï¼Œå‡ºç°äº†éå—æ§ç»„ä»¶ã€‚</p><p><strong>ï¼ˆ2ï¼‰éå—æ§ç»„ä»¶</strong> å¦‚æœä¸€ä¸ªè¡¨å•ç»„ä»¶æ²¡æœ‰ value propsï¼ˆå•é€‰å’Œå¤é€‰æŒ‰é’®å¯¹åº”çš„æ˜¯ checked propsï¼‰æ—¶ï¼Œå°±å¯ä»¥ç§°ä¸ºéå—æ§ç»„ä»¶ã€‚åœ¨éå—æ§ç»„ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª ref æ¥ä» DOM è·å¾—è¡¨å•å€¼ã€‚è€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°ç¼–å†™ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºã€‚</p><p>React å®˜æ–¹çš„è§£é‡Šï¼š</p><blockquote><p>è¦ç¼–å†™ä¸€ä¸ªéå—æ§ç»„ä»¶ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°éƒ½ç¼–å†™æ•°æ®å¤„ç†å‡½æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨ ref æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ã€‚ å› ä¸ºéå—æ§ç»„ä»¶å°†çœŸå®æ•°æ®å‚¨å­˜åœ¨ DOM èŠ‚ç‚¹ä¸­ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨éå—æ§ç»„ä»¶æ—¶ï¼Œæœ‰æ—¶å€™åè€Œæ›´å®¹æ˜“åŒæ—¶é›†æˆ React å’Œé React ä»£ç ã€‚å¦‚æœä½ ä¸ä»‹æ„ä»£ç ç¾è§‚æ€§ï¼Œå¹¶ä¸”å¸Œæœ›å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½¿ç”¨éå—æ§ç»„ä»¶å¾€å¾€å¯ä»¥å‡å°‘ä½ çš„ä»£ç é‡ã€‚å¦åˆ™ï¼Œä½ åº”è¯¥ä½¿ç”¨å—æ§ç»„ä»¶ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç åœ¨éå—æ§ç»„ä»¶ä¸­æ¥æ”¶å•ä¸ªå±æ€§ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">NameForm</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleSubmit</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">handleSubmit</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">handleSubmit</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">event</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">alert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;A name was submitted: &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">input</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">event</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">preventDefault</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">form</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onSubmit</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleSubmit</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">label</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          Name:</span></span>
<span class="line"><span style="color:#ABB2BF;">          &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">ref</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">input</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">label</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;submit&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;Submit&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">form</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> NameForm </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">    super(props);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.handleSubmit </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">handleSubmit</span><span style="color:#B392F0;">.bind(</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  handleSubmit(event) {</span></span>
<span class="line"><span style="color:#B392F0;">    alert(</span><span style="color:#FFAB70;">&quot;A name was submitted: &quot;</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">input</span><span style="color:#B392F0;">.value);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">event</span><span style="color:#B392F0;">.preventDefault();</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">form</span><span style="color:#B392F0;"> onSubmit</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.handleSubmit}&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">label</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">          Name:</span></span>
<span class="line"><span style="color:#B392F0;">          &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;text&quot;</span><span style="color:#B392F0;"> ref</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{(input) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.input </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> input)} /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;/</span><span style="color:#FFAB70;">label</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">        &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;submit&quot;</span><span style="color:#B392F0;"> value</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;Submit&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;/</span><span style="color:#FFAB70;">form</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    );</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>æ€»ç»“ï¼š</strong> é¡µé¢ä¸­æ‰€æœ‰è¾“å…¥ç±»çš„ DOM å¦‚æœæ˜¯ç°ç”¨ç°å–çš„ç§°ä¸ºéå—æ§ç»„ä»¶ï¼Œè€Œé€šè¿‡ setState å°†è¾“å…¥çš„å€¼ç»´æŠ¤åˆ°äº† state ä¸­ï¼Œéœ€è¦æ—¶å†ä» state ä¸­å–å‡ºï¼Œè¿™é‡Œçš„æ•°æ®å°±å—åˆ°äº† state çš„æ§åˆ¶ï¼Œç§°ä¸ºå—æ§ç»„ä»¶ã€‚</p><h2 id="react-ä¸­-refs-çš„ä½œç”¨æ˜¯ä»€ä¹ˆ-æœ‰å“ªäº›åº”ç”¨åœºæ™¯" tabindex="-1">React ä¸­ refs çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›åº”ç”¨åœºæ™¯ï¼Ÿ <a class="header-anchor" href="#react-ä¸­-refs-çš„ä½œç”¨æ˜¯ä»€ä¹ˆ-æœ‰å“ªäº›åº”ç”¨åœºæ™¯" aria-hidden="true">#</a></h2><p>Refs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œç”¨äºè®¿é—®åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ æˆ– DOM èŠ‚ç‚¹ã€‚Refs åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå¦‚ä¸‹åœºæ™¯ä½¿ç”¨ Refs æ¯”è¾ƒé€‚åˆï¼š</p><ul><li>å¤„ç†ç„¦ç‚¹ã€æ–‡æœ¬é€‰æ‹©æˆ–è€…åª’ä½“çš„æ§åˆ¶</li><li>è§¦å‘å¿…è¦çš„åŠ¨ç”»</li><li>é›†æˆç¬¬ä¸‰æ–¹ DOM åº“</li></ul><p>Refs æ˜¯ä½¿ç”¨ <code>React.createRef()</code> æ–¹æ³•åˆ›å»ºçš„ï¼Œä»–é€šè¿‡ <code>ref</code> å±æ€§é™„åŠ åˆ° React å…ƒç´ ä¸Šã€‚è¦åœ¨æ•´ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ Refsï¼Œéœ€è¦å°† <code>ref</code> åœ¨æ„é€ å‡½æ•°ä¸­åˆ†é…ç»™å…¶å®ä¾‹å±æ€§ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">myRef</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createRef</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">ref</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">myRef</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> MyComponent </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">    super(props);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.myRef </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.createRef();</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> ref</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.myRef} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç”±äºå‡½æ•°ç»„ä»¶æ²¡æœ‰å®ä¾‹ï¼Œå› æ­¤ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šç›´æ¥ä½¿ç”¨ <code>ref</code>ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MyFunctionalComponent</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Parent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">textInput</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createRef</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// è¿™å°†ä¸ä¼šå·¥ä½œï¼</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">MyFunctionalComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">ref</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">textInput</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> MyFunctionalComponent() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> Parent </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">(props) {</span></span>
<span class="line"><span style="color:#B392F0;">    super(props);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.textInput </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.createRef();</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// è¿™å°†ä¸ä¼šå·¥ä½œï¼</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">MyFunctionalComponent</span><span style="color:#B392F0;"> ref</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.textInput} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ä½†å¯ä»¥é€šè¿‡é—­åˆçš„å¸®åŠ©åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨è¿›è¡Œä½¿ç”¨ Refsï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">CustomTextInput</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œå¿…é¡»å£°æ˜ textInputï¼Œè¿™æ · ref å›è°ƒæ‰å¯ä»¥å¼•ç”¨å®ƒ</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">textInput</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">handleClick</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">textInput</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">focus</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">input</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;font-style:italic;">type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;font-style:italic;">ref</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">input</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">textInput</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">      /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;button&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;Focus the text input&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">handleClick</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> CustomTextInput(props) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// è¿™é‡Œå¿…é¡»å£°æ˜ textInputï¼Œè¿™æ · ref å›è°ƒæ‰å¯ä»¥å¼•ç”¨å®ƒ</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">let</span><span style="color:#B392F0;"> textInput </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> handleClick() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">textInput</span><span style="color:#B392F0;">.focus();</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">input</span></span>
<span class="line"><span style="color:#B392F0;">        type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;text&quot;</span></span>
<span class="line"><span style="color:#B392F0;">        ref</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{(input) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          textInput </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> input;</span></span>
<span class="line"><span style="color:#B392F0;">        }}</span></span>
<span class="line"><span style="color:#B392F0;">      /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;button&quot;</span><span style="color:#B392F0;"> value</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;Focus the text input&quot;</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{handleClick} /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  );</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>ä¸åº”è¯¥è¿‡åº¦çš„ä½¿ç”¨ Refs</li><li>çš„è¿”å›å€¼å–å†³äºèŠ‚ç‚¹çš„ç±»å‹ï¼š <ul><li>å½“ <code>ref</code> å±æ€§è¢«ç”¨äºä¸€ä¸ªæ™®é€šçš„ HTML å…ƒç´ æ—¶ï¼Œ<code>React.createRef()</code> å°†æ¥æ”¶åº•å±‚ DOM å…ƒç´ ä½œä¸ºä»–çš„ <code>current</code> å±æ€§ä»¥åˆ›å»º <code>ref</code>ã€‚</li><li>å½“ <code>ref</code> å±æ€§è¢«ç”¨äºä¸€ä¸ªè‡ªå®šä¹‰çš„ç±»ç»„ä»¶æ—¶ï¼Œ<code>ref</code> å¯¹è±¡å°†æ¥æ”¶è¯¥ç»„ä»¶å·²æŒ‚è½½çš„å®ä¾‹ä½œä¸ºä»–çš„ <code>current</code>ã€‚</li></ul></li><li>å½“åœ¨çˆ¶ç»„ä»¶ä¸­éœ€è¦è®¿é—®å­ç»„ä»¶ä¸­çš„ <code>ref</code> æ—¶å¯ä½¿ç”¨ä¼ é€’ Refs æˆ–å›è°ƒ Refsã€‚</li></ul><h2 id="react-ç»„ä»¶çš„æ„é€ å‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨-å®ƒæ˜¯å¿…é¡»çš„å—" tabindex="-1">React ç»„ä»¶çš„æ„é€ å‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿå®ƒæ˜¯å¿…é¡»çš„å—ï¼Ÿ <a class="header-anchor" href="#react-ç»„ä»¶çš„æ„é€ å‡½æ•°æœ‰ä»€ä¹ˆä½œç”¨-å®ƒæ˜¯å¿…é¡»çš„å—" aria-hidden="true">#</a></h2><p>æ„é€ å‡½æ•°ä¸»è¦ç”¨äºä¸¤ä¸ªç›®çš„ï¼š</p><ul><li>é€šè¿‡å°†å¯¹è±¡åˆ†é…ç»™ this.state æ¥åˆå§‹åŒ–æœ¬åœ°çŠ¶æ€</li><li>å°†äº‹ä»¶å¤„ç†ç¨‹åºæ–¹æ³•ç»‘å®šåˆ°å®ä¾‹ä¸Š</li></ul><p>æ‰€ä»¥ï¼Œå½“åœ¨ React class ä¸­éœ€è¦è®¾ç½® state çš„åˆå§‹å€¼æˆ–è€…ç»‘å®šäº‹ä»¶æ—¶ï¼Œéœ€è¦åŠ ä¸Šæ„é€ å‡½æ•°ï¼Œå®˜æ–¹ Demoï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">LikeButton</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">liked</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleClick</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">handleClick</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">bind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">handleClick</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">liked</span><span style="color:#ABB2BF;">: </span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">liked</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">text</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">liked</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;liked&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;haven&#39;t liked&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">onClick</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">handleClick</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&gt;You </span><span style="color:#C678DD;">{</span><span style="color:#E06C75;">text</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> this. Click to toggle.&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E5C07B;">ReactDOM</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">(&lt;</span><span style="color:#E5C07B;">LikeButton</span><span style="color:#ABB2BF;"> /&gt;, </span><span style="color:#E5C07B;">document</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getElementById</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;example&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> LikeButton </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">() {</span></span>
<span class="line"><span style="color:#B392F0;">    super();</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      liked</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.handleClick </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">handleClick</span><span style="color:#B392F0;">.bind(</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  handleClick() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({ liked</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.liked });</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">text</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.liked </span><span style="color:#F97583;">?</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;liked&quot;</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;haven&#39;t liked&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> (</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> onClick</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.handleClick}&gt;You {text} this. Click to toggle.&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    );</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#79B8FF;">ReactDOM</span><span style="color:#B392F0;">.render(&lt;</span><span style="color:#79B8FF;">LikeButton</span><span style="color:#B392F0;"> /&gt;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">document</span><span style="color:#B392F0;">.getElementById(</span><span style="color:#FFAB70;">&quot;example&quot;</span><span style="color:#B392F0;">));</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>æ„é€ å‡½æ•°ç”¨æ¥æ–°å»ºçˆ¶ç±»çš„ this å¯¹è±¡ï¼›å­ç±»å¿…é¡»åœ¨ constructor æ–¹æ³•ä¸­è°ƒç”¨ super æ–¹æ³•ï¼›å¦åˆ™æ–°å»ºå®ä¾‹æ—¶ä¼šæŠ¥é”™ï¼›å› ä¸ºå­ç±»æ²¡æœ‰è‡ªå·±çš„ this å¯¹è±¡ï¼Œè€Œæ˜¯ç»§æ‰¿çˆ¶ç±»çš„ this å¯¹è±¡ï¼Œç„¶åå¯¹å…¶è¿›è¡ŒåŠ å·¥ã€‚å¦‚æœä¸è°ƒç”¨ super æ–¹æ³•ï¼›å­ç±»å°±å¾—ä¸åˆ° this å¯¹è±¡ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><ul><li>constructor () å¿…é¡»é…ä¸Š super(), å¦‚æœè¦åœ¨ constructor å†…éƒ¨ä½¿ç”¨ this.props å°±è¦ ä¼ å…¥ props , å¦åˆ™ä¸ç”¨</li><li>JavaScript ä¸­çš„ bind æ¯æ¬¡éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°, ä¸ºäº†æ€§èƒ½ç­‰è€ƒè™‘, å°½é‡åœ¨ constructor ä¸­ç»‘å®šäº‹ä»¶</li></ul><h2 id="react-forwardref-æ˜¯ä»€ä¹ˆ-å®ƒæœ‰ä»€ä¹ˆä½œç”¨" tabindex="-1">React.forwardRef æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ <a class="header-anchor" href="#react-forwardref-æ˜¯ä»€ä¹ˆ-å®ƒæœ‰ä»€ä¹ˆä½œç”¨" aria-hidden="true">#</a></h2><p>React.forwardRef ä¼šåˆ›å»ºä¸€ä¸ª React ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶èƒ½å¤Ÿå°†å…¶æ¥å—çš„ ref å±æ€§è½¬å‘åˆ°å…¶ç»„ä»¶æ ‘ä¸‹çš„å¦ä¸€ä¸ªç»„ä»¶ä¸­ã€‚è¿™ç§æŠ€æœ¯å¹¶ä¸å¸¸è§ï¼Œä½†åœ¨ä»¥ä¸‹ä¸¤ç§åœºæ™¯ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼š</p><ul><li>è½¬å‘ refs åˆ° DOM ç»„ä»¶</li><li>åœ¨é«˜é˜¶ç»„ä»¶ä¸­è½¬å‘ refs</li></ul><h2 id="ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒ" tabindex="-1">ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ <a class="header-anchor" href="#ç±»ç»„ä»¶ä¸å‡½æ•°ç»„ä»¶æœ‰ä»€ä¹ˆå¼‚åŒ" aria-hidden="true">#</a></h2><p><strong>ç›¸åŒç‚¹ï¼š</strong> ç»„ä»¶æ˜¯ React å¯å¤ç”¨çš„æœ€å°ä»£ç ç‰‡æ®µï¼Œå®ƒä»¬ä¼šè¿”å›è¦åœ¨é¡µé¢ä¸­æ¸²æŸ“çš„ React å…ƒç´ ã€‚ä¹Ÿæ­£å› ä¸ºç»„ä»¶æ˜¯ React çš„æœ€å°ç¼–ç å•ä½ï¼Œæ‰€ä»¥æ— è®ºæ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ç±»ç»„ä»¶ï¼Œåœ¨ä½¿ç”¨æ–¹å¼å’Œæœ€ç»ˆå‘ˆç°æ•ˆæœä¸Šéƒ½æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p><p>æˆ‘ä»¬ç”šè‡³å¯ä»¥å°†ä¸€ä¸ªç±»ç»„ä»¶æ”¹å†™æˆå‡½æ•°ç»„ä»¶ï¼Œæˆ–è€…æŠŠå‡½æ•°ç»„ä»¶æ”¹å†™æˆä¸€ä¸ªç±»ç»„ä»¶ï¼ˆè™½ç„¶å¹¶ä¸æ¨èè¿™ç§é‡æ„è¡Œä¸ºï¼‰ã€‚ä»ä½¿ç”¨è€…çš„è§’åº¦è€Œè¨€ï¼Œå¾ˆéš¾ä»ä½¿ç”¨ä½“éªŒä¸ŠåŒºåˆ†ä¸¤è€…ï¼Œè€Œä¸”åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œé—­åŒ…å’Œç±»çš„æ€§èƒ½åªåœ¨æç«¯åœºæ™¯ä¸‹æ‰ä¼šæœ‰æ˜æ˜¾çš„å·®åˆ«ã€‚æ‰€ä»¥ï¼ŒåŸºæœ¬å¯è®¤ä¸ºä¸¤è€…ä½œä¸ºç»„ä»¶æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p><p><strong>ä¸åŒç‚¹ï¼š</strong></p><ul><li>å®ƒä»¬åœ¨å¼€å‘æ—¶çš„å¿ƒæ™ºæ¨¡å‹ä¸Šå´å­˜åœ¨å·¨å¤§çš„å·®å¼‚ã€‚ç±»ç»„ä»¶æ˜¯åŸºäºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ï¼Œå®ƒä¸»æ‰“çš„æ˜¯ç»§æ‰¿ã€ç”Ÿå‘½å‘¨æœŸç­‰æ ¸å¿ƒæ¦‚å¿µï¼›è€Œå‡½æ•°ç»„ä»¶å†…æ ¸æ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Œä¸»æ‰“çš„æ˜¯ immutableã€æ²¡æœ‰å‰¯ä½œç”¨ã€å¼•ç”¨é€æ˜ç­‰ç‰¹ç‚¹ã€‚</li><li>ä¹‹å‰ï¼Œåœ¨ä½¿ç”¨åœºæ™¯ä¸Šï¼Œå¦‚æœå­˜åœ¨éœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ï¼›è®¾è®¡æ¨¡å¼ä¸Šï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ç»§æ‰¿ï¼Œé‚£ä¹ˆä¸»æ¨ç±»ç»„ä»¶ã€‚ä½†ç°åœ¨ç”±äº React Hooks çš„æ¨å‡ºï¼Œç”Ÿå‘½å‘¨æœŸæ¦‚å¿µçš„æ·¡å‡ºï¼Œå‡½æ•°ç»„ä»¶å¯ä»¥å®Œå…¨å–ä»£ç±»ç»„ä»¶ã€‚å…¶æ¬¡ç»§æ‰¿å¹¶ä¸æ˜¯ç»„ä»¶æœ€ä½³çš„è®¾è®¡æ¨¡å¼ï¼Œå®˜æ–¹æ›´æ¨å´‡â€œç»„åˆä¼˜äºç»§æ‰¿â€çš„è®¾è®¡æ¦‚å¿µï¼Œæ‰€ä»¥ç±»ç»„ä»¶åœ¨è¿™æ–¹é¢çš„ä¼˜åŠ¿ä¹Ÿåœ¨æ·¡å‡ºã€‚</li><li>æ€§èƒ½ä¼˜åŒ–ä¸Šï¼Œç±»ç»„ä»¶ä¸»è¦ä¾é  shouldComponentUpdate é˜»æ–­æ¸²æŸ“æ¥æå‡æ€§èƒ½ï¼Œè€Œå‡½æ•°ç»„ä»¶ä¾é  React.memo ç¼“å­˜æ¸²æŸ“ç»“æœæ¥æå‡æ€§èƒ½ã€‚</li><li>ä»ä¸Šæ‰‹ç¨‹åº¦è€Œè¨€ï¼Œç±»ç»„ä»¶æ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œä»æœªæ¥è¶‹åŠ¿ä¸Šçœ‹ï¼Œç”±äº React Hooks çš„æ¨å‡ºï¼Œå‡½æ•°ç»„ä»¶æˆäº†ç¤¾åŒºæœªæ¥ä¸»æ¨çš„æ–¹æ¡ˆã€‚</li><li>ç±»ç»„ä»¶åœ¨æœªæ¥æ—¶é—´åˆ‡ç‰‡ä¸å¹¶å‘æ¨¡å¼ä¸­ï¼Œç”±äºç”Ÿå‘½å‘¨æœŸå¸¦æ¥çš„å¤æ‚åº¦ï¼Œå¹¶ä¸æ˜“äºä¼˜åŒ–ã€‚è€Œå‡½æ•°ç»„ä»¶æœ¬èº«è½»é‡ç®€å•ï¼Œä¸”åœ¨ Hooks çš„åŸºç¡€ä¸Šæä¾›äº†æ¯”åŸå…ˆæ›´ç»†ç²’åº¦çš„é€»è¾‘ç»„ç»‡ä¸å¤ç”¨ï¼Œæ›´èƒ½é€‚åº” React çš„æœªæ¥å‘å±•ã€‚</li></ul><h2 id="react-setstate-è°ƒç”¨çš„åŸç†" tabindex="-1">React setState è°ƒç”¨çš„åŸç† <a class="header-anchor" href="#react-setstate-è°ƒç”¨çš„åŸç†" aria-hidden="true">#</a></h2><ul><li>é¦–å…ˆè°ƒç”¨äº†<code>setState</code> å…¥å£å‡½æ•°ï¼Œå…¥å£å‡½æ•°åœ¨è¿™é‡Œå°±æ˜¯å……å½“ä¸€ä¸ªåˆ†å‘å™¨çš„è§’è‰²ï¼Œæ ¹æ®å…¥å‚çš„ä¸åŒï¼Œå°†å…¶åˆ†å‘åˆ°ä¸åŒçš„åŠŸèƒ½å‡½æ•°ä¸­å»ï¼›</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#E5C07B;">ReactComponent</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">prototype</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">partialState</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">updater</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">enqueueSetState</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">partialState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">updater</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">enqueueCallback</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;setState&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#79B8FF;">ReactComponent</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">prototype</span><span style="color:#B392F0;">.setState </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> (partialState</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> callback) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">updater</span><span style="color:#B392F0;">.enqueueSetState(</span><span style="color:#79B8FF;">this</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> partialState);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (callback) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">updater</span><span style="color:#B392F0;">.enqueueCallback(</span><span style="color:#79B8FF;">this</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> callback</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;setState&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><code>enqueueSetState</code> æ–¹æ³•å°†æ–°çš„ <code>state</code> æ”¾è¿›ç»„ä»¶çš„çŠ¶æ€é˜Ÿåˆ—é‡Œï¼Œå¹¶è°ƒç”¨ <code>enqueueUpdate</code> æ¥å¤„ç†å°†è¦æ›´æ–°çš„å®ä¾‹å¯¹è±¡ï¼›</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">enqueueSetState: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">publicInstance</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">partialState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// æ ¹æ® this æ‹¿åˆ°å¯¹åº”çš„ç»„ä»¶å®ä¾‹</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">internalInstance</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getInternalInstanceReadyForUpdate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">publicInstance</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;setState&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// è¿™ä¸ª queue å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªç»„ä»¶å®ä¾‹çš„ state æ•°ç»„</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">queue</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">internalInstance</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_pendingStateQueue</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">||</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">internalInstance</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_pendingStateQueue</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> []);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">queue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">partialState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//  enqueueUpdate ç”¨æ¥å¤„ç†å½“å‰çš„ç»„ä»¶å®ä¾‹</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">enqueueUpdate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">internalInstance</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">enqueueSetState</span><span style="color:#BBBBBB;">:</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> (publicInstance</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> partialState) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// æ ¹æ® this æ‹¿åˆ°å¯¹åº”çš„ç»„ä»¶å®ä¾‹</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> internalInstance </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> getInternalInstanceReadyForUpdate(publicInstance</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&#39;setState&#39;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// è¿™ä¸ª queue å¯¹åº”çš„å°±æ˜¯ä¸€ä¸ªç»„ä»¶å®ä¾‹çš„ state æ•°ç»„</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">var</span><span style="color:#B392F0;"> queue </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">internalInstance</span><span style="color:#B392F0;">._pendingStateQueue </span><span style="color:#F97583;">||</span><span style="color:#B392F0;"> (</span><span style="color:#79B8FF;">internalInstance</span><span style="color:#B392F0;">._pendingStateQueue </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> []);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">queue</span><span style="color:#B392F0;">.push(partialState);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">//  enqueueUpdate ç”¨æ¥å¤„ç†å½“å‰çš„ç»„ä»¶å®ä¾‹</span></span>
<span class="line"><span style="color:#B392F0;">  enqueueUpdate(internalInstance);</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>åœ¨ <code>enqueueUpdate</code> æ–¹æ³•ä¸­å¼•å‡ºäº†ä¸€ä¸ªå…³é”®çš„å¯¹è±¡â€”â€”<code>batchingStrategy</code>ï¼Œè¯¥å¯¹è±¡æ‰€å…·å¤‡çš„<code>isBatchingUpdates</code> å±æ€§ç›´æ¥å†³å®šäº†å½“ä¸‹æ˜¯è¦èµ°æ›´æ–°æµç¨‹ï¼Œè¿˜æ˜¯åº”è¯¥æ’é˜Ÿç­‰å¾…ï¼›å¦‚æœè½®åˆ°æ‰§è¡Œï¼Œå°±è°ƒç”¨ <code>batchedUpdates</code> æ–¹æ³•æ¥ç›´æ¥å‘èµ·æ›´æ–°æµç¨‹ã€‚ç”±æ­¤å¯ä»¥æ¨æµ‹ï¼Œ<code>batchingStrategy</code> æˆ–è®¸æ­£æ˜¯ React å†…éƒ¨ä¸“é—¨ç”¨äºç®¡æ§æ‰¹é‡æ›´æ–°çš„å¯¹è±¡ã€‚</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">enqueueUpdate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">component</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">ensureInjected</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// æ³¨æ„è¿™ä¸€å¥æ˜¯é—®é¢˜çš„å…³é”®ï¼ŒisBatchingUpdatesæ ‡è¯†ç€å½“å‰æ˜¯å¦å¤„äºæ‰¹é‡åˆ›å»º/æ›´æ–°ç»„ä»¶çš„é˜¶æ®µ</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">batchingStrategy</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">isBatchingUpdates</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// è‹¥å½“å‰æ²¡æœ‰å¤„äºæ‰¹é‡åˆ›å»º/æ›´æ–°ç»„ä»¶çš„é˜¶æ®µï¼Œåˆ™ç«‹å³æ›´æ–°ç»„ä»¶</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">batchingStrategy</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">batchedUpdates</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">enqueueUpdate</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// å¦åˆ™ï¼Œå…ˆæŠŠç»„ä»¶å¡å…¥ dirtyComponents é˜Ÿåˆ—é‡Œï¼Œè®©å®ƒâ€œå†ç­‰ç­‰â€</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">dirtyComponents</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">component</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">component</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_updateBatchNumber</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">component</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">_updateBatchNumber</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">updateBatchNumber</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> enqueueUpdate(component) {</span></span>
<span class="line"><span style="color:#B392F0;">  ensureInjected();</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// æ³¨æ„è¿™ä¸€å¥æ˜¯é—®é¢˜çš„å…³é”®ï¼ŒisBatchingUpdatesæ ‡è¯†ç€å½“å‰æ˜¯å¦å¤„äºæ‰¹é‡åˆ›å»º/æ›´æ–°ç»„ä»¶çš„é˜¶æ®µ</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (</span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">batchingStrategy</span><span style="color:#B392F0;">.isBatchingUpdates) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// è‹¥å½“å‰æ²¡æœ‰å¤„äºæ‰¹é‡åˆ›å»º/æ›´æ–°ç»„ä»¶çš„é˜¶æ®µï¼Œåˆ™ç«‹å³æ›´æ–°ç»„ä»¶</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">batchingStrategy</span><span style="color:#B392F0;">.batchedUpdates(enqueueUpdate</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> component);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// å¦åˆ™ï¼Œå…ˆæŠŠç»„ä»¶å¡å…¥ dirtyComponents é˜Ÿåˆ—é‡Œï¼Œè®©å®ƒâ€œå†ç­‰ç­‰â€</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">dirtyComponents</span><span style="color:#B392F0;">.push(component);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (</span><span style="color:#79B8FF;">component</span><span style="color:#B392F0;">._updateBatchNumber </span><span style="color:#F97583;">==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">component</span><span style="color:#B392F0;">._updateBatchNumber </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> updateBatchNumber </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>æ³¨æ„ï¼š</strong><code>batchingStrategy</code> å¯¹è±¡å¯ä»¥ç†è§£ä¸ºâ€œé”ç®¡ç†å™¨â€ã€‚è¿™é‡Œçš„â€œé”â€ï¼Œæ˜¯æŒ‡ React å…¨å±€å”¯ä¸€çš„ <code>isBatchingUpdates</code> å˜é‡ï¼Œ<code>isBatchingUpdates</code> çš„åˆå§‹å€¼æ˜¯ <code>false</code>ï¼Œæ„å‘³ç€â€œå½“å‰å¹¶æœªè¿›è¡Œä»»ä½•æ‰¹é‡æ›´æ–°æ“ä½œâ€ã€‚æ¯å½“ React è°ƒç”¨ <code>batchedUpdate</code> å»æ‰§è¡Œæ›´æ–°åŠ¨ä½œæ—¶ï¼Œä¼šå…ˆæŠŠè¿™ä¸ªé”ç»™â€œé”ä¸Šâ€ï¼ˆç½®ä¸º <code>true</code>ï¼‰ï¼Œè¡¨æ˜â€œç°åœ¨æ­£å¤„äºæ‰¹é‡æ›´æ–°è¿‡ç¨‹ä¸­â€ã€‚å½“é”è¢«â€œé”ä¸Šâ€çš„æ—¶å€™ï¼Œä»»ä½•éœ€è¦æ›´æ–°çš„ç»„ä»¶éƒ½åªèƒ½æš‚æ—¶è¿›å…¥ <code>dirtyComponents</code> é‡Œæ’é˜Ÿç­‰å€™ä¸‹ä¸€æ¬¡çš„æ‰¹é‡æ›´æ–°ï¼Œè€Œä¸èƒ½éšæ„â€œæ’é˜Ÿâ€ã€‚æ­¤å¤„ä½“ç°çš„â€œä»»åŠ¡é”â€çš„æ€æƒ³ï¼Œæ˜¯ React é¢å¯¹å¤§é‡çŠ¶æ€ä»ç„¶èƒ½å¤Ÿå®ç°æœ‰åºåˆ†æ‰¹å¤„ç†çš„åŸºçŸ³ã€‚</p><h2 id="react-setstate-è°ƒç”¨ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥" tabindex="-1">React setState è°ƒç”¨ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿæ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ <a class="header-anchor" href="#react-setstate-è°ƒç”¨ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ-æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥" aria-hidden="true">#</a></h2><p><strong>ï¼ˆ1ï¼‰React ä¸­ setState åå‘ç”Ÿäº†ä»€ä¹ˆ</strong></p><p>åœ¨ä»£ç ä¸­è°ƒç”¨ setState å‡½æ•°ä¹‹åï¼ŒReact ä¼šå°†ä¼ å…¥çš„å‚æ•°å¯¹è±¡ä¸ç»„ä»¶å½“å‰çš„çŠ¶æ€åˆå¹¶ï¼Œç„¶åè§¦å‘è°ƒå’Œè¿‡ç¨‹(Reconciliation)ã€‚ç»è¿‡è°ƒå’Œè¿‡ç¨‹ï¼ŒReact ä¼šä»¥ç›¸å¯¹é«˜æ•ˆçš„æ–¹å¼æ ¹æ®æ–°çš„çŠ¶æ€æ„å»º React å…ƒç´ æ ‘å¹¶ä¸”ç€æ‰‹é‡æ–°æ¸²æŸ“æ•´ä¸ª UI ç•Œé¢ã€‚</p><p>åœ¨ React å¾—åˆ°å…ƒç´ æ ‘ä¹‹åï¼ŒReact ä¼šè‡ªåŠ¨è®¡ç®—å‡ºæ–°çš„æ ‘ä¸è€æ ‘çš„èŠ‚ç‚¹å·®å¼‚ï¼Œç„¶åæ ¹æ®å·®å¼‚å¯¹ç•Œé¢è¿›è¡Œæœ€å°åŒ–é‡æ¸²æŸ“ã€‚åœ¨å·®å¼‚è®¡ç®—ç®—æ³•ä¸­ï¼ŒReact èƒ½å¤Ÿç›¸å¯¹ç²¾ç¡®åœ°çŸ¥é“å“ªäº›ä½ç½®å‘ç”Ÿäº†æ”¹å˜ä»¥åŠåº”è¯¥å¦‚ä½•æ”¹å˜ï¼Œè¿™å°±ä¿è¯äº†æŒ‰éœ€æ›´æ–°ï¼Œè€Œä¸æ˜¯å…¨éƒ¨é‡æ–°æ¸²æŸ“ã€‚</p><p>å¦‚æœåœ¨çŸ­æ—¶é—´å†…é¢‘ç¹ setStateã€‚React ä¼šå°† state çš„æ”¹å˜å‹å…¥æ ˆä¸­ï¼Œåœ¨åˆé€‚çš„æ—¶æœºï¼Œæ‰¹é‡æ›´æ–° state å’Œè§†å›¾ï¼Œè¾¾åˆ°æé«˜æ€§èƒ½çš„æ•ˆæœã€‚</p><p><strong>ï¼ˆ2ï¼‰setState æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥çš„</strong></p><p>å‡å¦‚æ‰€æœ‰ setState æ˜¯åŒæ­¥çš„ï¼Œæ„å‘³ç€æ¯æ‰§è¡Œä¸€æ¬¡ setState æ—¶ï¼ˆæœ‰å¯èƒ½ä¸€ä¸ªåŒæ­¥ä»£ç ä¸­ï¼Œå¤šæ¬¡ setStateï¼‰ï¼Œéƒ½é‡æ–° vnode diff + dom ä¿®æ”¹ï¼Œè¿™å¯¹æ€§èƒ½æ¥è¯´æ˜¯æä¸ºä¸å¥½çš„ã€‚å¦‚æœæ˜¯å¼‚æ­¥ï¼Œåˆ™å¯ä»¥æŠŠä¸€ä¸ªåŒæ­¥ä»£ç ä¸­çš„å¤šä¸ª setState åˆå¹¶æˆä¸€æ¬¡ç»„ä»¶æ›´æ–°ã€‚æ‰€ä»¥é»˜è®¤æ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯åœ¨ä¸€äº›æƒ…å†µä¸‹æ˜¯åŒæ­¥çš„ã€‚</p><p>setState å¹¶ä¸æ˜¯å•çº¯åŒæ­¥/å¼‚æ­¥çš„ï¼Œå®ƒçš„è¡¨ç°ä¼šå› è°ƒç”¨åœºæ™¯çš„ä¸åŒè€Œä¸åŒã€‚åœ¨æºç ä¸­ï¼Œé€šè¿‡ isBatchingUpdates æ¥åˆ¤æ–­ setState æ˜¯å…ˆå­˜è¿› state é˜Ÿåˆ—è¿˜æ˜¯ç›´æ¥æ›´æ–°ï¼Œå¦‚æœå€¼ä¸º true åˆ™æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œä¸º false åˆ™ç›´æ¥æ›´æ–°ã€‚</p><ul><li><strong>å¼‚æ­¥ï¼š</strong> åœ¨ React å¯ä»¥æ§åˆ¶çš„åœ°æ–¹ï¼Œå°±ä¸º trueï¼Œæ¯”å¦‚åœ¨ React ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å’Œåˆæˆäº‹ä»¶ä¸­ï¼Œéƒ½ä¼šèµ°åˆå¹¶æ“ä½œï¼Œå»¶è¿Ÿæ›´æ–°çš„ç­–ç•¥ã€‚</li><li><strong>åŒæ­¥ï¼š</strong> åœ¨ React æ— æ³•æ§åˆ¶çš„åœ°æ–¹ï¼Œæ¯”å¦‚åŸç”Ÿäº‹ä»¶ï¼Œå…·ä½“å°±æ˜¯åœ¨ addEventListener ã€setTimeoutã€setInterval ç­‰äº‹ä»¶ä¸­ï¼Œå°±åªèƒ½åŒæ­¥æ›´æ–°ã€‚</li></ul><p>ä¸€èˆ¬è®¤ä¸ºï¼Œåšå¼‚æ­¥è®¾è®¡æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ã€å‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼š</p><ul><li><code>setState</code>è®¾è®¡ä¸ºå¼‚æ­¥ï¼Œå¯ä»¥æ˜¾è‘—çš„æå‡æ€§èƒ½ã€‚å¦‚æœæ¯æ¬¡è°ƒç”¨ <code>setState</code>éƒ½è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼Œé‚£ä¹ˆæ„å‘³ç€<code>render</code>å‡½æ•°ä¼šè¢«é¢‘ç¹è°ƒç”¨ï¼Œç•Œé¢é‡æ–°æ¸²æŸ“ï¼Œè¿™æ ·æ•ˆç‡æ˜¯å¾ˆä½çš„ï¼›æœ€å¥½çš„åŠæ³•åº”è¯¥æ˜¯è·å–åˆ°å¤šä¸ªæ›´æ–°ï¼Œä¹‹åè¿›è¡Œæ‰¹é‡æ›´æ–°ï¼›</li><li>å¦‚æœåŒæ­¥æ›´æ–°äº†<code>state</code>ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ‰§è¡Œ<code>render</code>å‡½æ•°ï¼Œé‚£ä¹ˆ<code>state</code>å’Œ<code>props</code>ä¸èƒ½ä¿æŒåŒæ­¥ã€‚<code>state</code>å’Œ<code>props</code>ä¸èƒ½ä¿æŒä¸€è‡´æ€§ï¼Œä¼šåœ¨å¼€å‘ä¸­äº§ç”Ÿå¾ˆå¤šçš„é—®é¢˜ï¼›</li></ul><h2 id="react-ä¸­çš„-setstate-æ‰¹é‡æ›´æ–°çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆ" tabindex="-1">React ä¸­çš„ setState æ‰¹é‡æ›´æ–°çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#react-ä¸­çš„-setstate-æ‰¹é‡æ›´æ–°çš„è¿‡ç¨‹æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a></h2><p>è°ƒç”¨ <code>setState</code> æ—¶ï¼Œç»„ä»¶çš„ <code>state</code> å¹¶ä¸ä¼šç«‹å³æ”¹å˜ï¼Œ <code>setState</code> åªæ˜¯æŠŠè¦ä¿®æ”¹çš„ <code>state</code> æ”¾å…¥ä¸€ä¸ªé˜Ÿåˆ—ï¼Œ <code>React</code> ä¼šä¼˜åŒ–çœŸæ­£çš„æ‰§è¡Œæ—¶æœºï¼Œå¹¶å‡ºäºæ€§èƒ½åŸå› ï¼Œä¼šå°† <code>React</code> äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„å¤šæ¬¡<code>React</code> äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„å¤šæ¬¡ <code>setState</code> çš„çŠ¶æ€ä¿®æ”¹åˆå¹¶æˆä¸€æ¬¡çŠ¶æ€ä¿®æ”¹ã€‚ æœ€ç»ˆæ›´æ–°åªäº§ç”Ÿä¸€æ¬¡ç»„ä»¶åŠå…¶å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™å¯¹äºå¤§å‹åº”ç”¨ç¨‹åºä¸­çš„æ€§èƒ½æå‡è‡³å…³é‡è¦ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">    </span><span style="color:#56B6C2;">===&gt;</span><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">å…¥é˜Ÿ</span><span style="color:#ABB2BF;">ï¼Œ[</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;">1</span><span style="color:#E06C75;">çš„ä»»åŠ¡</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">    </span><span style="color:#56B6C2;">===&gt;</span><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">å…¥é˜Ÿ</span><span style="color:#ABB2BF;">ï¼Œ[</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;">1</span><span style="color:#E06C75;">çš„ä»»åŠ¡</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;">1</span><span style="color:#E06C75;">çš„ä»»åŠ¡</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">                                          â†“</span></span>
<span class="line"><span style="color:#ABB2BF;">                                         </span><span style="color:#E06C75;">åˆå¹¶</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">ï¼Œ[</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;">1</span><span style="color:#E06C75;">çš„ä»»åŠ¡</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">                                          â†“</span></span>
<span class="line"><span style="color:#ABB2BF;">                                         </span><span style="color:#E06C75;">æ‰§è¡Œ</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;">1</span><span style="color:#E06C75;">çš„ä»»åŠ¡</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">  count</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;">    </span><span style="color:#F97583;">===&gt;</span><span style="color:#B392F0;">    å…¥é˜Ÿï¼Œ[count</span><span style="color:#F97583;">+</span><span style="color:#B392F0;">1çš„ä»»åŠ¡]</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">  count</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;">    </span><span style="color:#F97583;">===&gt;</span><span style="color:#B392F0;">    å…¥é˜Ÿï¼Œ[count</span><span style="color:#F97583;">+</span><span style="color:#B392F0;">1çš„ä»»åŠ¡ï¼Œcount</span><span style="color:#F97583;">+</span><span style="color:#B392F0;">1çš„ä»»åŠ¡]</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">                                          â†“</span></span>
<span class="line"><span style="color:#B392F0;">                                         åˆå¹¶ stateï¼Œ[count</span><span style="color:#F97583;">+</span><span style="color:#B392F0;">1çš„ä»»åŠ¡]</span></span>
<span class="line"><span style="color:#B392F0;">                                          â†“</span></span>
<span class="line"><span style="color:#B392F0;">                                         æ‰§è¡Œ count</span><span style="color:#F97583;">+</span><span style="color:#B392F0;">1çš„ä»»åŠ¡</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåªè¦åŒæ­¥ä»£ç è¿˜åœ¨æ‰§è¡Œï¼Œâ€œæ”’èµ·æ¥â€è¿™ä¸ªåŠ¨ä½œå°±ä¸ä¼šåœæ­¢ã€‚ï¼ˆæ³¨ï¼šè¿™é‡Œä¹‹æ‰€ä»¥å¤šæ¬¡ +1 æœ€ç»ˆåªæœ‰ä¸€æ¬¡ç”Ÿæ•ˆï¼Œæ˜¯å› ä¸ºåœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­å¤šæ¬¡ setState çš„åˆå¹¶åŠ¨ä½œä¸æ˜¯å•çº¯åœ°å°†æ›´æ–°ç´¯åŠ ã€‚æ¯”å¦‚è¿™é‡Œå¯¹äºç›¸åŒå±æ€§çš„è®¾ç½®ï¼ŒReact åªä¼šä¸ºå…¶ä¿ç•™æœ€åä¸€æ¬¡çš„æ›´æ–°ï¼‰ã€‚</p><h2 id="react-ä¸­æœ‰ä½¿ç”¨è¿‡-getdefaultprops-å—-å®ƒæœ‰ä»€ä¹ˆä½œç”¨" tabindex="-1">React ä¸­æœ‰ä½¿ç”¨è¿‡ getDefaultProps å—ï¼Ÿå®ƒæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ <a class="header-anchor" href="#react-ä¸­æœ‰ä½¿ç”¨è¿‡-getdefaultprops-å—-å®ƒæœ‰ä»€ä¹ˆä½œç”¨" aria-hidden="true">#</a></h2><p>é€šè¿‡å®ç°ç»„ä»¶çš„ getDefaultPropsï¼Œå¯¹å±æ€§è®¾ç½®é»˜è®¤å€¼ï¼ˆES5 çš„å†™æ³•ï¼‰ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">ShowTitle</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createClass</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">getDefaultProps</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;React&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> () {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">title</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">var</span><span style="color:#B392F0;"> ShowTitle </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">React</span><span style="color:#B392F0;">.createClass({</span></span>
<span class="line"><span style="color:#B392F0;">  getDefaultProps</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> () {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      title</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;React&quot;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  render</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> () {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;{</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.title}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="react-ä¸­-setstate-çš„ç¬¬äºŒä¸ªå‚æ•°ä½œç”¨æ˜¯ä»€ä¹ˆ" tabindex="-1">React ä¸­ setState çš„ç¬¬äºŒä¸ªå‚æ•°ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#react-ä¸­-setstate-çš„ç¬¬äºŒä¸ªå‚æ•°ä½œç”¨æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a></h2><p><code>setState</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å°†åœ¨ç»„ä»¶é‡æ–°æ¸²æŸ“åæ‰§è¡Œã€‚ç­‰ä»·äºåœ¨ <code>componentDidUpdate</code> ç”Ÿå‘½å‘¨æœŸå†…æ‰§è¡Œã€‚é€šå¸¸å»ºè®®ä½¿ç”¨ <code>componentDidUpdate</code> æ¥ä»£æ›¿æ­¤æ–¹å¼ã€‚åœ¨è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ä½ å¯ä»¥æ‹¿åˆ°æ›´æ–°å <code>state</code> çš„å€¼ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">key1</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">newState1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">key2</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">newState2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;">}, </span><span style="color:#E06C75;">callback</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯ state æ›´æ–°å®Œæˆåçš„å›è°ƒå‡½æ•°</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">    key1</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> newState1</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    key2</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> newState2</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span></span>
<span class="line"><span style="color:#B392F0;">}</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> callback) </span><span style="color:#6B737C;">// ç¬¬äºŒä¸ªå‚æ•°æ˜¯ state æ›´æ–°å®Œæˆåçš„å›è°ƒå‡½æ•°</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="react-ä¸­çš„-setstate-å’Œ-replacestate-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" tabindex="-1">React ä¸­çš„ setState å’Œ replaceState çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#react-ä¸­çš„-setstate-å’Œ-replacestate-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a></h2><p><strong>ï¼ˆ1ï¼‰setState()</strong> setState()ç”¨äºè®¾ç½®çŠ¶æ€å¯¹è±¡ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">nextState</span><span style="color:#ABB2BF;">[, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">callback</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">setState(object nextState[</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> callback])</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>nextStateï¼Œå°†è¦è®¾ç½®çš„æ–°çŠ¶æ€ï¼Œè¯¥çŠ¶æ€ä¼šå’Œå½“å‰çš„ state åˆå¹¶</li><li>callbackï¼Œå¯é€‰å‚æ•°ï¼Œå›è°ƒå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šåœ¨ setState è®¾ç½®æˆåŠŸï¼Œä¸”ç»„ä»¶é‡æ–°æ¸²æŸ“åè°ƒç”¨ã€‚</li></ul><p>åˆå¹¶ nextState å’Œå½“å‰ stateï¼Œå¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚setState æ˜¯ React äº‹ä»¶å¤„ç†å‡½æ•°ä¸­å’Œè¯·æ±‚å›è°ƒå‡½æ•°ä¸­è§¦å‘ UI æ›´æ–°çš„ä¸»è¦æ–¹æ³•ã€‚</p><p><strong>ï¼ˆ2ï¼‰replaceState()</strong> replaceState()æ–¹æ³•ä¸ setState()ç±»ä¼¼ï¼Œä½†æ˜¯æ–¹æ³•åªä¼šä¿ç•™ nextState ä¸­çŠ¶æ€ï¼ŒåŸ state ä¸åœ¨ nextState ä¸­çš„çŠ¶æ€éƒ½ä¼šè¢«åˆ é™¤ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#61AFEF;">replaceState</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">nextState</span><span style="color:#ABB2BF;">[, </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">callback</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">replaceState(object nextState[</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> callback])</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>nextStateï¼Œå°†è¦è®¾ç½®çš„æ–°çŠ¶æ€ï¼Œè¯¥çŠ¶æ€ä¼šæ›¿æ¢å½“å‰çš„ stateã€‚</li><li>callbackï¼Œå¯é€‰å‚æ•°ï¼Œå›è°ƒå‡½æ•°ã€‚è¯¥å‡½æ•°ä¼šåœ¨ replaceState è®¾ç½®æˆåŠŸï¼Œä¸”ç»„ä»¶é‡æ–°æ¸²æŸ“åè°ƒç”¨ã€‚</li></ul><p><strong>æ€»ç»“ï¼š</strong> setState æ˜¯ä¿®æ”¹å…¶ä¸­çš„éƒ¨åˆ†çŠ¶æ€ï¼Œç›¸å½“äº Object.assignï¼Œåªæ˜¯è¦†ç›–ï¼Œä¸ä¼šå‡å°‘åŸæ¥çš„çŠ¶æ€ã€‚è€Œ replaceState æ˜¯å®Œå…¨æ›¿æ¢åŸæ¥çš„çŠ¶æ€ï¼Œç›¸å½“äºèµ‹å€¼ï¼Œå°†åŸæ¥çš„ state æ›¿æ¢ä¸ºå¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ–°çŠ¶æ€å±æ€§å‡å°‘ï¼Œé‚£ä¹ˆ state ä¸­å°±æ²¡æœ‰è¿™ä¸ªçŠ¶æ€äº†ã€‚</p><h2 id="åœ¨-react-ä¸­ç»„ä»¶çš„-this-state-å’Œ-setstate-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1">åœ¨ React ä¸­ç»„ä»¶çš„ this.state å’Œ setState æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#åœ¨-react-ä¸­ç»„ä»¶çš„-this-state-å’Œ-setstate-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a></h2><p>this.state é€šå¸¸æ˜¯ç”¨æ¥åˆå§‹åŒ– state çš„ï¼Œthis.setState æ˜¯ç”¨æ¥ä¿®æ”¹ state å€¼çš„ã€‚å¦‚æœåˆå§‹åŒ–äº† state ä¹‹åå†ä½¿ç”¨ this.stateï¼Œä¹‹å‰çš„ state ä¼šè¢«è¦†ç›–æ‰ï¼Œå¦‚æœä½¿ç”¨ this.setStateï¼Œåªä¼šæ›¿æ¢æ‰ç›¸åº”çš„ state å€¼ã€‚æ‰€ä»¥ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ state çš„å€¼ï¼Œå°±éœ€è¦ä½¿ç”¨ setStateï¼Œè€Œä¸èƒ½ç›´æ¥ä¿®æ”¹ stateï¼Œç›´æ¥ä¿®æ”¹ state ä¹‹åé¡µé¢æ˜¯ä¸ä¼šæ›´æ–°çš„ã€‚</p><h2 id="state-æ˜¯æ€ä¹ˆæ³¨å…¥åˆ°ç»„ä»¶çš„-ä»-reducer-åˆ°ç»„ä»¶ç»å†äº†ä»€ä¹ˆæ ·çš„è¿‡ç¨‹" tabindex="-1">state æ˜¯æ€ä¹ˆæ³¨å…¥åˆ°ç»„ä»¶çš„ï¼Œä» reducer åˆ°ç»„ä»¶ç»å†äº†ä»€ä¹ˆæ ·çš„è¿‡ç¨‹ <a class="header-anchor" href="#state-æ˜¯æ€ä¹ˆæ³¨å…¥åˆ°ç»„ä»¶çš„-ä»-reducer-åˆ°ç»„ä»¶ç»å†äº†ä»€ä¹ˆæ ·çš„è¿‡ç¨‹" aria-hidden="true">#</a></h2><p>é€šè¿‡ connect å’Œ mapStateToProps å°† state æ³¨å…¥åˆ°ç»„ä»¶ä¸­ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">connect</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;react-redux&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">setVisibilityFilter</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;@/reducers/Todo/actions&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Link</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;@/containers/Todo/components/Link&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">mapStateToProps</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">state</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">ownProps</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">active</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">ownProps</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">filter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">visibilityFilter</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">mapDispatchToProps</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">dispatch</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">ownProps</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> ({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setFilter</span><span style="color:#ABB2BF;">: () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">dispatch</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">setVisibilityFilter</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ownProps</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">filter</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">connect</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">mapStateToProps</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">mapDispatchToProps</span><span style="color:#ABB2BF;">)(</span><span style="color:#E06C75;">Link</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { connect } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;react-redux&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { setVisibilityFilter } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;@/reducers/Todo/actions&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> Link </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;@/containers/Todo/components/Link&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> mapStateToProps </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> (state</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ownProps) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> ({</span></span>
<span class="line"><span style="color:#B392F0;">  active</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">ownProps</span><span style="color:#B392F0;">.filter </span><span style="color:#F97583;">===</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.visibilityFilter</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> mapDispatchToProps </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> (dispatch</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ownProps) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> ({</span></span>
<span class="line"><span style="color:#B392F0;">  setFilter</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    dispatch(setVisibilityFilter(</span><span style="color:#79B8FF;">ownProps</span><span style="color:#B392F0;">.filter));</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> connect(mapStateToProps</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> mapDispatchToProps)(Link);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œactive å°±æ˜¯æ³¨å…¥åˆ° Link ç»„ä»¶ä¸­çš„çŠ¶æ€ã€‚ mapStateToPropsï¼ˆstateï¼ŒownPropsï¼‰ä¸­å¸¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå«ä¹‰æ˜¯ âˆ¶</p><ul><li>state-store ç®¡ç†çš„å…¨å±€çŠ¶æ€å¯¹è±¡ï¼Œæ‰€æœ‰éƒ½ç»„ä»¶çŠ¶æ€æ•°æ®éƒ½å­˜å‚¨åœ¨è¯¥å¯¹è±¡ä¸­ã€‚</li><li>ownProps ç»„ä»¶é€šè¿‡ props ä¼ å…¥çš„å‚æ•°ã€‚</li></ul><p><strong>reducer åˆ°ç»„ä»¶ç»å†çš„è¿‡ç¨‹ï¼š</strong></p><ul><li>reducer å¯¹ action å¯¹è±¡å¤„ç†ï¼Œæ›´æ–°ç»„ä»¶çŠ¶æ€ï¼Œå¹¶å°†æ–°çš„çŠ¶æ€å€¼è¿”å› storeã€‚</li><li>é€šè¿‡ connectï¼ˆmapStateToPropsï¼ŒmapDispatchToPropsï¼‰ï¼ˆComponentï¼‰å¯¹ç»„ä»¶ Component è¿›è¡Œå‡çº§ï¼Œæ­¤æ—¶å°†çŠ¶æ€å€¼ä» store å–å‡ºå¹¶ä½œä¸º props å‚æ•°ä¼ é€’åˆ°ç»„ä»¶ã€‚</li></ul><p><strong>é«˜é˜¶ç»„ä»¶å®ç°æºç  âˆ¶</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">React</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;react&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">PropTypes</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;prop-types&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é«˜é˜¶ç»„ä»¶ contect</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">connect</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">mapStateToProps</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">mapDispatchToProps</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">WrappedComponent</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Connect</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// é€šè¿‡å¯¹contextè°ƒç”¨è·å–store</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">contextTypes</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">PropTypes</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">object</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">constructor</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">allProps</span><span style="color:#ABB2BF;">: {},</span></span>
<span class="line"><span style="color:#ABB2BF;">        };</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// ç¬¬ä¸€ééœ€åˆå§‹åŒ–æ‰€æœ‰ç»„ä»¶åˆå§‹çŠ¶æ€</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">componentWillMount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">_updateProps</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">subscribe</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">_updateProps</span><span style="color:#ABB2BF;">()); </span><span style="color:#7F848E;font-style:italic;">// åŠ å…¥_updateProps()è‡³storeé‡Œçš„ç›‘å¬äº‹ä»¶åˆ—è¡¨</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// æ‰§è¡Œactionåæ›´æ–°propsï¼Œä½¿ç»„ä»¶å¯ä»¥æ›´æ–°è‡³æœ€æ–°çŠ¶æ€ï¼ˆç±»ä¼¼äºsetStateï¼‰</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">_updateProps</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">store</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">stateProps</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mapStateToProps</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">mapStateToProps</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getState</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {}; </span><span style="color:#7F848E;font-style:italic;">// é˜²æ­¢ mapStateToProps æ²¡æœ‰ä¼ å…¥</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">dispatchProps</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mapDispatchToProps</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">mapDispatchToProps</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dispatch</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">dispatch</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">store</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">dispatch</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            }; </span><span style="color:#7F848E;font-style:italic;">// é˜²æ­¢ mapDispatchToProps æ²¡æœ‰ä¼ å…¥</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">allProps</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">            ...</span><span style="color:#E06C75;">stateProps</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            ...</span><span style="color:#E06C75;">dispatchProps</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            ...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E5C07B;">WrappedComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">{</span><span style="color:#ABB2BF;">...</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">allProps</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;"> /&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Connect</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> React </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;react&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> PropTypes </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;prop-types&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// é«˜é˜¶ç»„ä»¶ contect</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">connect</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#B392F0;">  (mapStateToProps</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> mapDispatchToProps) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> (WrappedComponent) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">class</span><span style="color:#B392F0;"> Connect </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// é€šè¿‡å¯¹contextè°ƒç”¨è·å–store</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">static</span><span style="color:#B392F0;"> contextTypes </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        store</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">PropTypes</span><span style="color:#B392F0;">.object</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">      };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">constructor</span><span style="color:#B392F0;">() {</span></span>
<span class="line"><span style="color:#B392F0;">        super();</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.state </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">          allProps</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> {}</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">        };</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// ç¬¬ä¸€ééœ€åˆå§‹åŒ–æ‰€æœ‰ç»„ä»¶åˆå§‹çŠ¶æ€</span></span>
<span class="line"><span style="color:#B392F0;">      componentWillMount() {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">store</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">context</span><span style="color:#B392F0;">.store;</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">._updateProps();</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">store</span><span style="color:#B392F0;">.subscribe(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">._updateProps()); </span><span style="color:#6B737C;">// åŠ å…¥_updateProps()è‡³storeé‡Œçš„ç›‘å¬äº‹ä»¶åˆ—è¡¨</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// æ‰§è¡Œactionåæ›´æ–°propsï¼Œä½¿ç»„ä»¶å¯ä»¥æ›´æ–°è‡³æœ€æ–°çŠ¶æ€ï¼ˆç±»ä¼¼äºsetStateï¼‰</span></span>
<span class="line"><span style="color:#B392F0;">      _updateProps() {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">store</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">context</span><span style="color:#B392F0;">.store;</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">let</span><span style="color:#B392F0;"> stateProps </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> mapStateToProps</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">?</span><span style="color:#B392F0;"> mapStateToProps(</span><span style="color:#79B8FF;">store</span><span style="color:#B392F0;">.getState()</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props)</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> {}; </span><span style="color:#6B737C;">// é˜²æ­¢ mapStateToProps æ²¡æœ‰ä¼ å…¥</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">let</span><span style="color:#B392F0;"> dispatchProps </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> mapDispatchToProps</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">?</span><span style="color:#B392F0;"> mapDispatchToProps(</span><span style="color:#79B8FF;">store</span><span style="color:#B392F0;">.dispatch</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props)</span></span>
<span class="line"><span style="color:#B392F0;">          </span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">              dispatch</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">store</span><span style="color:#B392F0;">.dispatch</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            }; </span><span style="color:#6B737C;">// é˜²æ­¢ mapDispatchToProps æ²¡æœ‰ä¼ å…¥</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.setState({</span></span>
<span class="line"><span style="color:#B392F0;">          allProps</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">stateProps</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">dispatchProps</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">            </span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.props</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">          }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">        });</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">      render() {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#79B8FF;">WrappedComponent</span><span style="color:#B392F0;"> {</span><span style="color:#F97583;">...</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.allProps} /&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">      }</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> Connect;</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="react-ç»„ä»¶çš„-state-å’Œ-props-æœ‰ä»€ä¹ˆåŒºåˆ«" tabindex="-1">React ç»„ä»¶çš„ state å’Œ props æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ <a class="header-anchor" href="#react-ç»„ä»¶çš„-state-å’Œ-props-æœ‰ä»€ä¹ˆåŒºåˆ«" aria-hidden="true">#</a></h2><p><strong>ï¼ˆ1ï¼‰props</strong></p><p>props æ˜¯ä¸€ä¸ªä»å¤–éƒ¨ä¼ è¿›ç»„ä»¶çš„å‚æ•°ï¼Œä¸»è¦ä½œä¸ºå°±æ˜¯ä»çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œå®ƒå…·æœ‰å¯è¯»æ€§å’Œä¸å˜æ€§ï¼Œåªèƒ½é€šè¿‡å¤–éƒ¨ç»„ä»¶ä¸»åŠ¨ä¼ å…¥æ–°çš„ props æ¥é‡æ–°æ¸²æŸ“å­ç»„ä»¶ï¼Œå¦åˆ™å­ç»„ä»¶çš„ props ä»¥åŠå±•ç°å½¢å¼ä¸ä¼šæ”¹å˜ã€‚</p><p><strong>ï¼ˆ2ï¼‰state</strong></p><p>state çš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºç»„ä»¶ä¿å­˜ã€æ§åˆ¶ä»¥åŠä¿®æ”¹è‡ªå·±çš„çŠ¶æ€ï¼Œå®ƒåªèƒ½åœ¨ constructor ä¸­åˆå§‹åŒ–ï¼Œå®ƒç®—æ˜¯ç»„ä»¶çš„ç§æœ‰å±æ€§ï¼Œä¸å¯é€šè¿‡å¤–éƒ¨è®¿é—®å’Œä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡ç»„ä»¶å†…éƒ¨çš„ this.setState æ¥ä¿®æ”¹ï¼Œä¿®æ”¹ state å±æ€§ä¼šå¯¼è‡´ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚</p><p><strong>ï¼ˆ3ï¼‰åŒºåˆ«</strong></p><ul><li>props æ˜¯ä¼ é€’ç»™ç»„ä»¶çš„ï¼ˆç±»ä¼¼äºå‡½æ•°çš„å½¢å‚ï¼‰ï¼Œè€Œ state æ˜¯åœ¨ç»„ä»¶å†…è¢«ç»„ä»¶è‡ªå·±ç®¡ç†çš„ï¼ˆç±»ä¼¼äºåœ¨ä¸€ä¸ªå‡½æ•°å†…å£°æ˜çš„å˜é‡ï¼‰ã€‚</li><li>props æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œæ‰€æœ‰ React ç»„ä»¶éƒ½å¿…é¡»åƒçº¯å‡½æ•°ä¸€æ ·ä¿æŠ¤å®ƒä»¬çš„ props ä¸è¢«æ›´æ”¹ã€‚</li><li>state æ˜¯åœ¨ç»„ä»¶ä¸­åˆ›å»ºçš„ï¼Œä¸€èˆ¬åœ¨ constructor ä¸­åˆå§‹åŒ– stateã€‚state æ˜¯å¤šå˜çš„ã€å¯ä»¥ä¿®æ”¹ï¼Œæ¯æ¬¡ setState éƒ½å¼‚æ­¥æ›´æ–°çš„ã€‚</li></ul><h2 id="react-ä¸­çš„-props-ä¸ºä»€ä¹ˆæ˜¯åªè¯»çš„" tabindex="-1">React ä¸­çš„ props ä¸ºä»€ä¹ˆæ˜¯åªè¯»çš„ï¼Ÿ <a class="header-anchor" href="#react-ä¸­çš„-props-ä¸ºä»€ä¹ˆæ˜¯åªè¯»çš„" aria-hidden="true">#</a></h2><p><code>this.props</code>æ˜¯ç»„ä»¶ä¹‹é—´æ²Ÿé€šçš„ä¸€ä¸ªæ¥å£ï¼ŒåŸåˆ™ä¸Šæ¥è®²ï¼Œå®ƒåªèƒ½ä»çˆ¶ç»„ä»¶æµå‘å­ç»„ä»¶ã€‚React å…·æœ‰æµ“é‡çš„å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ã€‚</p><p>æåˆ°å‡½æ•°å¼ç¼–ç¨‹å°±è¦æä¸€ä¸ªæ¦‚å¿µï¼šçº¯å‡½æ•°ã€‚å®ƒæœ‰å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>ç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒçš„è¾“å‡ºã€‚</li><li>è¿‡ç¨‹æ²¡æœ‰å‰¯ä½œç”¨ã€‚</li><li>ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ã€‚</li></ul><p><code>this.props</code>å°±æ˜¯æ±²å–äº†çº¯å‡½æ•°çš„æ€æƒ³ã€‚props çš„ä¸å¯ä»¥å˜æ€§å°±ä¿è¯çš„ç›¸åŒçš„è¾“å…¥ï¼Œé¡µé¢æ˜¾ç¤ºçš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨</p><h2 id="åœ¨-react-ä¸­ç»„ä»¶çš„-props-æ”¹å˜æ—¶æ›´æ–°ç»„ä»¶çš„æœ‰å“ªäº›æ–¹æ³•" tabindex="-1">åœ¨ React ä¸­ç»„ä»¶çš„ props æ”¹å˜æ—¶æ›´æ–°ç»„ä»¶çš„æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ <a class="header-anchor" href="#åœ¨-react-ä¸­ç»„ä»¶çš„-props-æ”¹å˜æ—¶æ›´æ–°ç»„ä»¶çš„æœ‰å“ªäº›æ–¹æ³•" aria-hidden="true">#</a></h2><p>åœ¨ä¸€ä¸ªç»„ä»¶ä¼ å…¥çš„ props æ›´æ–°æ—¶é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶å¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨<code>componentWillReceiveProps</code>ä¸­å°†æ–°çš„ props æ›´æ–°åˆ°ç»„ä»¶çš„ state ä¸­ï¼ˆè¿™ç§ state è¢«æˆä¸ºæ´¾ç”ŸçŠ¶æ€ï¼ˆDerived Stateï¼‰ï¼‰ï¼Œä»è€Œå®ç°é‡æ–°æ¸²æŸ“ã€‚React 16.3 ä¸­è¿˜å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é’©å­å‡½æ•°<code>getDerivedStateFromProps</code>æ¥ä¸“é—¨å®ç°è¿™ä¸€éœ€æ±‚ã€‚</p><p><strong>ï¼ˆ1ï¼‰componentWillReceivePropsï¼ˆå·²åºŸå¼ƒï¼‰</strong></p><p>åœ¨ react çš„ componentWillReceiveProps(nextProps)ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œå¯ä»¥åœ¨å­ç»„ä»¶çš„ render å‡½æ•°æ‰§è¡Œå‰ï¼Œé€šè¿‡ this.props è·å–æ—§çš„å±æ€§ï¼Œé€šè¿‡ nextProps è·å–æ–°çš„ propsï¼Œå¯¹æ¯”ä¸¤æ¬¡ props æ˜¯å¦ç›¸åŒï¼Œä»è€Œæ›´æ–°å­ç»„ä»¶è‡ªå·±çš„ stateã€‚</p><p>è¿™æ ·çš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥å°†æ•°æ®è¯·æ±‚æ”¾åœ¨è¿™é‡Œè¿›è¡Œæ‰§è¡Œï¼Œéœ€è¦ä¼ çš„å‚æ•°åˆ™ä» componentWillReceiveProps(nextProps)ä¸­è·å–ã€‚è€Œä¸å¿…å°†æ‰€æœ‰çš„è¯·æ±‚éƒ½æ”¾åœ¨çˆ¶ç»„ä»¶ä¸­ã€‚äºæ˜¯è¯¥è¯·æ±‚åªä¼šåœ¨è¯¥ç»„ä»¶æ¸²æŸ“æ—¶æ‰ä¼šå‘å‡ºï¼Œä»è€Œå‡è½»è¯·æ±‚è´Ÿæ‹…ã€‚</p><p><strong>ï¼ˆ2ï¼‰getDerivedStateFromPropsï¼ˆ16.3 å¼•å…¥ï¼‰</strong></p><p>è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸ºäº†æ›¿ä»£<code>componentWillReceiveProps</code>å­˜åœ¨çš„ï¼Œæ‰€ä»¥åœ¨éœ€è¦ä½¿ç”¨<code>componentWillReceiveProps</code>æ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨<code>getDerivedStateFromProps</code>æ¥è¿›è¡Œæ›¿ä»£ã€‚</p><p>ä¸¤è€…çš„å‚æ•°æ˜¯ä¸ç›¸åŒçš„ï¼Œè€Œ<code>getDerivedStateFromProps</code>æ˜¯ä¸€ä¸ªé™æ€å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå‡½æ•°ä¸èƒ½é€šè¿‡ this è®¿é—®åˆ° class çš„å±æ€§ï¼Œä¹Ÿå¹¶ä¸æ¨èç›´æ¥è®¿é—®å±æ€§ã€‚è€Œæ˜¯åº”è¯¥é€šè¿‡å‚æ•°æä¾›çš„ nextProps ä»¥åŠ prevState æ¥è¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ®æ–°ä¼ å…¥çš„ props æ¥æ˜ å°„åˆ° stateã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>å¦‚æœ props ä¼ å…¥çš„å†…å®¹ä¸éœ€è¦å½±å“åˆ°ä½ çš„ stateï¼Œé‚£ä¹ˆå°±éœ€è¦è¿”å›ä¸€ä¸ª null</strong>ï¼Œè¿™ä¸ªè¿”å›å€¼æ˜¯å¿…é¡»çš„ï¼Œæ‰€ä»¥å°½é‡å°†å…¶å†™åˆ°å‡½æ•°çš„æœ«å°¾ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#E06C75;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getDerivedStateFromProps</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">nextProps</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">prevState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E5C07B;">type</span><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">nextProps</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// å½“ä¼ å…¥çš„typeå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ›´æ–°state</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!==</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">prevState</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">type</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        };</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// å¦åˆ™ï¼Œå¯¹äºstateä¸è¿›è¡Œä»»ä½•æ“ä½œ</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">static getDerivedStateFromProps(nextProps</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> prevState) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> {</span><span style="color:#79B8FF;">type</span><span style="color:#B392F0;">} </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> nextProps;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// å½“ä¼ å…¥çš„typeå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæ›´æ–°state</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">if</span><span style="color:#B392F0;"> (type </span><span style="color:#F97583;">!==</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">prevState</span><span style="color:#B392F0;">.type) {</span></span>
<span class="line"><span style="color:#B392F0;">        </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">            type</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">        };</span></span>
<span class="line"><span style="color:#B392F0;">    }</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// å¦åˆ™ï¼Œå¯¹äºstateä¸è¿›è¡Œä»»ä½•æ“ä½œ</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="react-ä¸­æ€ä¹ˆæ£€éªŒ-props-éªŒè¯-props-çš„ç›®çš„æ˜¯ä»€ä¹ˆ" tabindex="-1">React ä¸­æ€ä¹ˆæ£€éªŒ propsï¼ŸéªŒè¯ props çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#react-ä¸­æ€ä¹ˆæ£€éªŒ-props-éªŒè¯-props-çš„ç›®çš„æ˜¯ä»€ä¹ˆ" aria-hidden="true">#</a></h2><p><strong>React</strong>ä¸ºæˆ‘ä»¬æä¾›äº†<strong>PropTypes</strong>ä»¥ä¾›éªŒè¯ä½¿ç”¨ã€‚å½“æˆ‘ä»¬å‘<strong>Props</strong>ä¼ å…¥çš„æ•°æ®æ— æ•ˆï¼ˆå‘ Props ä¼ å…¥çš„æ•°æ®ç±»å‹å’ŒéªŒè¯çš„æ•°æ®ç±»å‹ä¸ç¬¦ï¼‰å°±ä¼šåœ¨æ§åˆ¶å°å‘å‡ºè­¦å‘Šä¿¡æ¯ã€‚å®ƒå¯ä»¥é¿å…éšç€åº”ç”¨è¶Šæ¥è¶Šå¤æ‚ä»è€Œå‡ºç°çš„é—®é¢˜ã€‚å¹¶ä¸”ï¼Œå®ƒè¿˜å¯ä»¥è®©ç¨‹åºå˜å¾—æ›´æ˜“è¯»ã€‚</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">PropTypes</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;prop-types&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Greeting</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">React</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Component</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">render</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello, </span><span style="color:#C678DD;">{</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Greeting</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">propTypes</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">PropTypes</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> PropTypes </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;prop-types&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#B392F0;"> Greeting </span><span style="color:#F97583;">extends</span><span style="color:#B392F0;"> React.Component {</span></span>
<span class="line"><span style="color:#B392F0;">  render() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello, {</span><span style="color:#79B8FF;">this</span><span style="color:#B392F0;">.</span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;">.name}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">Greeting</span><span style="color:#B392F0;">.propTypes </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">PropTypes</span><span style="color:#B392F0;">.string</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å½“ç„¶ï¼Œå¦‚æœé¡¹ç›®æ±‡ä¸­ä½¿ç”¨äº† TypeScriptï¼Œé‚£ä¹ˆå°±å¯ä»¥ä¸ç”¨ PropTypes æ¥æ ¡éªŒï¼Œè€Œä½¿ç”¨ TypeScript å®šä¹‰æ¥å£æ¥æ ¡éªŒ propsã€‚</p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-24d2ee3f data-v-8dc25fc0><div class="edit-info" data-v-8dc25fc0><div class="edit-link" data-v-8dc25fc0><a class="VPLink link edit-link-button" href="https://github.com/Sunny-117/blog" target="_blank" rel="noreferrer" data-v-8dc25fc0 data-v-4aa6d729><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-8dc25fc0><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on Gitlab<!--]--><!----></a></div><div class="last-updated" data-v-8dc25fc0><p class="VPLastUpdated" data-v-8dc25fc0 data-v-446364c7>Last Updated: <time datetime="2023-02-01T12:11:48.000Z" data-v-446364c7></time></p></div></div><div class="prev-next" data-v-8dc25fc0><div class="pager" data-v-8dc25fc0><a class="pager-link prev" href="/blog/react/" data-v-8dc25fc0><span class="desc" data-v-8dc25fc0>Previous page</span><span class="title" data-v-8dc25fc0>React onePage</span></a></div><div class="has-prev pager" data-v-8dc25fc0><a class="pager-link next" href="/blog/react/hooks.html" data-v-8dc25fc0><span class="desc" data-v-8dc25fc0>Next page</span><span class="title" data-v-8dc25fc0>React Hooks</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-110af560 data-v-1d7d15a8><div class="container" data-v-1d7d15a8><!----><p class="copyright" data-v-1d7d15a8>Copyright Â© 2022-present sunny-117</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"front-end-engineering_performance.md\":\"1055fefe\",\"fe-utils_ä½ çš„å‰ç«¯å¼€å‘å°åŠ©æ‰‹.md\":\"b82221cc\",\"fe-utils_ä¸“ä¸šå‰ç«¯å·¥ç¨‹å¸ˆçš„æµè§ˆå™¨æ”¶è—å¤¹.md\":\"d7ec73de\",\"front-end-engineering_jscompatibility.md\":\"e0040137\",\"getting-started.md\":\"afdd79a0\",\"front-end-engineering_webpack5.md\":\"b93277f2\",\"fe-utils_jså·¥å…·åº“.md\":\"8c8ba537\",\"front-end-engineering_pnpmåŸç†.md\":\"c7bd1364\",\"front-end-engineering_modularization.md\":\"bfcc5673\",\"algorithm_ğŸ”¥åˆ·é¢˜ä¹‹æ¢ç´¢æœ€ä¼˜è§£.md\":\"3a62d747\",\"front-end-engineering_git.md\":\"93c00f69\",\"front-end-engineering_packagemanager.md\":\"91503858\",\"front-end-engineering_webpackå¸¸ç”¨æ‹“å±•.md\":\"c329b533\",\"front-end-engineering_csså·¥ç¨‹åŒ–.md\":\"b0534ba6\",\"html-css_html.md\":\"f2a5ff21\",\"html-css_drag.md\":\"f947c287\",\"html-css_principle.md\":\"637ce402\",\"html-css_canvas-svg.md\":\"c73e4cab\",\"html-css_animation.md\":\"420750f0\",\"index.md\":\"0f1bbd2a\",\"html-css_temop.md\":\"bb2470b4\",\"interview_é¢è¯•å®˜ï¼šä½ è¿˜æœ‰é—®é¢˜è¦é—®æˆ‘å—.md\":\"cf9193ff\",\"js_index.md\":\"85475c7a\",\"interview_ç®—æ³•ç¬”è¯•.md\":\"08f4590b\",\"html-css_css.md\":\"1e343ec5\",\"html-css_selector.md\":\"7a6fb575\",\"js_ä»£ç†ä¸åå°„.md\":\"cf075029\",\"html-css_interview.md\":\"86993f2e\",\"react_fiber.md\":\"356e28e1\",\"react_component-communication.md\":\"3e51ac17\",\"react_redux.md\":\"50b9e2fa\",\"react_event.md\":\"c404ab54\",\"react_dva.md\":\"9695a5ac\",\"react_hooks.md\":\"c3342532\",\"react_reactrouter.md\":\"546761e8\",\"js_è¿­ä»£å™¨å’Œç”Ÿæˆå™¨.md\":\"0ef35adc\",\"react_context.md\":\"337913e8\",\"react_lifecycle.md\":\"9417fbfc\",\"react_index.md\":\"5e428784\",\"react_react-redux-router.md\":\"42c66838\",\"js_å¼‚æ­¥å¤„ç†.md\":\"0ce01a8e\",\"react_transition.md\":\"c4689e15\",\"react_utils.md\":\"a83fc3ff\",\"react_umi.md\":\"c28ba311\",\"react_render.md\":\"3585eda1\",\"vue_ssr.md\":\"b063161e\",\"vue_computed.md\":\"a736eb27\",\"vue_component-communication.md\":\"bedc9c79\",\"react_react-interview.md\":\"12f4d43a\",\"vue_keep-alive-lru.md\":\"9e49772a\",\"vue_interviewer.md\":\"49f9cadd\",\"vue_directive.md\":\"8e487eea\",\"vue_slot.md\":\"69c3e9bf\",\"vue_nexttick.md\":\"d27bf40f\",\"vue_v-model.md\":\"8523a2b1\",\"vue_index.md\":\"3adf0453\",\"vue_reactive-v3.md\":\"b849a60e\",\"vue_vue-cli.md\":\"e0b93894\",\"vue_vs.md\":\"9d22290d\",\"vue_lifecycle.md\":\"715adfc6\",\"vue_reactive.md\":\"c56e56af\",\"vue_vue-compile.md\":\"d73d253a\",\"vue_diff.md\":\"e45734a5\",\"vue_vdom.md\":\"3a5e050b\",\"vue_vue-interview.md\":\"7f105493\",\"vue_vue-router.md\":\"722fb79a\",\"vue_vuex.md\":\"72b4c007\",\"ts_typescript-onepage.md\":\"7a3c2617\",\"vue_vue3-onepage.md\":\"d7d3291d\"}")</script>
    <script type="module" async src="/blog/assets/app.8207ecbb.js"></script>
    
  </body>
</html>