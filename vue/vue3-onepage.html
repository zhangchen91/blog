<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3 onePage | blog</title>
    <meta name="description" content="composition api form validator for vue">
    <link rel="stylesheet" href="/blog/assets/style.208d2b36.css">
    <link rel="modulepreload" href="/blog/assets/app.8207ecbb.js">
    <link rel="modulepreload" href="/blog/assets/vue_vue3-onepage.md.18b88cfb.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-110af560><!--[--><!--]--><!--[--><span tabindex="-1" data-v-b84e82df></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-b84e82df> Skip to content </a><!--]--><!----><header class="VPNav" data-v-110af560 data-v-ee214162><div class="VPNavBar has-sidebar" data-v-ee214162 data-v-badb2c5b><div class="container" data-v-badb2c5b><div class="VPNavBarTitle has-sidebar" data-v-badb2c5b data-v-7f53dfea><a class="title" href="/blog/" data-v-7f53dfea><!--[--><!--]--><!----><!--[-->blog<!--]--><!--[--><!--]--></a></div><div class="content" data-v-badb2c5b><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-badb2c5b data-v-d53ff040><span id="main-nav-aria-label" class="visually-hidden" data-v-d53ff040>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> JavaScript <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/" data-v-9dfa7b1e data-v-4aa6d729><!--[-->JavaScript<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->å¼‚æ­¥å¤„ç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/%E4%BB%A3%E7%90%86%E4%B8%8E%E5%8F%8D%E5%B0%84.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä»£ç†ä¸åå°„<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/js/%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->è¿­ä»£å™¨å’Œç”Ÿæˆå™¨<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> TypeScript <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/ts/TypeScript-onePage.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->TypeScript OnePage<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> å‰ç«¯å·¥ç¨‹åŒ– <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/performance.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->è¿™ä¸€å®šæ˜¯ä½ è§è¿‡æœ€å…¨çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ³•è®º<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/git.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Git<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/webpack%E5%B8%B8%E7%94%A8%E6%8B%93%E5%B1%95.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->webpackå¸¸ç”¨æ‹“å±•<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/CSS%E5%B7%A5%E7%A8%8B%E5%8C%96.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->CSSå·¥ç¨‹åŒ–<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/jscompatibility.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->JS å…¼å®¹æ€§<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/webpack5.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->webpack5<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/pnpm%E5%8E%9F%E7%90%86.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->pnpmåŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/modularization.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->æ¨¡å—åŒ–<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/front-end-engineering/PackageManager.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->åŒ…ç®¡ç†å™¨<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d53ff040 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><!----> Vuejs 22ç¯‡ <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><div class="items" data-v-c394b65e><!--[--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/index.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vuejs OnePage<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-interview.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ Vuejs é¢è¯•é¢˜<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vdom.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->è™šæ‹ŸDOMè¯¦è§£<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/component-communication.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vuejs ç»„ä»¶é€šä¿¡æ¦‚è§ˆ<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/v-model.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->æ¢ç´¢ v-model åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/reactive.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue2 æ•°æ®å“åº”åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/reactive-v3.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue3 æ•°æ®å“åº”åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/diff.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue2 diffç®—æ³•åŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/lifecycle.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue ç”Ÿå‘½å‘¨æœŸ<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/computed.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä½ ä¸çŸ¥é“çš„ computed Vue2<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/keep-alive-LRU.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->keep-alive ä¸ LRU ç®—æ³•<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link active" href="/blog/vue/vue3-onepage.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue3 onePage<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-cli.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->vue-cli åˆ°åº•å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆ<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-compile.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue ç¼–è¯‘å™¨ä¸ºä»€ä¹ˆå¦‚æ­¤å¼ºå¤§<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/nextTick.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->$nextTick å·¥ä½œåŸç†<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vs.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue å’Œ React çš„æ ¸å¿ƒåŒºåˆ«<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/slot.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä¸€ç¯‡ç²¾é€š slot<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/SSR.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue SSR æœåŠ¡ç«¯æ¸²æŸ“<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/directive.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vue æŒ‡ä»¤ç¯‡<!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vue-router.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->VueRouter è·¯ç”±ä»ä½¿ç”¨åˆ°æºç <!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/vuex.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->Vuex æ€æƒ³å’Œæºç <!--]--><!----></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-c394b65e data-v-9dfa7b1e><a class="VPLink link" href="/blog/vue/interviewer.html" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ä»Šå¤©æˆ‘æ˜¯é¢è¯•å®˜<!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-badb2c5b data-v-b0be3cf9 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-2ce07b2d><span class="text" data-v-2ce07b2d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-2ce07b2d><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg>  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-2ce07b2d><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><!----><!--[--><!--[--><div class="items" data-v-b0be3cf9><p class="title" data-v-b0be3cf9>English</p><!--[--><div class="VPMenuLink" data-v-b0be3cf9 data-v-9dfa7b1e><a class="VPLink link" href="https://netlify.app" target="_blank" rel="noreferrer" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ç®€ä½“ä¸­æ–‡<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-4aa6d729><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-badb2c5b data-v-095115f7><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-095115f7 data-v-29b1d827 data-v-bf7c4b07><span class="check" data-v-bf7c4b07><span class="icon" data-v-bf7c4b07><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-29b1d827><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-29b1d827><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-badb2c5b data-v-7774bba7 data-v-80f6e95f><!--[--><a class="VPSocialLink" href="https://github.com/Sunny-117/blog" target="_blank" rel="noopener" data-v-80f6e95f data-v-963f0260><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-badb2c5b data-v-cb2189d2 data-v-2ce07b2d><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-2ce07b2d><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-2ce07b2d><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-2ce07b2d><div class="VPMenu" data-v-2ce07b2d data-v-c394b65e><!----><!--[--><!--[--><div class="group" data-v-cb2189d2><p class="trans-title" data-v-cb2189d2>English</p><!--[--><div class="VPMenuLink" data-v-cb2189d2 data-v-9dfa7b1e><a class="VPLink link" href="https://netlify.app" target="_blank" rel="noreferrer" data-v-9dfa7b1e data-v-4aa6d729><!--[-->ç®€ä½“ä¸­æ–‡<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-4aa6d729><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--></div><div class="group" data-v-cb2189d2><div class="item appearance" data-v-cb2189d2><p class="label" data-v-cb2189d2>Appearance</p><div class="appearance-action" data-v-cb2189d2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-cb2189d2 data-v-29b1d827 data-v-bf7c4b07><span class="check" data-v-bf7c4b07><span class="icon" data-v-bf7c4b07><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-29b1d827><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-29b1d827><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-cb2189d2><div class="item social-links" data-v-cb2189d2><div class="VPSocialLinks social-links-list" data-v-cb2189d2 data-v-80f6e95f><!--[--><a class="VPSocialLink" href="https://github.com/Sunny-117/blog" target="_blank" rel="noopener" data-v-80f6e95f data-v-963f0260><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-badb2c5b data-v-d61f3d22><span class="container" data-v-d61f3d22><span class="top" data-v-d61f3d22></span><span class="middle" data-v-d61f3d22></span><span class="bottom" data-v-d61f3d22></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-110af560 data-v-a2e5b643><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a2e5b643><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-a2e5b643><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-a2e5b643>Menu</span></button><a class="top-link" href="#" data-v-a2e5b643> Return to top </a></div><aside class="VPSidebar" data-v-110af560 data-v-fd5bafd6><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-fd5bafd6><span class="visually-hidden" id="sidebar-aria-label" data-v-fd5bafd6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>Introduction</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/getting-started.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Getting Started</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>JavaScript</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/js/" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>JavaScript</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/js/%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>å¼‚æ­¥å¤„ç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/js/%E4%BB%A3%E7%90%86%E4%B8%8E%E5%8F%8D%E5%B0%84.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä»£ç†ä¸åå°„</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/js/%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup" data-v-fd5bafd6 data-v-540f7de3><div class="title" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>TypeScript</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/ts/TypeScript-onePage.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>TypeScript OnePage</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>å‰ç«¯å·¥ç¨‹åŒ–</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/performance.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è¿™ä¸€å®šæ˜¯ä½ è§è¿‡æœ€å…¨çš„æ€§èƒ½ä¼˜åŒ–æ–¹æ³•è®º</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/git.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Git</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/webpack%E5%B8%B8%E7%94%A8%E6%8B%93%E5%B1%95.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>webpackå¸¸ç”¨æ‹“å±•</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/CSS%E5%B7%A5%E7%A8%8B%E5%8C%96.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSSå·¥ç¨‹åŒ–</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/jscompatibility.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>JS å…¼å®¹æ€§</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/webpack5.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>webpack5</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/pnpm%E5%8E%9F%E7%90%86.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>pnpmåŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/modularization.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ¨¡å—åŒ–</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/front-end-engineering/PackageManager.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>åŒ…ç®¡ç†å™¨</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>Vuejs 22ç¯‡</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/vue/index.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vuejs OnePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-interview.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ Vuejs é¢è¯•é¢˜</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vdom.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è™šæ‹ŸDOMè¯¦è§£</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/component-communication.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vuejs ç»„ä»¶é€šä¿¡æ¦‚è§ˆ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/v-model.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ¢ç´¢ v-model åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/reactive.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue2 æ•°æ®å“åº”åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/reactive-v3.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue3 æ•°æ®å“åº”åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/diff.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue2 diffç®—æ³•åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/lifecycle.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue ç”Ÿå‘½å‘¨æœŸ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/computed.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä½ ä¸çŸ¥é“çš„ computed Vue2</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/keep-alive-LRU.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>keep-alive ä¸ LRU ç®—æ³•</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/blog/vue/vue3-onepage.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue3 onePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-cli.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>vue-cli åˆ°åº•å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-compile.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue ç¼–è¯‘å™¨ä¸ºä»€ä¹ˆå¦‚æ­¤å¼ºå¤§</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/nextTick.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>$nextTick å·¥ä½œåŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vs.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue å’Œ React çš„æ ¸å¿ƒåŒºåˆ«</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/slot.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä¸€ç¯‡ç²¾é€š slot</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/SSR.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue SSR æœåŠ¡ç«¯æ¸²æŸ“</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/directive.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vue æŒ‡ä»¤ç¯‡</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vue-router.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>VueRouter è·¯ç”±ä»ä½¿ç”¨åˆ°æºç </span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/vuex.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Vuex æ€æƒ³å’Œæºç </span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/vue/interviewer.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä»Šå¤©æˆ‘æ˜¯é¢è¯•å®˜</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible collapsed" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>React 16ç¯‡</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/react/" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React onePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/react-interview.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>é‚£äº›å¹´ï¼Œè¢«é—®çƒ‚äº†çš„ React é¢è¯•é¢˜</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/hooks.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React Hooks</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/component-communication.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React ç»„ä»¶é€šä¿¡</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/context.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React Context</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/lifecycle.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React ç”Ÿå‘½å‘¨æœŸ</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/event.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React äº‹ä»¶æœºåˆ¶</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/render.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React æ¸²æŸ“åŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/transition.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React åŠ¨ç”»</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/ReactRouter.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React Router</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/Redux.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>JS åº”ç”¨çš„çŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹çš„çŠ¶æ€ç®¡ç† Redux</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/react-redux-router.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>è§†å›¾-ä»“åº“-è·¯ç”±</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/dva.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>dva è®¾è®¡æ€æƒ³</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/umi.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Umi ä¼ä¸šçº§å‰ç«¯æ¡†æ¶</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/utils.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>React è°ƒè¯•å·¥å…·</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/react/Fiber.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Fiber</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup" data-v-fd5bafd6 data-v-540f7de3><div class="title" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>å‰ç«¯å·¥å…·</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/fe-utils/js%E5%B7%A5%E5%85%B7%E5%BA%93.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>å‰ç«¯ JavaScript å¿…ä¼šå·¥å…·åº“åˆé›†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/fe-utils/%E4%BD%A0%E7%9A%84%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%B0%8F%E5%8A%A9%E6%89%8B.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä½ çš„å‰ç«¯å¼€å‘å°åŠ©æ‰‹</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/fe-utils/%E4%B8%93%E4%B8%9A%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E6%94%B6%E8%97%8F%E5%A4%B9.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ä¸“ä¸šå‰ç«¯å·¥ç¨‹å¸ˆçš„æµè§ˆå™¨æ”¶è—å¤¹</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>algorithm</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/algorithm/%F0%9F%94%A5%E5%88%B7%E9%A2%98%E4%B9%8B%E6%8E%A2%E7%B4%A2%E6%9C%80%E4%BC%98%E8%A7%A3.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ğŸ”¥åˆ·é¢˜ä¹‹æ¢ç´¢æœ€ä¼˜è§£</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>interview</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/interview/%E9%9D%A2%E8%AF%95%E5%AE%98%EF%BC%9A%E4%BD%A0%E8%BF%98%E6%9C%89%E9%97%AE%E9%A2%98%E8%A6%81%E9%97%AE%E6%88%91%E5%90%97.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>é¢è¯•å®˜ï¼šä½ è¿˜æœ‰é—®é¢˜è¦é—®æˆ‘å—</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/interview/%E7%AE%97%E6%B3%95%E7%AC%94%E8%AF%95.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>ç®—æ³•ç¬”è¯•</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-fd5bafd6><section class="VPSidebarGroup collapsible collapsed" data-v-fd5bafd6 data-v-540f7de3><div class="title" role="button" data-v-540f7de3><h2 class="title-text" data-v-540f7de3>HTML-CSS 8ç¯‡</h2><div class="action" data-v-540f7de3><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-540f7de3><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-540f7de3><!--[--><!--[--><a class="VPLink link link" href="/blog/html-css/interview.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>HTML_CSS é¢è¯•é¢˜</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/HTML.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>HTML5 OnePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/CSS.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSS3 OnePage</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/canvas-svg.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>Canvas å’Œ svg</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/animation.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSS3åŠ¨ç”»</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/selector.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>CSS3é€‰æ‹©å™¨</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/principle.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ˜¾ç¤ºå™¨çš„æˆåƒåŸç†</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/blog/html-css/drag.html" style="padding-left:0px;" data-v-c213791e data-v-4aa6d729><!--[--><span class="link-text" data-v-c213791e>æ‹–æ‹½ API</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-110af560 data-v-64d08e6a><div class="VPDoc has-sidebar has-aside" data-v-64d08e6a data-v-24d2ee3f><div class="container" data-v-24d2ee3f><div class="aside" data-v-24d2ee3f><div class="aside-curtain" data-v-24d2ee3f></div><div class="aside-container" data-v-24d2ee3f><div class="aside-content" data-v-24d2ee3f><div class="VPDocAside" data-v-24d2ee3f data-v-c9c58101><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-c9c58101 data-v-955380af><div class="content" data-v-955380af><div class="outline-marker" data-v-955380af></div><div class="outline-title" data-v-955380af>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-955380af><span class="visually-hidden" id="doc-outline-aria-label" data-v-955380af> Table of Contents for current page </span><ul class="root" data-v-955380af data-v-384f799e><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-c9c58101></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-24d2ee3f><div class="content-container" data-v-24d2ee3f><!--[--><!--]--><main class="main" data-v-24d2ee3f><div style="position:relative;" class="vp-doc _blog_vue_vue3-onepage" data-v-24d2ee3f><div><h1 id="vue3-onepage" tabindex="-1">Vue3 onePage <a class="header-anchor" href="#vue3-onepage" aria-hidden="true">#</a></h1><h2 id="createapp" tabindex="-1">createApp <a class="header-anchor" href="#createapp" aria-hidden="true">#</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// vue2</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">options</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨æ’ä»¶ï¼šVue.use()</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">$mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// vue3</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¸å­˜åœ¨æ„é€ å‡½æ•°Vue</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">App</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨æ’ä»¶ï¼šapp.use()</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç®€å†™ï¼šcreateApp(App).mount(&quot;#app&quot;);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Appæ˜¯æ ¹ç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªvueåº”ç”¨</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// vue2</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">app</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Vue(options);</span></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨æ’ä»¶ï¼šVue.use()</span></span>
<span class="line"><span style="color:#79B8FF;">app</span><span style="color:#B392F0;">.$mount(</span><span style="color:#FFAB70;">&quot;#app&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#6B737C;">// vue3</span></span>
<span class="line"><span style="color:#6B737C;">// ä¸å­˜åœ¨æ„é€ å‡½æ•°Vue</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">app</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> createApp(App);</span></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨æ’ä»¶ï¼šapp.use()</span></span>
<span class="line"><span style="color:#79B8FF;">app</span><span style="color:#B392F0;">.mount(</span><span style="color:#FFAB70;">&quot;#app&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#6B737C;">// ç®€å†™ï¼šcreateApp(App).mount(&quot;#app&quot;);</span></span>
<span class="line"><span style="color:#6B737C;">// Appæ˜¯æ ¹ç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªvueåº”ç”¨</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="this-å˜åŒ–-vue3-çš„ç»„ä»¶å®ä¾‹ä»£ç†" tabindex="-1">this å˜åŒ–ï¼švue3 çš„ç»„ä»¶å®ä¾‹ä»£ç† <a class="header-anchor" href="#this-å˜åŒ–-vue3-çš„ç»„ä»¶å®ä¾‹ä»£ç†" aria-hidden="true">#</a></h2><p><img src="/blog/assets/2023-02-01-15-24-12.aec7b73c.png" alt=""></p><h2 id="composition-api-ç»„åˆ-api" tabindex="-1">composition api ç»„åˆ api <a class="header-anchor" href="#composition-api-ç»„åˆ-api" aria-hidden="true">#</a></h2><p>vue2 é…ç½®å¼çš„ï¼Œdata,computed,props,methods,å³ option api</p><p>vue3 å¯¹ ref çš„ç‰¹æ®Šå¤„ç†</p><p><img src="/blog/assets/2023-02-01-15-24-21.dd217b1c.png" alt=""></p><h2 id="å»æ‰äº†-vue-æ„é€ å‡½æ•°" tabindex="-1">å»æ‰äº† Vue æ„é€ å‡½æ•° <a class="header-anchor" href="#å»æ‰äº†-vue-æ„é€ å‡½æ•°" aria-hidden="true">#</a></h2><p>å¯ä»¥æ›´å¥½çš„ tree shaking</p><p>åœ¨è¿‡å»ï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªé¡µé¢æœ‰å¤šä¸ª<code>vue</code>åº”ç”¨æ—¶ï¼Œå¾€å¾€ä¼šé‡åˆ°ä¸€äº›é—®é¢˜</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- vue2 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app1&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app2&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">(...); </span><span style="color:#7F848E;font-style:italic;">// æ­¤ä»£ç ä¼šå½±å“æ‰€æœ‰çš„vueåº”ç”¨</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mixin</span><span style="color:#ABB2BF;">(...); </span><span style="color:#7F848E;font-style:italic;">// æ­¤ä»£ç ä¼šå½±å“æ‰€æœ‰çš„vueåº”ç”¨</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">Vue</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">component</span><span style="color:#ABB2BF;">(...); </span><span style="color:#7F848E;font-style:italic;">// æ­¤ä»£ç ä¼šå½±å“æ‰€æœ‰çš„vueåº”ç”¨</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// å¯èƒ½åªæ˜¯ç¬¬ä¸€ä¸ªéœ€è¦ç”¨æ’ä»¶ï¼Œç¬¬äºŒä¸ªä¸ç”¨ï¼Œä¹‹å‰æ¯«æ— åŠæ³•</span></span>
<span class="line"><span style="color:#ABB2BF;">  	</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// é…ç½®</span></span>
<span class="line"><span style="color:#ABB2BF;">    }).</span><span style="color:#61AFEF;">$mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app1&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Vue</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// é…ç½®</span></span>
<span class="line"><span style="color:#ABB2BF;">    }).</span><span style="color:#61AFEF;">$mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app2&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">&lt;!-- vue2 --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> id</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;app1&quot;</span><span style="color:#B392F0;">&gt;&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> id</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;app2&quot;</span><span style="color:#B392F0;">&gt;&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">Vue</span><span style="color:#B392F0;">.use(</span><span style="color:#F97583;">...</span><span style="color:#B392F0;">); </span><span style="color:#6B737C;">// æ­¤ä»£ç ä¼šå½±å“æ‰€æœ‰çš„vueåº”ç”¨</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">Vue</span><span style="color:#B392F0;">.mixin(</span><span style="color:#F97583;">...</span><span style="color:#B392F0;">); </span><span style="color:#6B737C;">// æ­¤ä»£ç ä¼šå½±å“æ‰€æœ‰çš„vueåº”ç”¨</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">Vue</span><span style="color:#B392F0;">.component(</span><span style="color:#F97583;">...</span><span style="color:#B392F0;">); </span><span style="color:#6B737C;">// æ­¤ä»£ç ä¼šå½±å“æ‰€æœ‰çš„vueåº”ç”¨</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// å¯èƒ½åªæ˜¯ç¬¬ä¸€ä¸ªéœ€è¦ç”¨æ’ä»¶ï¼Œç¬¬äºŒä¸ªä¸ç”¨ï¼Œä¹‹å‰æ¯«æ— åŠæ³•</span></span>
<span class="line"><span style="color:#B392F0;">  	</span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Vue({</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// é…ç½®</span></span>
<span class="line"><span style="color:#B392F0;">    }).$mount(</span><span style="color:#FFAB70;">&quot;#app1&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> Vue({</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#6B737C;">// é…ç½®</span></span>
<span class="line"><span style="color:#B392F0;">    }).$mount(</span><span style="color:#FFAB70;">&quot;#app2&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>åœ¨<code>vue3</code>ä¸­ï¼Œå»æ‰äº†<code>Vue</code>æ„é€ å‡½æ•°ï¼Œè½¬è€Œä½¿ç”¨<code>createApp</code>åˆ›å»º<code>vue</code>åº”ç”¨</p><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- vue3 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app1&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">id</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;app2&quot;</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">div</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">å»äº†vueå®ä¾‹é‡Œé¢</span><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">é“¾å¼ç¼–ç¨‹</span><span style="color:#ABB2BF;">ï¼Œ</span><span style="color:#E06C75;">å› ä¸ºæ¯æ¬¡éƒ½è¿”å›è¿˜æ˜¯å®ä¾‹</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">æ ¹ç»„ä»¶</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">use</span><span style="color:#ABB2BF;">(...).</span><span style="color:#61AFEF;">mixin</span><span style="color:#ABB2BF;">(...).</span><span style="color:#61AFEF;">component</span><span style="color:#ABB2BF;">(...).</span><span style="color:#61AFEF;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app1&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#61AFEF;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">æ ¹ç»„ä»¶</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app2&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">&lt;!-- vue3 --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> id</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;app1&quot;</span><span style="color:#B392F0;">&gt;&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;"> id</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;app2&quot;</span><span style="color:#B392F0;">&gt;&lt;/</span><span style="color:#FFAB70;">div</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  å»äº†vueå®ä¾‹é‡Œé¢      é“¾å¼ç¼–ç¨‹ï¼Œå› ä¸ºæ¯æ¬¡éƒ½è¿”å›è¿˜æ˜¯å®ä¾‹</span></span>
<span class="line"><span style="color:#B392F0;">  createApp(æ ¹ç»„ä»¶).use(</span><span style="color:#F97583;">...</span><span style="color:#B392F0;">).mixin(</span><span style="color:#F97583;">...</span><span style="color:#B392F0;">).component(</span><span style="color:#F97583;">...</span><span style="color:#B392F0;">).mount(</span><span style="color:#FFAB70;">&quot;#app1&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">   createApp(æ ¹ç»„ä»¶).mount(</span><span style="color:#FFAB70;">&quot;#app2&quot;</span><span style="color:#B392F0;">)</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>æ›´å¤š vue åº”ç”¨çš„ apiï¼š<a href="https://v3.vuejs.org/api/application-api.html" target="_blank" rel="noreferrer">https://v3.vu ejs.org/api/application-api.html</a></p></blockquote><h2 id="ç»„ä»¶å®ä¾‹ä¸­çš„-api" tabindex="-1">ç»„ä»¶å®ä¾‹ä¸­çš„ API <a class="header-anchor" href="#ç»„ä»¶å®ä¾‹ä¸­çš„-api" aria-hidden="true">#</a></h2><p>åœ¨<code>vue3</code>ä¸­ï¼Œç»„ä»¶å®ä¾‹æ˜¯ä¸€ä¸ª<code>Proxy</code>ï¼Œå®ƒä»…æä¾›äº†ä¸‹åˆ—æˆå‘˜ï¼ŒåŠŸèƒ½å’Œ<code>vue2</code>ä¸€æ ·</p><p>å±æ€§ï¼š<a href="https://v3.vuejs.org/api/instance-properties.html" target="_blank" rel="noreferrer">https://v3.vuejs.org/api/instance-properties.html</a></p><p>æ–¹æ³•ï¼š<a href="https://v3.vuejs.org/api/instance-methods.html" target="_blank" rel="noreferrer">https://v3.vuejs.org/api/instance-methods.html</a></p><p>åªèƒ½è°ƒç”¨åˆ—è¡¨é‡Œé¢çš„å±æ€§å’Œæ–¹æ³•ï¼Œç§æœ‰çš„å’Œå…¶ä»–çš„ä¸å¯ä»¥è°ƒç”¨</p><h2 id="å¯¹æ¯”æ•°æ®å“åº”å¼" tabindex="-1">å¯¹æ¯”æ•°æ®å“åº”å¼ <a class="header-anchor" href="#å¯¹æ¯”æ•°æ®å“åº”å¼" aria-hidden="true">#</a></h2><p>vue2 å’Œ vue3 å‡åœ¨ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸï¼ˆbeforeCreate åï¼Œcreated ä¹‹å‰ï¼‰å®Œæˆæ•°æ®å“åº”å¼ï¼Œä½†åšæ³•ä¸ä¸€æ ·</p><p><img src="/blog/assets/2023-02-01-15-24-49.74e4a9b8.png" alt=""></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>ä¸ºä»€ä¹ˆ vue3 ä¸­å»æ‰äº† vue æ„é€ å‡½æ•°ï¼Ÿ</p></div><p>vue2 çš„å…¨å±€æ„é€ å‡½æ•°å¸¦æ¥äº†è¯¸å¤šé—®é¢˜ï¼š</p><ol><li>è°ƒç”¨æ„é€ å‡½æ•°çš„é™æ€æ–¹æ³•ä¼šå¯¹æ‰€æœ‰ vue åº”ç”¨ç”Ÿæ•ˆï¼Œä¸åˆ©äºéš”ç¦»ä¸åŒåº”ç”¨</li><li>vue2 çš„æ„é€ å‡½æ•°é›†æˆäº†å¤ªå¤šåŠŸèƒ½ï¼Œä¸åˆ©äº tree shakingï¼Œvue3 æŠŠè¿™äº›åŠŸèƒ½ä½¿ç”¨æ™®é€šå‡½æ•°å¯¼å‡ºï¼Œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨ tree shaking ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯</li><li>vue2 æ²¡æœ‰æŠŠç»„ä»¶å®ä¾‹å’Œ vue åº”ç”¨ä¸¤ä¸ªæ¦‚å¿µåŒºåˆ†å¼€ï¼Œåœ¨ vue2 ä¸­ï¼Œé€šè¿‡ new Vue åˆ›å»ºçš„å¯¹è±¡ï¼Œæ—¢æ˜¯ä¸€ä¸ª vue åº”ç”¨ï¼ŒåŒæ—¶åˆæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ vue ç»„ä»¶ã€‚vue3 ä¸­ï¼ŒæŠŠä¸¤ä¸ªæ¦‚å¿µåŒºåˆ«å¼€æ¥ï¼Œé€šè¿‡ createApp åˆ›å»ºçš„å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ª vue åº”ç”¨ï¼Œå®ƒå†…éƒ¨æä¾›çš„æ–¹æ³•æ˜¯é’ˆå¯¹æ•´ä¸ªåº”ç”¨çš„ï¼Œè€Œä¸å†æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç»„ä»¶ã€‚</li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>è°ˆè°ˆä½ å¯¹ vue3 æ•°æ®å“åº”å¼çš„ç†è§£</p></div><p>vue3 ä¸å†ä½¿ç”¨ Object.defineProperty çš„æ–¹å¼å®šä¹‰å®Œæˆæ•°æ®å“åº”å¼ï¼Œè€Œæ˜¯ä½¿ç”¨ Proxyã€‚é™¤äº† Proxy æœ¬èº«æ•ˆç‡æ¯” Object.defineProperty æ›´é«˜ä¹‹å¤–ï¼Œç”±äºä¸å¿…é€’å½’éå†æ‰€æœ‰å±æ€§ï¼Œè€Œæ˜¯ç›´æ¥å¾—åˆ°ä¸€ä¸ª Proxyã€‚æ‰€ä»¥åœ¨ vue3 ä¸­ï¼Œå¯¹æ•°æ®çš„è®¿é—®æ˜¯åŠ¨æ€çš„ï¼Œå½“è®¿é—®æŸä¸ªå±æ€§çš„æ—¶å€™ï¼Œå†åŠ¨æ€çš„è·å–å’Œè®¾ç½®ï¼Œè¿™å°±æå¤§çš„æå‡äº†åœ¨ç»„ä»¶åˆå§‹é˜¶æ®µçš„æ•ˆç‡ã€‚ï¼ˆæƒ³ç”¨é‚£ä¸ªå†è¯»é‚£ä¸ªï¼‰ï¼Œå¦‚æœè®¿é—®ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å†è¿”å›ä¸€ä¸ª proxyã€‚åŒæ—¶ï¼Œç”±äº Proxy å¯ä»¥ç›‘æ§åˆ°æˆå‘˜çš„æ–°å¢å’Œåˆ é™¤ï¼Œå› æ­¤ï¼Œåœ¨ vue3 ä¸­æ–°å¢æˆå‘˜ã€åˆ é™¤æˆå‘˜ã€ç´¢å¼•è®¿é—®ç­‰å‡å¯ä»¥è§¦å‘é‡æ–°æ¸²æŸ“ï¼Œè€Œè¿™äº›åœ¨ vue2 ä¸­æ˜¯éš¾ä»¥åšåˆ°çš„ã€‚</p><p>vue2 çš„å“åº”å¼æ˜¯ä½¿ç”¨ Object.defineProperty å®Œæˆçš„ï¼Œå®ƒä¼šå¯¹åŸå§‹å¯¹è±¡æœ‰ä¾µå…¥ã€‚ åœ¨åˆ›å»ºå“åº”å¼é˜¶æ®µï¼Œä¼šé€’å½’éå†åŸå§‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œå½“å¯¹è±¡å±æ€§è¾ƒå¤šã€è¾ƒæ·±æ—¶ï¼Œå¯¹æ•ˆç‡çš„å½±å“é¢‡ä¸ºä¸¥é‡ã€‚ä¸ä»…å¦‚æ­¤ï¼Œç”±äºéå†å±æ€§ä»…åœ¨æœ€å¼€å§‹å®Œæˆï¼Œå› æ­¤åœ¨è¿™å„¿ä¹‹åæ— æ³•å“åº”å±æ€§çš„æ–°å¢å’Œåˆ é™¤ã€‚ åœ¨æ”¶é›†ä¾èµ–æ—¶ï¼Œvue2 é‡‡å–çš„æ˜¯æ„é€ å‡½æ•°çš„åŠæ³•ï¼Œæ„é€ å‡½æ•°æ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œä¸åˆ©äº tree shakingã€‚</p><p>vue3 çš„å“åº”å¼æ˜¯ä½¿ç”¨ Proxy å®Œæˆçš„ï¼Œå®ƒä¸ä¼šä¾µå…¥åŸå§‹å¯¹è±¡ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œé€šè¿‡æ“ä½œä»£ç†å¯¹è±¡å®Œæˆå“åº”å¼ã€‚ ç”±äºä½¿ç”¨äº†ä»£ç†å¯¹è±¡ï¼Œå› æ­¤å¹¶ä¸éœ€è¦éå†åŸå§‹å¯¹è±¡çš„å±æ€§ï¼Œåªéœ€åœ¨è¯»å–å±æ€§æ—¶åŠ¨æ€çš„å†³å®šè¦ä¸è¦ç»§ç»­è¿”å›ä¸€ä¸ªä»£ç†ï¼Œè¿™ç§æŒ‰éœ€åŠ è½½çš„æ¨¡å¼å¯ä»¥å®Œå…¨æ— è§†å¯¹è±¡å±æ€§çš„æ•°é‡å’Œæ·±åº¦ï¼Œè¾¾åˆ°æ›´é«˜çš„æ‰§è¡Œæ•ˆç‡ã€‚ ç”±äº ES6 çš„ Proxy å¯ä»¥ä»£ç†æ›´åŠ åº•å±‚çš„æ“ä½œï¼Œå› æ­¤å¯¹å±æ€§çš„æ–°å¢ã€åˆ é™¤éƒ½å¯ä»¥å®Œç¾å“åº”ã€‚ åœ¨æ”¶é›†ä¾èµ–æ—¶ï¼Œvue3 é‡‡å–çš„æ˜¯æ™®é€šå‡½æ•°çš„åšæ³•ï¼Œåˆ©ç”¨é«˜æ•ˆç‡çš„ WeakMap å®ç°ä¾èµ–è®°å½•ï¼Œè¿™åˆ©äº tree shakingï¼Œä»è€Œé™ä½æ‰“åŒ…ä½“ç§¯ã€‚</p><h2 id="v-model" tabindex="-1">v-model <a class="header-anchor" href="#v-model" aria-hidden="true">#</a></h2><p><code>vue2</code>æ¯”è¾ƒè®©äººè¯Ÿç—…çš„ä¸€ç‚¹å°±æ˜¯æä¾›äº†ä¸¤ç§åŒå‘ç»‘å®šï¼š<code>v-model</code>å’Œ<code>.sync</code>ï¼Œåœ¨<code>vue3</code>ä¸­ï¼Œå»æ‰äº†<code>.sync</code>ä¿®é¥°ç¬¦ï¼Œåªéœ€è¦ä½¿ç”¨<code>v-model</code>è¿›è¡ŒåŒå‘ç»‘å®šå³å¯ã€‚</p><p>ä¸ºäº†è®©<code>v-model</code>æ›´å¥½çš„é’ˆå¯¹<strong>å¤šä¸ªå±æ€§</strong>è¿›è¡ŒåŒå‘ç»‘å®šï¼Œ<code>vue3</code>ä½œå‡ºäº†ä»¥ä¸‹ä¿®æ”¹</p><ul><li>å½“å¯¹è‡ªå®šä¹‰ç»„ä»¶ä½¿ç”¨<code>v-model</code>æŒ‡ä»¤æ—¶ï¼Œç»‘å®šçš„å±æ€§åç”±åŸæ¥çš„<code>value</code>å˜ä¸º<code>modelValue</code>ï¼Œäº‹ä»¶åç”±åŸæ¥çš„<code>input</code>å˜ä¸º<code>update:modelValue</code></li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- vue2 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:value</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@input</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle = $event&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">valueç»‘å®šä¸€ä¸ªæ•°æ®ï¼Œinputçš„æ—¶å€™ç»™è¿™ä¸ªæ•°æ®é‡æ–°èµ‹å€¼</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- vue3 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">:modelValue</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">@update:modelValue</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle = $event&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">&lt;!-- vue2 --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span><span style="color:#B392F0;"> :value</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span><span style="color:#B392F0;"> @input</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle = $event&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">valueç»‘å®šä¸€ä¸ªæ•°æ®ï¼Œinputçš„æ—¶å€™ç»™è¿™ä¸ªæ•°æ®é‡æ–°èµ‹å€¼</span></span>
<span class="line"><span style="color:#6B737C;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span><span style="color:#B392F0;"> v-model</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">&lt;!-- vue3 --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span></span>
<span class="line"><span style="color:#B392F0;">  :modelValue</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span></span>
<span class="line"><span style="color:#B392F0;">  @update:modelValue</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle = $event&quot;</span></span>
<span class="line"><span style="color:#B392F0;">/&gt;</span></span>
<span class="line"><span style="color:#6B737C;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span><span style="color:#B392F0;"> v-model</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>å»æ‰äº†<code>.sync</code>ä¿®é¥°ç¬¦ï¼Œå®ƒåŸæœ¬çš„åŠŸèƒ½ç”±<code>v-model</code>çš„å‚æ•°æ›¿ä»£</li></ul><div class="language-html line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- vue2 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:title</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@update:title</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle = $event&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:title.sync</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- vue3 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">:title</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@update:title</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle = $event&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">ChildComponent</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model:title</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;pageTitle&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">&lt;!-- vue2 --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span><span style="color:#B392F0;"> :title</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span><span style="color:#B392F0;"> @update:title</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle = $event&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#6B737C;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span><span style="color:#B392F0;"> :title.sync</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">&lt;!-- vue3 --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span><span style="color:#B392F0;"> :title</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span><span style="color:#B392F0;"> @update:title</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle = $event&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#6B737C;">&lt;!-- ç®€å†™ä¸º --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">ChildComponent</span><span style="color:#B392F0;"> v-model:title</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;pageTitle&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><code>model</code>é…ç½®è¢«ç§»é™¤</li><li>å…è®¸è‡ªå®šä¹‰<code>v-model</code>ä¿®é¥°ç¬¦ vue2 æ— æ­¤åŠŸèƒ½</li></ul><p>ä¸¾ä¾‹ï¼štrim <img src="/blog/assets/2023-02-01-15-25-03.96124e39.png" alt=""></p><h2 id="v-if-v-for" tabindex="-1">v-if v-for <a class="header-anchor" href="#v-if-v-for" aria-hidden="true">#</a></h2><p><code>v-if</code> çš„ä¼˜å…ˆçº§ ç°åœ¨é«˜äº <code>v-for</code></p><h2 id="key" tabindex="-1">key <a class="header-anchor" href="#key" aria-hidden="true">#</a></h2><ul><li>å½“ä½¿ç”¨<code>&lt;template&gt;</code>è¿›è¡Œ<code>v-for</code>å¾ªç¯æ—¶ï¼Œéœ€è¦æŠŠ<code>key</code>å€¼æ”¾åˆ°<code>&lt;template&gt;</code>ä¸­ï¼Œè€Œä¸æ˜¯å®ƒçš„å­å…ƒç´ ä¸­</li><li>å½“ä½¿ç”¨<code>v-if v-else-if v-else</code>åˆ†æ”¯çš„æ—¶å€™ï¼Œä¸å†éœ€è¦æŒ‡å®š<code>key</code>å€¼ï¼Œå› ä¸º<code>vue3</code>ä¼šè‡ªåŠ¨ç»™äºˆæ¯ä¸ªåˆ†æ”¯ä¸€ä¸ªå”¯ä¸€çš„<code>key</code> å³ä¾¿è¦æ‰‹å·¥ç»™äºˆ<code>key</code>å€¼ï¼Œä¹Ÿå¿…é¡»ç»™äºˆæ¯ä¸ªåˆ†æ”¯å”¯ä¸€çš„<code>key</code>ï¼Œ<strong>ä¸èƒ½å› ä¸ºè¦é‡ç”¨åˆ†æ”¯è€Œç»™äºˆç›¸åŒçš„ key</strong></li></ul><h2 id="fragment" tabindex="-1">Fragment <a class="header-anchor" href="#fragment" aria-hidden="true">#</a></h2><p><code>vue3</code>ç°åœ¨å…è®¸ç»„ä»¶å‡ºç°å¤šä¸ªæ ¹èŠ‚ç‚¹</p><h2 id="ç»„ä»¶çš„å˜åŒ–" tabindex="-1">ç»„ä»¶çš„å˜åŒ– <a class="header-anchor" href="#ç»„ä»¶çš„å˜åŒ–" aria-hidden="true">#</a></h2><p>Teleport</p><p>asyncComponent å¼‚æ­¥ç»„ä»¶</p><h2 id="reactivityapi" tabindex="-1">ReactivityApi <a class="header-anchor" href="#reactivityapi" aria-hidden="true">#</a></h2><blockquote><p>reactivity api: <a href="https://v3.vuejs.org/api/reactivity-api" target="_blank" rel="noreferrer">https://v3.vuejs.org/api/reactivity-api</a></p></blockquote><h3 id="è·å–å“åº”å¼æ•°æ®" tabindex="-1">è·å–å“åº”å¼æ•°æ® <a class="header-anchor" href="#è·å–å“åº”å¼æ•°æ®" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:left;">API</th><th>ä¼ å…¥</th><th>è¿”å›</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td style="text-align:left;"><code>reactive</code></td><td><code>plain-object</code></td><td><code>å¯¹è±¡ä»£ç†</code></td><td>æ·±åº¦ä»£ç†å¯¹è±¡ä¸­çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td style="text-align:left;"><code>readonly</code></td><td><code>plain-object</code> or <code>proxy</code></td><td><code>å¯¹è±¡ä»£ç†</code></td><td>åªèƒ½è¯»å–ä»£ç†å¯¹è±¡ä¸­çš„æˆå‘˜ï¼Œä¸å¯ä¿®æ”¹</td></tr><tr><td style="text-align:left;"><code>ref</code></td><td><code>any</code></td><td><code>{ value: ... }</code></td><td>å¯¹ value çš„è®¿é—®æ˜¯å“åº”å¼çš„<br>å¦‚æœç»™ value çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œ<br>åˆ™ä¼šé€šè¿‡<code>reactive</code>å‡½æ•°è¿›è¡Œä»£ç†<br>å¦‚æœå·²ç»æ˜¯ä»£ç†ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ä»£ç†</td></tr><tr><td style="text-align:left;"><code>computed</code></td><td><code>function</code></td><td><code>{ value: ... }</code></td><td>å½“è¯»å– value å€¼æ—¶ï¼Œ<br>ä¼š<strong>æ ¹æ®æƒ…å†µ</strong>å†³å®šæ˜¯å¦è¦è¿è¡Œå‡½æ•°</td></tr></tbody></table><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// æƒ³æŠŠ{ a: 1, b: 2 }å˜æˆå“åº”å¼</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">computed</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 1. reactive</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// window.state = state;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 2. readonly</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åªè¯»ï¼Œä¸èƒ½set</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">const imState = readonly({ a: 1, b: 2 });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">window.imState = imState;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">const imState = readonly(state);//ä»£ç†å¥—ä»£ç†</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">window.imState = imState;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// imState -&gt; state -&gt; {a:3,b:2}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 3. ref</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">const count = ref(0);//å¦‚æœé‡Œé¢æ˜¯å¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨reactiveï¼›æ™®é€šå€¼å°±ref</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">console.log(count);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">const count = ref(state);//å·²ç»æ˜¯ä»£ç†ï¼Œå°±è¿”å›è¿™ä¸ªä»£ç†</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">console.log(count.value===state)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 4. computed</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* const sum = computed(() =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    console.log(&quot;computed&quot;);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    return state.a + state.b;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">})</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">console.log(sum.value);//å½“è¿™å¥è¯è¿è¡Œçš„æ—¶å€™å°±ä¼šè¾“å‡ºcomputedï¼Œä½†æ˜¯åªå…è®¸ä¸€æ¬¡(æœ‰ç¼“å­˜)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">å½“ä¾èµ–æ•°æ®a,bå˜äº†ï¼Œå°±é‡æ–°è¿è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"> */</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// æƒ³æŠŠ{ a: 1, b: 2 }å˜æˆå“åº”å¼</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> readonly</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> computed } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#6B737C;">// 1. reactive</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ a</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> b</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#6B737C;">// window.state = state;</span></span>
<span class="line"><span style="color:#6B737C;">// 2. readonly</span></span>
<span class="line"><span style="color:#6B737C;">// åªè¯»ï¼Œä¸èƒ½set</span></span>
<span class="line"><span style="color:#6B737C;">/*</span></span>
<span class="line"><span style="color:#6B737C;">const imState = readonly({ a: 1, b: 2 });</span></span>
<span class="line"><span style="color:#6B737C;">window.imState = imState;</span></span>
<span class="line"><span style="color:#6B737C;">*/</span></span>
<span class="line"><span style="color:#6B737C;">/*</span></span>
<span class="line"><span style="color:#6B737C;">const imState = readonly(state);//ä»£ç†å¥—ä»£ç†</span></span>
<span class="line"><span style="color:#6B737C;">window.imState = imState;</span></span>
<span class="line"><span style="color:#6B737C;">// imState -&gt; state -&gt; {a:3,b:2}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// 3. ref</span></span>
<span class="line"><span style="color:#6B737C;">const count = ref(0);//å¦‚æœé‡Œé¢æ˜¯å¯¹è±¡ï¼Œå°±ä¼šè°ƒç”¨reactiveï¼›æ™®é€šå€¼å°±ref</span></span>
<span class="line"><span style="color:#6B737C;">console.log(count);</span></span>
<span class="line"><span style="color:#6B737C;">const count = ref(state);//å·²ç»æ˜¯ä»£ç†ï¼Œå°±è¿”å›è¿™ä¸ªä»£ç†</span></span>
<span class="line"><span style="color:#6B737C;">console.log(count.value===state)</span></span>
<span class="line"><span style="color:#6B737C;">// 4. computed</span></span>
<span class="line"><span style="color:#6B737C;">*/</span></span>
<span class="line"><span style="color:#6B737C;">/* const sum = computed(() =&gt; {</span></span>
<span class="line"><span style="color:#6B737C;">    console.log(&quot;computed&quot;);</span></span>
<span class="line"><span style="color:#6B737C;">    return state.a + state.b;</span></span>
<span class="line"><span style="color:#6B737C;">})</span></span>
<span class="line"><span style="color:#6B737C;">console.log(sum.value);//å½“è¿™å¥è¯è¿è¡Œçš„æ—¶å€™å°±ä¼šè¾“å‡ºcomputedï¼Œä½†æ˜¯åªå…è®¸ä¸€æ¬¡(æœ‰ç¼“å­˜)</span></span>
<span class="line"><span style="color:#6B737C;">å½“ä¾èµ–æ•°æ®a,bå˜äº†ï¼Œå°±é‡æ–°è¿è¡Œ</span></span>
<span class="line"><span style="color:#6B737C;"> */</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>åº”ç”¨ï¼š</p><ul><li>å¦‚æœæƒ³è¦è®©ä¸€ä¸ªå¯¹è±¡å˜ä¸ºå“åº”å¼æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨<code>reactive</code>æˆ–<code>ref</code></li><li>å¦‚æœæƒ³è¦è®©ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§åªè¯»ï¼Œä½¿ç”¨<code>readonly</code></li><li>å¦‚æœæƒ³è¦è®©ä¸€ä¸ªéå¯¹è±¡æ•°æ®å˜ä¸ºå“åº”å¼æ•°æ®ï¼Œä½¿ç”¨<code>ref</code></li><li>å¦‚æœæƒ³è¦æ ¹æ®å·²çŸ¥çš„å“åº”å¼æ•°æ®å¾—åˆ°ä¸€ä¸ªæ–°çš„å“åº”å¼æ•°æ®ï¼Œä½¿ç”¨<code>computed</code></li><li>æ€»ç»“ï¼šåœ¨ vue3 ä¸­ï¼Œä¸¤ç§æ•°æ®å“åº”å¼æ ¼å¼ï¼šref object å’Œ proxy</li></ul><p>ç¬”è¯•é¢˜ 1ï¼šä¸‹é¢çš„ä»£ç è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">computed</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">firstName</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Xu Ming&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">lastName</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;Deng&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">computed</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;changed&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">`</span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">lastName</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">, </span><span style="color:#C678DD;">${</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">firstName</span><span style="color:#C678DD;">}</span><span style="color:#98C379;">`</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;state ready&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;fullname is&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;fullname is&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//è®¡ç®—å±æ€§æœ‰ç¼“å­˜</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">imState</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">imState</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">stateRef</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">stateRef</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//å¦‚æœå·²ç»æ˜¯ä»£ç†ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ä»£ç†</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">firstName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Cheng&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">lastName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Ji&quot;</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">//æ”¹äº†æ•°æ®ï¼Œè®¡ç®—å±æ€§è¿˜æ˜¯ä¸å…è®¸ï¼Œå¾—ç­‰åˆ°ç”¨åˆ°.valueçš„æ—¶å€™æ‰è¿è¡Œ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">imState</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">firstName</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">imState</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">lastName</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;fullname is&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;fullname is&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">imState2</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">stateRef</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">imState2</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">===</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">stateRef</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//ä»£ç†æœ‰åŒºåˆ«ï¼Œä¸€ä¸ªå¯æ”¹ä¸€ä¸ªä¸å¯æ”¹</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> readonly</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> computed } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({</span></span>
<span class="line"><span style="color:#B392F0;">  firstName</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;Xu Ming&quot;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  lastName</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;Deng&quot;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> computed(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;changed&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">`</span><span style="color:#F97583;">${</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.lastName</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">, </span><span style="color:#F97583;">${</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.firstName</span><span style="color:#F97583;">}</span><span style="color:#FFAB70;">`</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;state ready&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;fullname is&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;">.value);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;fullname is&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;">.value); </span><span style="color:#6B737C;">//è®¡ç®—å±æ€§æœ‰ç¼“å­˜</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">imState</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> readonly(state);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(imState </span><span style="color:#F97583;">===</span><span style="color:#B392F0;"> state); </span><span style="color:#6B737C;">//false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">stateRef</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(state);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#79B8FF;">stateRef</span><span style="color:#B392F0;">.value </span><span style="color:#F97583;">===</span><span style="color:#B392F0;"> state); </span><span style="color:#6B737C;">//å¦‚æœå·²ç»æ˜¯ä»£ç†ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ä»£ç†</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.firstName </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;Cheng&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.lastName </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;Ji&quot;</span><span style="color:#B392F0;">; </span><span style="color:#6B737C;">//æ”¹äº†æ•°æ®ï¼Œè®¡ç®—å±æ€§è¿˜æ˜¯ä¸å…è®¸ï¼Œå¾—ç­‰åˆ°ç”¨åˆ°.valueçš„æ—¶å€™æ‰è¿è¡Œ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#79B8FF;">imState</span><span style="color:#B392F0;">.firstName</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">imState</span><span style="color:#B392F0;">.lastName);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;fullname is&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;">.value);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;fullname is&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;">.value);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">imState2</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> readonly(stateRef);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#79B8FF;">imState2</span><span style="color:#B392F0;">.value </span><span style="color:#F97583;">===</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">stateRef</span><span style="color:#B392F0;">.value); </span><span style="color:#6B737C;">//ä»£ç†æœ‰åŒºåˆ«ï¼Œä¸€ä¸ªå¯æ”¹ä¸€ä¸ªä¸å¯æ”¹</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>ç¬”è¯•é¢˜ 2ï¼šæŒ‰ç…§ä¸‹é¢çš„è¦æ±‚å®Œæˆå‡½æ•°</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useUser</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªåªè¯»çš„ç”¨æˆ·å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">setUserName</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å§“åï¼Œç”¨äºä¿®æ”¹ç”¨æˆ·çš„åç§°</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">setUserAge</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å¹´é¾„ï¼Œç”¨æˆ·ä¿®æ”¹ç”¨æˆ·çš„å¹´é¾„</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useUser() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    user</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªåªè¯»çš„ç”¨æˆ·å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#B392F0;">    setUserName</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å§“åï¼Œç”¨äºä¿®æ”¹ç”¨æˆ·çš„åç§°</span></span>
<span class="line"><span style="color:#B392F0;">    setUserAge</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å¹´é¾„ï¼Œç”¨æˆ·ä¿®æ”¹ç”¨æˆ·çš„å¹´é¾„</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç­”æ¡ˆ</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useUser</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">userOrigin</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({}); </span><span style="color:#7F848E;font-style:italic;">//åŸå§‹çš„å¯ä»¥æ”¹</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">userOrigin</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//åªè¯»äº†</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setUserName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//è¿ç”¨reactiveå·§å¦™çš„é¿å¼€äº†åªè¯»ä¸èƒ½æ”¹</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">userOrigin</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">//é€šè¿‡åŸå§‹æ¥æ”¹</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setUserAge</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">age</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">userOrigin</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªåªè¯»çš„ç”¨æˆ·å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">setUserName</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å§“åï¼Œç”¨äºä¿®æ”¹ç”¨æˆ·çš„åç§°</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// éš¾ç‚¹ï¼šåªè¯»äº†ï¼Œå’‹æ”¹</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">setUserAge</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å¹´é¾„ï¼Œç”¨æˆ·ä¿®æ”¹ç”¨æˆ·çš„å¹´é¾„</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">setUserName</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">setUserAge</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useUser</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">setUserName</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;monica&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">setUserAge</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">18</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { readonly</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reactive } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useUser() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">userOrigin</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({}); </span><span style="color:#6B737C;">//åŸå§‹çš„å¯ä»¥æ”¹</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">user</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> readonly(userOrigin); </span><span style="color:#6B737C;">//åªè¯»äº†</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> setUserName </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> (name) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">//è¿ç”¨reactiveå·§å¦™çš„é¿å¼€äº†åªè¯»ä¸èƒ½æ”¹</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">userOrigin</span><span style="color:#B392F0;">.name </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> name; </span><span style="color:#6B737C;">//é€šè¿‡åŸå§‹æ¥æ”¹</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> setUserAge </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> (age) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">userOrigin</span><span style="color:#B392F0;">.age </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> age;</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    user</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªåªè¯»çš„ç”¨æˆ·å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤ä¸ºä¸€ä¸ªç©ºå¯¹è±¡</span></span>
<span class="line"><span style="color:#B392F0;">    setUserName</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å§“åï¼Œç”¨äºä¿®æ”¹ç”¨æˆ·çš„åç§°</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// éš¾ç‚¹ï¼šåªè¯»äº†ï¼Œå’‹æ”¹</span></span>
<span class="line"><span style="color:#B392F0;">    setUserAge</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ç”¨æˆ·å¹´é¾„ï¼Œç”¨æˆ·ä¿®æ”¹ç”¨æˆ·çš„å¹´é¾„</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> { </span><span style="color:#79B8FF;">user</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">setUserName</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">setUserAge</span><span style="color:#B392F0;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useUser();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(user);</span></span>
<span class="line"><span style="color:#B392F0;">setUserName(</span><span style="color:#FFAB70;">&quot;monica&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">setUserAge(</span><span style="color:#F8F8F8;">18</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(user);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>ç¬”è¯•é¢˜ 3ï¼šå“åº”å¼é˜²æŠ–</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useDebounce</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">duration</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œæ˜¯ä¸€ä¸ªåªè¯»å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤å€¼ä¸ºå‚æ•°å€¼</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">setValue</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œéœ€è¦æŠŠæ–°å¯¹è±¡ä¸­çš„å±æ€§æ··åˆåˆ°åŸå§‹å¯¹è±¡ä¸­ï¼Œæ··åˆæ“ä½œéœ€è¦åœ¨durationçš„æ—¶é—´ä¸­é˜²æŠ–</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useDebounce(obj</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> duration) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    value</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™é‡Œæ˜¯ä¸€ä¸ªåªè¯»å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤å€¼ä¸ºå‚æ•°å€¼</span></span>
<span class="line"><span style="color:#B392F0;">    setValue</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œéœ€è¦æŠŠæ–°å¯¹è±¡ä¸­çš„å±æ€§æ··åˆåˆ°åŸå§‹å¯¹è±¡ä¸­ï¼Œæ··åˆæ“ä½œéœ€è¦åœ¨durationçš„æ—¶é—´ä¸­é˜²æŠ–</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ç­”æ¡ˆ</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useDebounce</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">duration</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">valueOrigin</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">obj</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">valueOrigin</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setValue</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">clearTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">timer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;å€¼æ”¹å˜äº†&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">entries</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">newValue</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">(([</span><span style="color:#E06C75;font-style:italic;">k</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">valueOrigin</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">k</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">v</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }, </span><span style="color:#E06C75;">duration</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œæ˜¯ä¸€ä¸ªåªè¯»å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤å€¼ä¸ºå‚æ•°å€¼</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">setValue</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// è¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œéœ€è¦æŠŠæ–°å¯¹è±¡ä¸­çš„å±æ€§æ··åˆåˆ°åŸå§‹å¯¹è±¡ä¸­ï¼Œæ··åˆæ“ä½œéœ€è¦åœ¨durationçš„æ—¶é—´ä¸­é˜²æŠ–</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">value</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">setValue</span><span style="color:#ABB2BF;"> } </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useDebounce</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> }, </span><span style="color:#D19A66;">5000</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">setValue</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">setValue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> readonly } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useDebounce(obj</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> duration) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// åœ¨è¿™é‡Œè¡¥å…¨å‡½æ•°</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">valueOrigin</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive(obj);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">value</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> readonly(valueOrigin);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">let</span><span style="color:#B392F0;"> timer </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> setValue </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> (newValue) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    clearTimeout(timer);</span></span>
<span class="line"><span style="color:#B392F0;">    timer </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;å€¼æ”¹å˜äº†&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">Object</span><span style="color:#B392F0;">.entries(newValue).forEach(([k</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> v]) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">        valueOrigin[k] </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> v;</span></span>
<span class="line"><span style="color:#B392F0;">      });</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> duration);</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    value</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™é‡Œæ˜¯ä¸€ä¸ªåªè¯»å¯¹è±¡ï¼Œå“åº”å¼æ•°æ®ï¼Œé»˜è®¤å€¼ä¸ºå‚æ•°å€¼</span></span>
<span class="line"><span style="color:#B392F0;">    setValue</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// è¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œéœ€è¦æŠŠæ–°å¯¹è±¡ä¸­çš„å±æ€§æ··åˆåˆ°åŸå§‹å¯¹è±¡ä¸­ï¼Œæ··åˆæ“ä½œéœ€è¦åœ¨durationçš„æ—¶é—´ä¸­é˜²æŠ–</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> { </span><span style="color:#79B8FF;">value</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">setValue</span><span style="color:#B392F0;"> } </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> useDebounce({ a</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> b</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;"> }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">5000</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.value </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> value;</span></span>
<span class="line"><span style="color:#79B8FF;">window</span><span style="color:#B392F0;">.setValue </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> setValue;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h3 id="ç›‘å¬æ•°æ®å˜åŒ–" tabindex="-1">ç›‘å¬æ•°æ®å˜åŒ– <a class="header-anchor" href="#ç›‘å¬æ•°æ®å˜åŒ–" aria-hidden="true">#</a></h3><p><strong>watchEffect</strong></p><blockquote><p><strong>è‡ªåŠ¨æ”¶é›†ä¾èµ–ï¼Œä¾èµ–æ”¹å˜æ—¶å€™è‡ªåŠ¨æ”¶é›†</strong></p></blockquote><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">stop</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">watchEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// è¯¥å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œç„¶åè¿½ä¸­å‡½æ•°ä¸­ç”¨åˆ°çš„å“åº”å¼æ•°æ®ï¼Œå“åº”å¼æ•°æ®å˜åŒ–åä¼šå†æ¬¡æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é€šè¿‡è°ƒç”¨stopå‡½æ•°ï¼Œä¼šåœæ­¢ç›‘å¬</span></span>
<span class="line"><span style="color:#61AFEF;">stop</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// åœæ­¢ç›‘å¬</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">stop</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> watchEffect(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// è¯¥å‡½æ•°ä¼šç«‹å³æ‰§è¡Œï¼Œç„¶åè¿½ä¸­å‡½æ•°ä¸­ç”¨åˆ°çš„å“åº”å¼æ•°æ®ï¼Œå“åº”å¼æ•°æ®å˜åŒ–åä¼šå†æ¬¡æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// é€šè¿‡è°ƒç”¨stopå‡½æ•°ï¼Œä¼šåœæ­¢ç›‘å¬</span></span>
<span class="line"><span style="color:#B392F0;">stop(); </span><span style="color:#6B737C;">// åœæ­¢ç›‘å¬</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watchEffect</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">watchEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//éƒ½æ˜¯å“åº”å¼çš„</span></span>
<span class="line"><span style="color:#ABB2BF;">}); </span><span style="color:#7F848E;font-style:italic;">//watchEffecté©¬ä¸Šæ‰§è¡Œä¸€æ¬¡</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// state.b++;//ä¸å˜ï¼Œå› ä¸ºä¸ä¾èµ–bï¼Œä¸è¿è¡Œget</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¼‚æ­¥çš„ï¼Œä¼šè¿›å…¥å¾®é˜Ÿåˆ—ï¼Œæ•°æ®æ”¹å˜å®Œæˆåæ‰è¿è¡Œï¼Œæ‰€ä»¥åªä¼šè¿è¡Œä¸€æ¬¡ 6 4</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> watchEffect } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ a</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> b</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">watchEffect(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value); </span><span style="color:#6B737C;">//éƒ½æ˜¯å“åº”å¼çš„</span></span>
<span class="line"><span style="color:#B392F0;">}); </span><span style="color:#6B737C;">//watchEffecté©¬ä¸Šæ‰§è¡Œä¸€æ¬¡</span></span>
<span class="line"><span style="color:#6B737C;">// state.b++;//ä¸å˜ï¼Œå› ä¸ºä¸ä¾èµ–bï¼Œä¸è¿è¡Œget</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#6B737C;">// å¼‚æ­¥çš„ï¼Œä¼šè¿›å…¥å¾®é˜Ÿåˆ—ï¼Œæ•°æ®æ”¹å˜å®Œæˆåæ‰è¿è¡Œï¼Œæ‰€ä»¥åªä¼šè¿è¡Œä¸€æ¬¡ 6 4</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>watch</strong></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// eg1</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// watch(state.a, (newValue, oldValue) =&gt; {//ä¸ä¼šä¾èµ–ï¼Œç›´æ¥å°±æŠŠstate.aè¯»å‡ºæ¥äº†</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// })</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// eg2</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// watch(() =&gt; state.a, (newValue, oldValue) =&gt; {//å‡½æ•°æ˜¯åœ¨watché‡Œé¢è°ƒç”¨ï¼Œæ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// })</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// eg3</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// watch([() =&gt; count.value], (newValue, oldValue) =&gt; {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// })</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// eg4</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// watch(count, (newValue, oldValue) =&gt; {//countå¯ä»¥ç›´æ¥è¿™æ ·å†™ï¼Œå› ä¸ºcountæ˜¯å¯¹è±¡ã€‚ä¸èƒ½.value,å¦‚æœ.valueå°±ç›¸å½“äºç»™äº†0</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// })</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">([() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">], () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;å˜åŒ–äº†&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> watch } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ a</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> b</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// eg1</span></span>
<span class="line"><span style="color:#6B737C;">// watch(state.a, (newValue, oldValue) =&gt; {//ä¸ä¼šä¾èµ–ï¼Œç›´æ¥å°±æŠŠstate.aè¯»å‡ºæ¥äº†</span></span>
<span class="line"><span style="color:#6B737C;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#6B737C;">// })</span></span>
<span class="line"><span style="color:#6B737C;">// eg2</span></span>
<span class="line"><span style="color:#6B737C;">// watch(() =&gt; state.a, (newValue, oldValue) =&gt; {//å‡½æ•°æ˜¯åœ¨watché‡Œé¢è°ƒç”¨ï¼Œæ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="color:#6B737C;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#6B737C;">// })</span></span>
<span class="line"><span style="color:#6B737C;">// eg3</span></span>
<span class="line"><span style="color:#6B737C;">// watch([() =&gt; count.value], (newValue, oldValue) =&gt; {</span></span>
<span class="line"><span style="color:#6B737C;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#6B737C;">// })</span></span>
<span class="line"><span style="color:#6B737C;">// eg4</span></span>
<span class="line"><span style="color:#6B737C;">// watch(count, (newValue, oldValue) =&gt; {//countå¯ä»¥ç›´æ¥è¿™æ ·å†™ï¼Œå› ä¸ºcountæ˜¯å¯¹è±¡ã€‚ä¸èƒ½.value,å¦‚æœ.valueå°±ç›¸å½“äºç»™äº†0</span></span>
<span class="line"><span style="color:#6B737C;">//   console.log(&#39;new&#39;, newValue, &#39;old&#39;, oldValue)</span></span>
<span class="line"><span style="color:#6B737C;">// })</span></span>
<span class="line"><span style="color:#B392F0;">watch([() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> count]</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;å˜åŒ–äº†&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// ç­‰æ•ˆäºvue2çš„$watch</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¸åŒäºwatchEffect  ä¸ä¼šç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç›‘å¬å•ä¸ªæ•°æ®çš„å˜åŒ–</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldValue</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">options</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">countRef</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">countRef</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">newValue</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldValue</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">options</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç›‘å¬å¤šä¸ªæ•°æ®çš„å˜åŒ–</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">([() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">countRef</span><span style="color:#ABB2BF;">], ([</span><span style="color:#E06C75;font-style:italic;">new1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">new2</span><span style="color:#ABB2BF;">], [</span><span style="color:#E06C75;font-style:italic;">old1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">old2</span><span style="color:#ABB2BF;">]) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// ç­‰æ•ˆäºvue2çš„$watch</span></span>
<span class="line"><span style="color:#6B737C;">// ä¸åŒäºwatchEffect  ä¸ä¼šç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#6B737C;">// ç›‘å¬å•ä¸ªæ•°æ®çš„å˜åŒ–</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ count</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#B392F0;">watch(</span></span>
<span class="line"><span style="color:#B392F0;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  (newValue</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> oldValue) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// ...</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  options</span></span>
<span class="line"><span style="color:#B392F0;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">countRef</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">watch(</span></span>
<span class="line"><span style="color:#B392F0;">  countRef</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  (newValue</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> oldValue) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// ...</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  options</span></span>
<span class="line"><span style="color:#B392F0;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// ç›‘å¬å¤šä¸ªæ•°æ®çš„å˜åŒ–</span></span>
<span class="line"><span style="color:#B392F0;">watch([() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> countRef]</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ([new1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> new2]</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> [old1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> old2]) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// ...</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>æ³¨æ„ï¼šæ— è®ºæ˜¯</strong><code>watchEffect</code><strong>è¿˜æ˜¯</strong><code>watch</code><strong>ï¼Œå½“ä¾èµ–é¡¹å˜åŒ–æ—¶ï¼Œå›è°ƒå‡½æ•°çš„è¿è¡Œéƒ½æ˜¯å¼‚æ­¥çš„ï¼ˆå¾®é˜Ÿåˆ—ï¼‰</strong></p><p>åº”ç”¨ï¼šé™¤éé‡åˆ°ä¸‹é¢çš„åœºæ™¯ï¼Œå¦åˆ™å‡å»ºè®®é€‰æ‹©<code>watchEffect</code></p><ul><li>ä¸å¸Œæœ›å›è°ƒå‡½æ•°ä¸€å¼€å§‹å°±æ‰§è¡Œ</li><li>æ•°æ®æ”¹å˜æ—¶ï¼Œéœ€è¦å‚è€ƒæ—§å€¼</li><li>éœ€è¦ç›‘æ§ä¸€äº›å›è°ƒå‡½æ•°ä¸­ä¸ä¼šç”¨åˆ°çš„æ•°æ®</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">([() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">], () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//ç¬¬äºŒä¸ªå‚æ•°ï¼šæ•°æ®å˜åŒ–çš„æ—¶å€™è¿è¡Œå›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;å˜åŒ–äº†&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}); </span><span style="color:#7F848E;font-style:italic;">//ä¸åŒäºwatchEffect,ä¸€å¼€å§‹ä¸å…è®¸ï¼Œè¦åŠ ä¸Šä¸€ä¸ªé…ç½®ï¼š{immediate:true}æ‰ä¼šç›´æ¥è¿è¡Œ</span></span>
<span class="line"><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">a</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> watch } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ a</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> b</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">watch([() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> count]</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">//ç¬¬äºŒä¸ªå‚æ•°ï¼šæ•°æ®å˜åŒ–çš„æ—¶å€™è¿è¡Œå›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;å˜åŒ–äº†&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">}); </span><span style="color:#6B737C;">//ä¸åŒäºwatchEffect,ä¸€å¼€å§‹ä¸å…è®¸ï¼Œè¦åŠ ä¸Šä¸€ä¸ªé…ç½®ï¼š{immediate:true}æ‰ä¼šç›´æ¥è¿è¡Œ</span></span>
<span class="line"><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.a</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ç¬”è¯•é¢˜: ä¸‹é¢çš„ä»£ç è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watchEffect</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">watch</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#61AFEF;">watchEffect</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//ç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;watchEffect&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//è‡ªåŠ¨æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#61AFEF;">watch</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//ä¸ä¼šç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#ABB2BF;">  () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">//æ‰‹åŠ¨å‘Šè¯‰ä»–æ”¶é›†çš„ä¾èµ–æ˜¯state.count</span></span>
<span class="line"><span style="color:#ABB2BF;">  (</span><span style="color:#E06C75;font-style:italic;">count</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">oldCount</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;watch&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">oldCount</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;start&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">//å®é˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;time out&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">//è¿™æ¬¡ä¸ºå‡†</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">count</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">//è¿™ä¸¤ä¸ª++å¯¼è‡´äº†watchEffectï¼Œwatchæ£€æµ‹åˆ°äº†å˜åŒ–ï¼Œè¿›å…¥äº†å¾®é˜Ÿåˆ—</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;end&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> watchEffect</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> watch } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({</span></span>
<span class="line"><span style="color:#B392F0;">  count</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">0</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">watchEffect(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">//ç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;watchEffect&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count); </span><span style="color:#6B737C;">//è‡ªåŠ¨æ”¶é›†ä¾èµ–</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">watch(</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">//ä¸ä¼šç«‹å³æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#B392F0;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">//æ‰‹åŠ¨å‘Šè¯‰ä»–æ”¶é›†çš„ä¾èµ–æ˜¯state.count</span></span>
<span class="line"><span style="color:#B392F0;">  (count</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> oldCount) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;watch&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> count</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> oldCount);</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;start&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">//å®é˜Ÿåˆ—</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;time out&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">; </span><span style="color:#6B737C;">//è¿™æ¬¡ä¸ºå‡†</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.count</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">; </span><span style="color:#6B737C;">//è¿™ä¸¤ä¸ª++å¯¼è‡´äº†watchEffectï¼Œwatchæ£€æµ‹åˆ°äº†å˜åŒ–ï¼Œè¿›å…¥äº†å¾®é˜Ÿåˆ—</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#FFAB70;">&quot;end&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><img src="/blog/assets/2023-02-01-15-25-57.438f544b.png" alt=""></p><h3 id="åˆ¤æ–­" tabindex="-1">åˆ¤æ–­ <a class="header-anchor" href="#åˆ¤æ–­" aria-hidden="true">#</a></h3><table><thead><tr><th>API</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>isProxy</code></td><td>åˆ¤æ–­æŸä¸ªæ•°æ®æ˜¯å¦æ˜¯ç”±<code>reactive</code>æˆ–<code>readonly</code></td></tr><tr><td><code>isReactive</code></td><td>åˆ¤æ–­æŸä¸ªæ•°æ®æ˜¯å¦æ˜¯é€šè¿‡<code>reactive</code>åˆ›å»ºçš„.è¯¦ç»†:<a href="https://v3.vuejs.org/api/basic-reactivity.html#isreactive" target="_blank" rel="noreferrer">https://v3.vuejs.org/api/basic-reactivity.html#isreactive</a></td></tr><tr><td><code>isReadonly</code></td><td>åˆ¤æ–­æŸä¸ªæ•°æ®æ˜¯å¦æ˜¯é€šè¿‡<code>readonly</code>åˆ›å»ºçš„</td></tr><tr><td><code>isRef</code></td><td>åˆ¤æ–­æŸä¸ªæ•°æ®æ˜¯å¦æ˜¯ä¸€ä¸ª<code>ref</code>å¯¹è±¡</td></tr></tbody></table><h3 id="è½¬æ¢" tabindex="-1">è½¬æ¢ <a class="header-anchor" href="#è½¬æ¢" aria-hidden="true">#</a></h3><p><strong>unref</strong> ç­‰åŒäºï¼š<code>isRef(val) ? val.value : val</code> åº”ç”¨ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useNewTodo</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">todos</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">todos</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">unref</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">todos</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useNewTodo(todos) {</span></span>
<span class="line"><span style="color:#B392F0;">  todos </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> unref(todos);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// ...</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>toRef</strong> å¾—åˆ°ä¸€ä¸ªå“åº”å¼å¯¹è±¡æŸä¸ªå±æ€§çš„ ref æ ¼å¼</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">foo</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fooRef</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">toRef</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;foo&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// fooRef: {value: ...}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">fooRef</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">foo</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">foo</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">console</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">log</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">fooRef</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 3</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({</span></span>
<span class="line"><span style="color:#B392F0;">  foo</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  bar</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">2</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fooRef</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> toRef(state</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;foo&quot;</span><span style="color:#B392F0;">); </span><span style="color:#6B737C;">// fooRef: {value: ...}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">fooRef</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.foo); </span><span style="color:#6B737C;">// 2</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.foo</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#79B8FF;">console</span><span style="color:#B392F0;">.log(</span><span style="color:#79B8FF;">fooRef</span><span style="color:#B392F0;">.value); </span><span style="color:#6B737C;">// 3</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>toRefs</strong> æŠŠä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„æ‰€æœ‰å±æ€§è½¬æ¢ä¸º ref æ ¼å¼ï¼Œç„¶ååŒ…è£…åˆ°ä¸€ä¸ª<code>plain-object</code>ä¸­è¿”å›</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">foo</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">bar</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">stateAsRefs</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">toRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">stateAsRefs: not a proxy</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">{</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  foo: { value: ... },</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  bar: { value: ... }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">*/</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({</span></span>
<span class="line"><span style="color:#B392F0;">  foo</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  bar</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">2</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">stateAsRefs</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> toRefs(state);</span></span>
<span class="line"><span style="color:#6B737C;">/*</span></span>
<span class="line"><span style="color:#6B737C;">stateAsRefs: not a proxy</span></span>
<span class="line"><span style="color:#6B737C;">{</span></span>
<span class="line"><span style="color:#6B737C;">  foo: { value: ... },</span></span>
<span class="line"><span style="color:#6B737C;">  bar: { value: ... }</span></span>
<span class="line"><span style="color:#6B737C;">}</span></span>
<span class="line"><span style="color:#6B737C;">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>åº”ç”¨ï¼š</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state1</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state2</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">d</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span><span style="color:#E06C75;">state1</span><span style="color:#ABB2BF;">, </span><span style="color:#7F848E;font-style:italic;">// lost reactivity å±•å¼€å‰‚è¿ç®—ç¬¦è®©ä»–å¤±å»äº†å“åº”å¼</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span><span style="color:#E06C75;">state2</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// lost reactivity</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state1</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">b</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state2</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">c</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">d</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span><span style="color:#61AFEF;">toRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state1</span><span style="color:#ABB2BF;">), </span><span style="color:#7F848E;font-style:italic;">// reactivity</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span><span style="color:#61AFEF;">toRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state2</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// reactivity</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// composition function</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">usePos</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">pos</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">y</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">pos</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E5C07B;">x</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">y</span><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">usePos</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// lost reactivity</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> {</span><span style="color:#E5C07B;">x</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">y</span><span style="color:#ABB2BF;">} </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">toRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">usePos</span><span style="color:#ABB2BF;">()); </span><span style="color:#7F848E;font-style:italic;">// reactivity</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">setup(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state1</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({a</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> b</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state2</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({c</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">3</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> d</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">4</span><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">state1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// lost reactivity å±•å¼€å‰‚è¿ç®—ç¬¦è®©ä»–å¤±å»äº†å“åº”å¼</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">state2 </span><span style="color:#6B737C;">// lost reactivity</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">setup(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state1</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({a</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">1</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> b</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state2</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({c</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">3</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> d</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">4</span><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">toRefs(state1)</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// reactivity</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">toRefs(state2) </span><span style="color:#6B737C;">// reactivity</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">// composition function</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> usePos(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">pos</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({x</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">0</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> y</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">});</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> pos;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">setup(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> {</span><span style="color:#79B8FF;">x</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">y</span><span style="color:#B392F0;">} </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> usePos(); </span><span style="color:#6B737C;">// lost reactivity</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> {</span><span style="color:#79B8FF;">x</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">y</span><span style="color:#B392F0;">} </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> toRefs(usePos()); </span><span style="color:#6B737C;">// reactivity</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="é™ä½å¿ƒæ™ºè´Ÿæ‹…" tabindex="-1">é™ä½å¿ƒæ™ºè´Ÿæ‹… <a class="header-anchor" href="#é™ä½å¿ƒæ™ºè´Ÿæ‹…" aria-hidden="true">#</a></h3><p>æ‰€æœ‰çš„<code>composition function</code>å‡ä»¥<code>ref</code>çš„ç»“æœè¿”å›ï¼Œä»¥ä¿è¯<code>setup</code>å‡½æ•°çš„è¿”å›ç»“æœä¸­ä¸åŒ…å«<code>reactive</code>æˆ–<code>readonly</code>ç›´æ¥äº§ç”Ÿçš„æ•°æ®</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">usePos</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">pos</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">y</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">toRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">pos</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//  {x: refObj, y: refObj}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useBooks</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">books</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">([]);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">books</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;">// books is refObj</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useLoginUser</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">({</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">isLogin</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">loginId</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">null</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">toRefs</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// { isLogin: refObj, loginId: refObj }  all ref is readonly</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// åœ¨setupå‡½æ•°ä¸­ï¼Œå°½é‡ä¿è¯è§£æ„ã€å±•å¼€å‡ºæ¥çš„æ‰€æœ‰å“åº”å¼æ•°æ®å‡æ˜¯ref</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span><span style="color:#61AFEF;">usePos</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span><span style="color:#61AFEF;">useBooks</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span><span style="color:#61AFEF;">useLoginUser</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> usePos(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">pos</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ x</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">0</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> y</span><span style="color:#F97583;">:</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> toRefs(pos); </span><span style="color:#6B737C;">//  {x: refObj, y: refObj}</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useBooks(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">books</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref([]);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    books </span><span style="color:#6B737C;">// books is refObj</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useLoginUser(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">user</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> readonly({</span></span>
<span class="line"><span style="color:#B392F0;">    isLogin</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    loginId</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#B392F0;">  });</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> toRefs(user); </span><span style="color:#6B737C;">// { isLogin: refObj, loginId: refObj }  all ref is readonly</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">setup(){</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// åœ¨setupå‡½æ•°ä¸­ï¼Œå°½é‡ä¿è¯è§£æ„ã€å±•å¼€å‡ºæ¥çš„æ‰€æœ‰å“åº”å¼æ•°æ®å‡æ˜¯ref</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">usePos()</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">useBooks()</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">useLoginUser()</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="compositionapi" tabindex="-1">CompositionApi <a class="header-anchor" href="#compositionapi" aria-hidden="true">#</a></h2><p>composition api ç›¸æ¯”äº option api æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</p><p>ä¸åŒäº reactivity apiï¼Œcomposition api æä¾›çš„å‡½æ•°å¾ˆå¤šæ˜¯ä¸ç»„ä»¶æ·±åº¦ç»‘å®šçš„ï¼Œä¸èƒ½è„±ç¦»ç»„ä»¶è€Œå­˜åœ¨ã€‚</p><h2 id="setup" tabindex="-1">setup <a class="header-anchor" href="#setup" aria-hidden="true">#</a></h2><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// component</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// è¯¥å‡½æ•°åœ¨ç»„ä»¶å±æ€§è¢«èµ‹å€¼åç«‹å³æ‰§è¡Œï¼Œæ—©äºæ‰€æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œåªè¿è¡Œä¸€æ¬¡</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// props æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ç»„ä»¶å±æ€§å€¼</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// context æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæä¾›äº†ç»„ä»¶æ‰€éœ€çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// component</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  setup(props</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> context) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// è¯¥å‡½æ•°åœ¨ç»„ä»¶å±æ€§è¢«èµ‹å€¼åç«‹å³æ‰§è¡Œï¼Œæ—©äºæ‰€æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œåªè¿è¡Œä¸€æ¬¡</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// props æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ç»„ä»¶å±æ€§å€¼</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// context æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæä¾›äº†ç»„ä»¶æ‰€éœ€çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>context å¯¹è±¡çš„æˆå‘˜</p><table><thead><tr><th>æˆå‘˜</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>attrs</td><td>å¯¹è±¡</td><td>åŒ<code>vue2</code>çš„<code>this.$attrs</code></td></tr><tr><td>slots</td><td>å¯¹è±¡</td><td>åŒ<code>vue2</code>çš„<code>this.$slots</code></td></tr><tr><td>emit</td><td>æ–¹æ³•</td><td>åŒ<code>vue2</code>çš„<code>this.$emit</code></td></tr></tbody></table><h1 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°" tabindex="-1">ç”Ÿå‘½å‘¨æœŸå‡½æ•° <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°" aria-hidden="true">#</a></h1><table><thead><tr><th>vue2 option api</th><th>vue3 option api</th><th>vue 3 composition api</th></tr></thead><tbody><tr><td>beforeCreate</td><td>beforeCreate</td><td>ä¸å†éœ€è¦ï¼Œä»£ç å¯ç›´æ¥ç½®äº setup ä¸­</td></tr><tr><td>created</td><td>created</td><td>ä¸å†éœ€è¦ï¼Œä»£ç å¯ç›´æ¥ç½®äº setup ä¸­</td></tr><tr><td>beforeMount</td><td>beforeMount</td><td>onBeforeMount</td></tr><tr><td>mounted</td><td>mounted</td><td>onMounted</td></tr><tr><td>beforeUpdate</td><td>beforeUpdate</td><td>onBeforeUpdate</td></tr><tr><td>updated</td><td>updated</td><td>onUpdated</td></tr><tr><td>beforeDestroy</td><td>æ”¹ beforeUnmount</td><td>onBeforeUnmount</td></tr><tr><td>destroyed</td><td>æ”¹ unmounted</td><td>onUnmounted</td></tr><tr><td>errorCaptured</td><td>errorCaptured</td><td>onErrorCaptured</td></tr><tr><td>-</td><td>æ–° renderTracked</td><td>onRenderTracked</td></tr><tr><td>-</td><td>æ–° renderTriggered</td><td>onRenderTriggered</td></tr></tbody></table><p>beforeCreate å’Œ created å»é™¤ï¼Ÿåœ¨è¿™ä¸¤ä¸ªåï¼Œå·²ç»æœ‰äº†æ•°æ®å“åº”å¼ï¼Œè€Œåœ¨ composition api ä¸­ï¼Œå“åº”å¼å·²ç»è¢«æŠ½ç¦»å‡ºå»ï¼ˆè§ä¸ŠèŠ‚ï¼‰ æ–°å¢é’©å­å‡½æ•°è¯´æ˜ï¼š</p><table><thead><tr><th>é’©å­å‡½æ•°</th><th>å‚æ•°</th><th>æ‰§è¡Œæ—¶æœº</th></tr></thead><tbody><tr><td>renderTracked</td><td>DebuggerEvent</td><td>æ¸²æŸ“ vdom æ”¶é›†åˆ°çš„æ¯ä¸€æ¬¡ä¾èµ–æ—¶</td></tr><tr><td>renderTriggered</td><td>DebuggerEvent</td><td>æŸä¸ªä¾èµ–å˜åŒ–å¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶</td></tr></tbody></table><p>DebuggerEvent:</p><ul><li>target: è·Ÿè¸ªæˆ–è§¦å‘æ¸²æŸ“çš„å¯¹è±¡</li><li>key: è·Ÿè¸ªæˆ–è§¦å‘æ¸²æŸ“çš„å±æ€§</li><li>type: è·Ÿè¸ªæˆ–è§¦å‘æ¸²æŸ“çš„æ–¹å¼</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>composition api ç›¸æ¯”äº option api æœ‰å“ªäº›ä¼˜åŠ¿ï¼Ÿ</p><blockquote><ol><li>ä¸ºäº†æ›´å¥½çš„é€»è¾‘å¤ç”¨ï¼ˆç²’åº¦æ›´ç»†äº†ï¼Œç»„ä»¶é—´ç›¸åŒçš„åŠŸèƒ½é€»è¾‘å¤ç”¨ï¼‰å’Œä»£ç ç»„ç»‡</li><li>æ›´å¥½çš„ç±»å‹æ¨å¯¼ï¼ˆåˆ©äº TypeScript ç±»å‹æ¨å¯¼ï¼‰</li></ol></blockquote><p>æœ‰äº† composition apiï¼Œé…åˆ reactivity apiï¼Œå¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨è¿›è¡Œæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œä½¿å¾—ç»„ä»¶ä¸­ä¸åŒçš„åŠŸèƒ½é«˜åº¦èšåˆï¼Œæå‡äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚å¯¹äºä¸åŒç»„ä»¶çš„ç›¸åŒåŠŸèƒ½ï¼Œä¹Ÿèƒ½å¤Ÿæ›´å¥½çš„å¤ç”¨ã€‚ ç›¸æ¯”äº option apiï¼Œcomposition api ä¸­æ²¡æœ‰äº†æŒ‡å‘å¥‡æ€ªçš„ thisï¼Œæ‰€æœ‰çš„ api å˜å¾—æ›´åŠ å‡½æ•°å¼ï¼Œè¿™æœ‰åˆ©äºå’Œç±»å‹æ¨æ–­ç³»ç»Ÿæ¯”å¦‚ TS æ·±åº¦é…åˆã€‚</p></div><p><a href="https://vuejs.org/guide/built-ins/suspense.html" target="_blank" rel="noreferrer">https://vuejs.org/guide/built-ins/suspense.html</a></p><h2 id="å…±äº«æ•°æ®" tabindex="-1">å…±äº«æ•°æ® <a class="header-anchor" href="#å…±äº«æ•°æ®" aria-hidden="true">#</a></h2><h3 id="vuex-æ–¹æ¡ˆ" tabindex="-1">vuex æ–¹æ¡ˆ <a class="header-anchor" href="#vuex-æ–¹æ¡ˆ" aria-hidden="true">#</a></h3><p>å®‰è£…<code>vuex@4.x</code></p><p>ä¸¤ä¸ªé‡è¦å˜åŠ¨ï¼š</p><ul><li>å»æ‰äº†æ„é€ å‡½æ•°<code>Vuex</code>ï¼Œè€Œä½¿ç”¨<code>createStore</code>åˆ›å»ºä»“åº“</li><li>ä¸ºäº†é…åˆ<code>composition api</code>ï¼Œæ–°å¢<code>useStore</code>å‡½æ•°è·å¾—ä»“åº“å¯¹è±¡</li></ul><h3 id="global-state" tabindex="-1">global state <a class="header-anchor" href="#global-state" aria-hidden="true">#</a></h3><p>ç”±äº<code>vue3</code>çš„å“åº”å¼ç³»ç»Ÿæœ¬èº«å¯ä»¥è„±ç¦»ç»„ä»¶è€Œå­˜åœ¨ï¼Œå› æ­¤å¯ä»¥å……åˆ†åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œè½»æ¾åˆ¶é€ å¤šä¸ªå…¨å±€å“åº”å¼æ•°æ®</p><p><img src="/blog/assets/2023-02-01-15-26-20.04aff82f.png" alt=""></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// store/useLoginUser æä¾›å½“å‰ç™»å½•ç”¨æˆ·çš„å…±äº«æ•°æ®</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">userServ</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;../api/user&quot;</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// å¯¼å…¥apiæ¨¡å—</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åˆ›å»ºé»˜è®¤çš„å…¨å±€å•ä¾‹å“åº”å¼æ•°æ®ï¼Œä»…ä¾›è¯¥æ¨¡å—å†…éƒ¨ä½¿ç”¨</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// å¯¹å¤–æš´éœ²çš„æ•°æ®æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨toRefsè¿›è¡Œå°è£…ï¼Œä»è€Œé¿å…è§£æ„æˆ–å±•å¼€åå“åº”å¼ä¸¢å¤±</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">loginUserStore</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç™»å½•</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">login</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">loginId</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">loginPwd</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">userServ</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">login</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">loginId</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">loginPwd</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loginUser</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// é€€å‡º</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">loginOut</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">userServ</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loginOut</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loginUser</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æ¢å¤ç™»å½•çŠ¶æ€</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">whoAmI</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">userServ</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">whoAmI</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loginUser</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// store/useLoginUser æä¾›å½“å‰ç™»å½•ç”¨æˆ·çš„å…±äº«æ•°æ®</span></span>
<span class="line"><span style="color:#6B737C;">// ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> readonly } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">*</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">as</span><span style="color:#B392F0;"> userServ </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;../api/user&quot;</span><span style="color:#B392F0;">; </span><span style="color:#6B737C;">// å¯¼å…¥apiæ¨¡å—</span></span>
<span class="line"><span style="color:#6B737C;">// åˆ›å»ºé»˜è®¤çš„å…¨å±€å•ä¾‹å“åº”å¼æ•°æ®ï¼Œä»…ä¾›è¯¥æ¨¡å—å†…éƒ¨ä½¿ç”¨</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ user</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> loading</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#6B737C;">// å¯¹å¤–æš´éœ²çš„æ•°æ®æ˜¯åªè¯»çš„ï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹</span></span>
<span class="line"><span style="color:#6B737C;">// ä¹Ÿå¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨toRefsè¿›è¡Œå°è£…ï¼Œä»è€Œé¿å…è§£æ„æˆ–å±•å¼€åå“åº”å¼ä¸¢å¤±</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">loginUserStore</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> readonly(state);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// ç™»å½•</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> login(loginId</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> loginPwd) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">true</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">user</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">userServ</span><span style="color:#B392F0;">.login(loginId</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> loginPwd);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loginUser </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> user;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">// é€€å‡º</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> loginOut() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">true</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">userServ</span><span style="color:#B392F0;">.loginOut();</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loginUser </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#6B737C;">// æ¢å¤ç™»å½•çŠ¶æ€</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> whoAmI() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">true</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">user</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">userServ</span><span style="color:#B392F0;">.whoAmI();</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loginUser </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> user;</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="provide-inject" tabindex="-1">Provide&amp;Inject <a class="header-anchor" href="#provide-inject" aria-hidden="true">#</a></h3><p>åœ¨<code>vue2</code>ä¸­ï¼Œæä¾›äº†<code>provide</code>å’Œ<code>inject</code>é…ç½®ï¼Œå¯ä»¥è®©å¼€å‘è€…åœ¨é«˜å±‚ç»„ä»¶ä¸­æ³¨å…¥æ•°æ®ï¼Œç„¶ååœ¨åä»£ç»„ä»¶ä¸­ä½¿ç”¨</p><p><img src="/blog/assets/2023-02-01-15-26-32.a4ca8c1d.png" alt=""></p><p>é™¤äº†å…¼å®¹<code>vue2</code>çš„é…ç½®å¼æ³¨å…¥ï¼Œ<code>vue3</code>åœ¨<code>composition api</code>ä¸­æ·»åŠ äº†<code>provide</code>å’Œ<code>inject</code>æ–¹æ³•ï¼Œå¯ä»¥åœ¨<code>setup</code>å‡½æ•°ä¸­æ³¨å…¥å’Œä½¿ç”¨æ•°æ®</p><p><img src="/blog/assets/2023-02-01-15-26-38.bd90e636.png" alt=""></p><p>è€ƒè™‘åˆ°æœ‰äº›æ•°æ®éœ€è¦åœ¨æ•´ä¸ª vue åº”ç”¨ä¸­ä½¿ç”¨ï¼Œ<code>vue3</code>è¿˜åœ¨åº”ç”¨å®ä¾‹ä¸­åŠ å…¥äº†<code>provide</code>æ–¹æ³•ï¼Œç”¨äºæä¾›æ•´ä¸ªåº”ç”¨çš„å…±äº«æ•°æ®</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#61AFEF;">creaetApp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">App</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;foo&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;bar&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">creaetApp(App).provide(</span><span style="color:#FFAB70;">&quot;foo&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">1</span><span style="color:#B392F0;">)).provide(</span><span style="color:#FFAB70;">&quot;bar&quot;</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">2</span><span style="color:#B392F0;">)).mount(</span><span style="color:#FFAB70;">&quot;#app&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/blog/assets/2023-02-01-15-26-45.869e5c75.png" alt=""></p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œåœ¨æ•´ä¸ª vue åº”ç”¨ä¸­æä¾›å…±äº«æ•°æ®</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// store/useLoginUser æä¾›å½“å‰ç™»å½•ç”¨æˆ·çš„å…±äº«æ•°æ®</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">readonly</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">reactive</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">inject</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Symbol</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// Provideçš„key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åœ¨ä¼ å…¥çš„vueåº”ç”¨å®ä¾‹ä¸­æä¾›æ•°æ®</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">provideStore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// åˆ›å»ºé»˜è®¤çš„å“åº”å¼æ•°æ®</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">reactive</span><span style="color:#ABB2BF;">({ </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// ç™»å½•</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">login</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">loginId</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">loginPwd</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">userServ</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">login</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">loginId</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">loginPwd</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loginUser</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// é€€å‡º</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">loginOut</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">userServ</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loginOut</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loginUser</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// æ¢å¤ç™»å½•çŠ¶æ€</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">whoAmI</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">user</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">userServ</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">whoAmI</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loading</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">state</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">loginUser</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// æä¾›å…¨å±€æ•°æ®</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">provide</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">: </span><span style="color:#61AFEF;">readonly</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">state</span><span style="color:#ABB2BF;">), </span><span style="color:#7F848E;font-style:italic;">// å¯¹å¤–åªè¯»</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">login</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">loginOut</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">whoAmI</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useStore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">defaultValue</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">inject</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">defaultValue</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// store/index</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// åº”ç”¨æ‰€æœ‰store</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">provideStore</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">provideLoginUserStore</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./useLoginUser&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ç»§ç»­å¯¼å…¥å…¶ä»–å…±äº«æ•°æ®æ¨¡å—...</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// import { provideStore as provideNewsStore } from &quot;./useNews&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// æä¾›ç»Ÿä¸€çš„æ•°æ®æ³¨å…¥æ¥å£</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">provideStore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">app</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">provideLoginUserStore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// ç»§ç»­æ³¨å…¥å…¶ä»–å…±äº«æ•°æ®</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// provideNewsStore(app);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// main.js</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">createApp</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">provideStore</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./store&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createApp</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">App</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">provideStore</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">app</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mount</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;#app&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#6B737C;">// store/useLoginUser æä¾›å½“å‰ç™»å½•ç”¨æˆ·çš„å…±äº«æ•°æ®</span></span>
<span class="line"><span style="color:#6B737C;">// ä»¥ä¸‹ä»£ç ä»…ä¾›å‚è€ƒ</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { readonly</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> reactive</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> inject } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">key</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> Symbol(); </span><span style="color:#6B737C;">// Provideçš„key</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// åœ¨ä¼ å…¥çš„vueåº”ç”¨å®ä¾‹ä¸­æä¾›æ•°æ®</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> provideStore(app) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// åˆ›å»ºé»˜è®¤çš„å“åº”å¼æ•°æ®</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> reactive({ user</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> loading</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;"> });</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// ç™»å½•</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> login(loginId</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> loginPwd) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">true</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">user</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">userServ</span><span style="color:#B392F0;">.login(loginId</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> loginPwd);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loginUser </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> user;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// é€€å‡º</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> loginOut() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">true</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">userServ</span><span style="color:#B392F0;">.loginOut();</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loginUser </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// æ¢å¤ç™»å½•çŠ¶æ€</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> whoAmI() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">true</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">user</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">userServ</span><span style="color:#B392F0;">.whoAmI();</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loading </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">false</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">state</span><span style="color:#B392F0;">.loginUser </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> user;</span></span>
<span class="line"><span style="color:#B392F0;">  }</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// æä¾›å…¨å±€æ•°æ®</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">app</span><span style="color:#B392F0;">.provide(key</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    state</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> readonly(state)</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> </span><span style="color:#6B737C;">// å¯¹å¤–åªè¯»</span></span>
<span class="line"><span style="color:#B392F0;">    login</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    loginOut</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    whoAmI</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  });</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useStore(defaultValue </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">null</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> inject(key</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> defaultValue);</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// store/index</span></span>
<span class="line"><span style="color:#6B737C;">// åº”ç”¨æ‰€æœ‰store</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { provideStore </span><span style="color:#F97583;">as</span><span style="color:#B392F0;"> provideLoginUserStore } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./useLoginUser&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#6B737C;">// ç»§ç»­å¯¼å…¥å…¶ä»–å…±äº«æ•°æ®æ¨¡å—...</span></span>
<span class="line"><span style="color:#6B737C;">// import { provideStore as provideNewsStore } from &quot;./useNews&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// æä¾›ç»Ÿä¸€çš„æ•°æ®æ³¨å…¥æ¥å£</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">function</span><span style="color:#B392F0;"> provideStore(app) {</span></span>
<span class="line"><span style="color:#B392F0;">  provideLoginUserStore(app);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// ç»§ç»­æ³¨å…¥å…¶ä»–å…±äº«æ•°æ®</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// provideNewsStore(app);</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6B737C;">// main.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { createApp } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> provideStore </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./store&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">app</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> createApp(App);</span></span>
<span class="line"><span style="color:#B392F0;">provideStore(app);</span></span>
<span class="line"><span style="color:#79B8FF;">app</span><span style="color:#B392F0;">.mount(</span><span style="color:#FFAB70;">&quot;#app&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h3 id="å¯¹æ¯”" tabindex="-1">å¯¹æ¯” <a class="header-anchor" href="#å¯¹æ¯”" aria-hidden="true">#</a></h3><table><thead><tr><th></th><th>vuex</th><th>global state</th><th>Provide&amp;Inject</th></tr></thead><tbody><tr><td>ç»„ä»¶æ•°æ®å…±äº«</td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td>å¯å¦è„±ç¦»ç»„ä»¶</td><td>âœ…</td><td>âœ…</td><td>âŒ å’Œ vue åº”ç”¨/ç»„ä»¶æ·±å…¥ç»‘å®š</td></tr><tr><td>è°ƒè¯•å·¥å…·</td><td>âœ…</td><td>âŒ</td><td>âœ…</td></tr><tr><td>çŠ¶æ€æ ‘</td><td>âœ…</td><td>è‡ªè¡Œå†³å®š</td><td>è‡ªè¡Œå†³å®š</td></tr><tr><td>é‡çº§</td><td>é‡</td><td>è½»</td><td>è½»</td></tr></tbody></table><h2 id="script-setup" tabindex="-1">script setup <a class="header-anchor" href="#script-setup" aria-hidden="true">#</a></h2><blockquote><p><code>script setup</code>çš„ææ¡ˆæ–‡æ¡£ï¼š<a href="https://github.com/vuejs/rfcs/blob/script-setup-2/active-rfcs/0000-script-setup.md" target="_blank" rel="noreferrer">https://github.com/vuejs/rfcs/blob/script-setup-2/active-rfcs/0000-script-setup.md</a></p></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">hello-world</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">hello-world</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;the number is {{ count }}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;increase&quot;</span><span style="color:#ABB2BF;">&gt;click to increase&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">HelloWorld</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./HelloWorld.vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increase</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">HelloWorld</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">count</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">increase</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">hello-world</span><span style="color:#B392F0;">&gt;&lt;/</span><span style="color:#FFAB70;">hello-world</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;the number is {{ count }}&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> @click</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;increase&quot;</span><span style="color:#B392F0;">&gt;click to increase&lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> HelloWorld </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./HelloWorld.vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { ref } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  setup() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> increase </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      HelloWorld</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">      count</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">      increase</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>å½“æˆ‘ä»¬ä½¿ç”¨<code>composition api</code>æ—¶ï¼Œå¾€å¾€æ•´ä¸ªç»„ä»¶å¯¹è±¡çš„é…ç½®ä¸­åªæœ‰ä¸€ä¸ª<code>setup</code></p><p>å› æ­¤ï¼Œ<code>vue3</code>åœ¨<code>SFC</code>ä¸­ä½¿ç”¨<code>script setup</code>æ¥ç®€åŒ–ä»£ç ä¹¦å†™</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">hello-world</span><span style="color:#ABB2BF;">&gt;&lt;/</span><span style="color:#E06C75;">hello-world</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;the number is {{ count }}&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;increase&quot;</span><span style="color:#ABB2BF;">&gt;click to increase&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">HelloWorld</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./HelloWorld.vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increase</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">count</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">hello-world</span><span style="color:#B392F0;">&gt;&lt;/</span><span style="color:#FFAB70;">hello-world</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;the number is {{ count }}&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> @click</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;increase&quot;</span><span style="color:#B392F0;">&gt;click to increase&lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;"> setup&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> HelloWorld </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./HelloWorld.vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { ref } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> increase </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#79B8FF;">count</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åœ¨<code>script setup</code>ä¸­ï¼Œæ‰€æœ‰çš„é¡¶çº§ç»‘å®šéƒ½ä¼šè¢«ä½¿ç”¨<code>setup</code>çš„è¿”å›å€¼ï¼Œé¡¶çº§ç»‘å®šåŒ…æ‹¬ï¼š</p><ul><li><code>import</code>å¯¼å…¥</li><li>é¡¶çº§å˜é‡</li></ul><h3 id="å¦‚ä½•ä½¿ç”¨ç»„ä»¶å±æ€§" tabindex="-1">å¦‚ä½•ä½¿ç”¨ç»„ä»¶å±æ€§ <a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨ç»„ä»¶å±æ€§" aria-hidden="true">#</a></h3><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello {{ props.title }}&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">defineProps</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">props</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">defineProps</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello {{ props.title }}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;"> setup&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { defineProps } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">props</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> defineProps([</span><span style="color:#FFAB70;">&quot;title&quot;</span><span style="color:#B392F0;">]);</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç¼–è¯‘ç»“æœ</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello {{ props.title }}&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">props</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;title&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {},</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello {{ props.title }}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  props</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> [</span><span style="color:#FFAB70;">&quot;title&quot;</span><span style="color:#B392F0;">]</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  setup() {}</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="å¦‚ä½•ä½¿ç”¨ç»„ä»¶äº‹ä»¶" tabindex="-1">å¦‚ä½•ä½¿ç”¨ç»„ä»¶äº‹ä»¶ <a class="header-anchor" href="#å¦‚ä½•ä½¿ç”¨ç»„ä»¶äº‹ä»¶" aria-hidden="true">#</a></h3><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;handleClick&quot;</span><span style="color:#ABB2BF;">&gt;Click Me&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">defineEmit</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">emit</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">defineEmit</span><span style="color:#ABB2BF;">([</span><span style="color:#98C379;">&quot;click&quot;</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">handleClick</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;click&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> @click</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;handleClick&quot;</span><span style="color:#B392F0;">&gt;Click Me&lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;"> setup&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { defineEmit } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">emit</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> defineEmit([</span><span style="color:#FFAB70;">&quot;click&quot;</span><span style="color:#B392F0;">]);</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> handleClick </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  emit(</span><span style="color:#FFAB70;">&quot;click&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ç¼–è¯‘ç»“æœï¼š</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;handleClick&quot;</span><span style="color:#ABB2BF;">&gt;Click Me&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">emits</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;click&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">props</span><span style="color:#ABB2BF;">, { </span><span style="color:#E06C75;font-style:italic;">emit</span><span style="color:#ABB2BF;"> }) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">handleClick</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">emit</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;click&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">handleClick</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> @click</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;handleClick&quot;</span><span style="color:#B392F0;">&gt;Click Me&lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  emits</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> [</span><span style="color:#FFAB70;">&quot;click&quot;</span><span style="color:#B392F0;">]</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  setup(props</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> { emit }) {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> handleClick </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      emit(</span><span style="color:#FFAB70;">&quot;click&quot;</span><span style="color:#B392F0;">);</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      handleClick</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="ref-sugar" tabindex="-1">ref sugar <a class="header-anchor" href="#ref-sugar" aria-hidden="true">#</a></h2><blockquote><p><code>ref</code>è¯­æ³•ç³–ç›®å‰ä»åœ¨ææ¡ˆé˜¶æ®µï¼Œå…·æœ‰ä¸€å®šçš„äº‰è®®</p><p><code>ref sugar</code>ææ¡ˆåœ°å€ï¼š<a href="https://github.com/vuejs/rfcs/blob/ref-sugar/active-rfcs/0000-ref-sugar.md" target="_blank" rel="noreferrer">https://github.com/vuejs/rfcs/blob/ref-sugar/active-rfcs/0000-ref-sugar.md</a></p></blockquote><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- å—æ¨¡æ¿ä¸Šä¸‹æ–‡ä»£ç†çš„å½±å“ï¼Œåœ¨æ¨¡æ¿ä¸­ç›´æ¥å½“åšåŸå§‹å€¼ä½¿ç”¨ --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello, {{ fullName }}&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;è®¾ç½®å§“å&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    å§“ï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;firstName&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    åï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;lastName&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">computed</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">firstName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;é‚“&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// firstName æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lastName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;æ—­æ˜&quot;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// lastName æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// åœ¨ setup å‡½æ•°ä¸­ï¼Œåˆ™å¿…é¡»æŠŠ ref å½“åšå¯¹è±¡ä½¿ç”¨</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">computed</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">firstName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lastName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">firstName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">lastName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">fullName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">&lt;!-- å—æ¨¡æ¿ä¸Šä¸‹æ–‡ä»£ç†çš„å½±å“ï¼Œåœ¨æ¨¡æ¿ä¸­ç›´æ¥å½“åšåŸå§‹å€¼ä½¿ç”¨ --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello, {{ fullName }}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;è®¾ç½®å§“å&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    å§“ï¼š</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;text&quot;</span><span style="color:#B392F0;"> v-model</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;firstName&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    åï¼š</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;text&quot;</span><span style="color:#B392F0;"> v-model</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;lastName&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { ref</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> computed } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  setup() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">firstName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#FFAB70;">&quot;é‚“&quot;</span><span style="color:#B392F0;">); </span><span style="color:#6B737C;">// firstName æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lastName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#FFAB70;">&quot;æ—­æ˜&quot;</span><span style="color:#B392F0;">); </span><span style="color:#6B737C;">// lastName æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// åœ¨ setup å‡½æ•°ä¸­ï¼Œåˆ™å¿…é¡»æŠŠ ref å½“åšå¯¹è±¡ä½¿ç”¨</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> computed(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">firstName</span><span style="color:#B392F0;">.value </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lastName</span><span style="color:#B392F0;">.value);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      firstName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">      lastName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">      fullName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>ä½¿ç”¨<code>ref</code>æ—¶ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å¿ƒæ™ºè´Ÿæ‹…ï¼š</p><ul><li>æ¨¡æ¿å’Œ<code>setup</code>ä¸­å¯¹å¾…<code>ref</code>ä¸ä¸€è‡´</li><li><code>ref</code>ã€<code>computed</code>åŒ<code>reactive</code>å¸¦æ¥çš„å“åº”æ•°æ®ç»“æ„ä¸ä¸€è‡´</li></ul><p>ä¸ºè§£å†³ä»¥ä¸Šé—®é¢˜ï¼Œ<code>vue3</code>åœ¨<code>SFC</code>ä¸­æå‡º<code>ref sugar</code>æ–¹æ¡ˆï¼Œå®ƒæ˜¯åœ¨<code>script setup</code>æ–¹æ¡ˆä¸Šè¿›ä¸€æ­¥çš„æ¼”åŒ–</p><p>ä¸Šè¿°ä»£ç å¯ä»¥ç”¨<code>ref sugar</code>ç®€åŒ–ä¸º</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- ä½¿ç”¨refæ ‡è®°çš„æ•°æ®ç›´æ¥ä½¿ç”¨å³å¯ --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello, {{ fullName }}&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;è®¾ç½®å§“å&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    å§“ï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;firstName&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    åï¼š</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">type</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">v-model</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;lastName&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">computed</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">ref: </span><span style="color:#E06C75;">firstName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;é‚“&quot;</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªref</span></span>
<span class="line"><span style="color:#ABB2BF;">ref: </span><span style="color:#E06C75;">lastName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;æ—­æ˜&quot;</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// è¿™æ˜¯ä¸€ä¸ªref</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// ä½¿ç”¨refæ ‡è®°çš„æ•°æ®ç›´æ¥ä½¿ç”¨å³å¯</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">computed</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">firstName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">lastName</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">&lt;!-- ä½¿ç”¨refæ ‡è®°çš„æ•°æ®ç›´æ¥ä½¿ç”¨å³å¯ --&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello, {{ fullName }}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;è®¾ç½®å§“å&lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    å§“ï¼š</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;text&quot;</span><span style="color:#B392F0;"> v-model</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;firstName&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    åï¼š</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">input</span><span style="color:#B392F0;"> type</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;text&quot;</span><span style="color:#B392F0;"> v-model</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;lastName&quot;</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;"> setup&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { computed } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">ref</span><span style="color:#BBBBBB;">:</span><span style="color:#B392F0;"> firstName </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;é‚“&quot;</span><span style="color:#B392F0;">; </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªref</span></span>
<span class="line"><span style="color:#B392F0;">ref</span><span style="color:#BBBBBB;">:</span><span style="color:#B392F0;"> lastName </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;æ—­æ˜&quot;</span><span style="color:#B392F0;">; </span><span style="color:#6B737C;">// è¿™æ˜¯ä¸€ä¸ªref</span></span>
<span class="line"><span style="color:#6B737C;">// ä½¿ç”¨refæ ‡è®°çš„æ•°æ®ç›´æ¥ä½¿ç”¨å³å¯</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> computed(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> firstName </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> lastName);</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ä¸Šè¿°<code>js</code>éƒ¨åˆ†ä»£ç ä¼šè¢«ç¼–è¯‘ä¸º</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">setup</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">computed</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">firstName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;é‚“&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lastName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;æ—­æ˜&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fullName</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">computed</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">firstName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">lastName</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;"> setup&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { computed</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> ref } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">firstName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;é‚“&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lastName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;æ—­æ˜&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">fullName</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> computed(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">firstName</span><span style="color:#B392F0;">.value </span><span style="color:#F97583;">+</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">lastName</span><span style="color:#B392F0;">.value);</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="äº‰è®®" tabindex="-1">äº‰è®® <a class="header-anchor" href="#äº‰è®®" aria-hidden="true">#</a></h3><ul><li><code>ref sugar</code>å¸¦æ¥äº†æ–°çš„<code>js</code>è¯­ä¹‰ï¼Œå¹¶ä¸”åŒ<code>TypeScript</code>è¯­ä¹‰å†²çª</li><li><code>ref sugar</code>ä»…åœ¨<code>script setup</code>ä¸­æœ‰æ•ˆï¼Œå‡ºäº†<code>SFC</code>ç¯å¢ƒå°±ä¼šå¤±æ•ˆï¼Œå¿ƒæ™ºè´Ÿæ‹…ä¸å‡åå¢</li><li><code>ref sugar</code>è™½ç„¶é™ä½äº†åˆå­¦è€…çš„<em>ä½¿ç”¨æˆæœ¬</em>ï¼Œä½†å´å¢åŠ äº†<em>ç†è§£æˆæœ¬</em></li><li>å½“ä½¿ç”¨<code>TypeScript</code>çš„æ—¶å€™ï¼Œå¯ä»¥ä»ç¼–è¾‘å™¨ä¸­è·å¾—æ™ºèƒ½æç¤ºï¼Œå¯ä»¥å¾ˆè½»æ¾çš„è¾¨åˆ«ä¸€ä¸ªæ•°æ®æ˜¯å¦æ˜¯<code>ref</code>ï¼Œæ ¹æœ¬æ²¡å¿…è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦åˆ™ä¼šè®©äº‹æƒ…å˜å¾—è¶Šæ¥è¶Šå¤æ‚ã€‚</li></ul><h2 id="suspence" tabindex="-1">Suspence <a class="header-anchor" href="#suspence" aria-hidden="true">#</a></h2><p><code>UserName</code>ç»„ä»¶çš„<code>setup</code>å‡½æ•°æ˜¯å¼‚æ­¥çš„ï¼Œåªæœ‰ç­‰åˆ°å®ƒçš„<code>setup</code>å‡½æ•°åŠ è½½å®Œæˆåæ‰èƒ½å¤Ÿæ˜¾ç¤ºæ¨¡æ¿</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Hello {{ name }}&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">delay</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">duration</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Promise</span><span style="color:#ABB2BF;">((</span><span style="color:#E06C75;font-style:italic;">resolve</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setTimeout</span><span style="color:#ABB2BF;">(() </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">resolve</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }, </span><span style="color:#E06C75;">duration</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">delay</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;é‚“å“¥&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Hello {{ name }}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> delay(duration </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> </span><span style="color:#F8F8F8;">1000</span><span style="color:#B392F0;">) {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">new</span><span style="color:#B392F0;"> </span><span style="color:#79B8FF;">Promise</span><span style="color:#B392F0;">((resolve) </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    setTimeout(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      resolve();</span></span>
<span class="line"><span style="color:#B392F0;">    }</span><span style="color:#BBBBBB;">,</span><span style="color:#B392F0;"> duration);</span></span>
<span class="line"><span style="color:#B392F0;">  });</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">async</span><span style="color:#B392F0;"> setup() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">await</span><span style="color:#B392F0;"> delay();</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      name</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;é‚“å“¥&quot;</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>App</code>ç»„ä»¶ä½¿ç”¨äº†<code>UserName</code>ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨äº†<code>Suspense</code>ç»„ä»¶ç­‰å¾…<code>UserName</code>ç»„ä»¶æ¸²æŸ“å®Œæˆã€‚</p><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">Suspense</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;"> #</span><span style="color:#D19A66;">default</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">UserName</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;"> #</span><span style="color:#D19A66;">fallback</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Loading...&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">Suspense</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">UserName</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;./UserName.vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">components</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">UserName</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">Suspense</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;"> #default&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">UserName</span><span style="color:#B392F0;"> /&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;"> #fallback&gt;</span></span>
<span class="line"><span style="color:#B392F0;">      &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;Loading...&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#FFAB70;">Suspense</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> UserName </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;./UserName.vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  components</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    UserName</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="typescript" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript" aria-hidden="true">#</a></h2><p><code>vue3</code>å¯¹<code>TypeScript</code>æ”¯æŒè‰¯å¥½ï¼Œæ— è®ºä½¿ç”¨<code>vue-cli</code>è¿˜æ˜¯<code>vite</code>ï¼Œéƒ½å¯ä»¥è¾¾åˆ°å¼€ç®±å³ç”¨çš„æ•ˆæœã€‚</p><blockquote><p>ä½¿ç”¨<code>vite</code>çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰é’ˆå¯¹<code>.vue</code>æ–‡ä»¶çš„ç±»å‹å®šä¹‰ï¼Œéœ€è¦æ‰‹åŠ¨å®šä¹‰ï¼Œä»¥é¿å…ç¼–è¾‘å™¨æŠ¥é”™</p></blockquote><h2 id="è‡ªå®šä¹‰æ¸²æŸ“å™¨" tabindex="-1">è‡ªå®šä¹‰æ¸²æŸ“å™¨ <a class="header-anchor" href="#è‡ªå®šä¹‰æ¸²æŸ“å™¨" aria-hidden="true">#</a></h2><p><img src="/blog/assets/2023-02-01-15-27-05.a95f9201.png" alt=""></p><p><code>vue3</code>æœ‰ç€æ¸…æ™°çš„æ¨¡å—ç»“æ„ï¼Œç‰¹åˆ«æ˜¯å®ƒå°†<code>dom</code>æ“ä½œè¿›è¡Œäº†åˆ†ç¦»ï¼Œä½¿å¾—<code>vue3</code>çš„æ ¸å¿ƒæ¨¡å—ä¸<code>dom</code>æ“ä½œè„±é’©ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå°±éå¸¸ä¾¿äºæˆ‘ä»¬æ›¿æ¢æˆå…¶ä»–çš„æ¸²æŸ“æ¨¡å¼ã€‚</p><h2 id="hook-èŒƒå¼" tabindex="-1">hook èŒƒå¼ <a class="header-anchor" href="#hook-èŒƒå¼" aria-hidden="true">#</a></h2><div class="language-vue line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki one-dark-pro vp-code-dark"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;count:{{ countRef }}&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;decrease&quot;</span><span style="color:#ABB2BF;">&gt;decrease&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">@click</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;increase&quot;</span><span style="color:#ABB2BF;">&gt;increase&lt;/</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> { </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;"> } </span><span style="color:#C678DD;">from</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vue&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">function</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">useCount</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">countRef</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ref</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">//å…·æœ‰å“åº”å¼äº†</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">// console.log(countRef);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">increase</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">countRef</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">decrease</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> () </span><span style="color:#C678DD;">=&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">countRef</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#56B6C2;">--</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">countRef</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">increase</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">decrease</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  };</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">export</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">setup</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// console.log(&quot;æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¹‹å‰è‡ªåŠ¨è°ƒç”¨&quot;);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// console.log(this); // this -&gt; undefined</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// setupä¸­ï¼Œcountæ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// å®ä¾‹ä»£ç†ä¸­ï¼Œcountæ˜¯ä¸€ä¸ªcount.value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//1. æ–°å¢</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//2. ä¿®æ”¹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//3. åˆ é™¤</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      ...</span><span style="color:#61AFEF;">useCount</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  },</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><pre class="shiki min-dark vp-code-light"><code><span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;count:{{ countRef }}&lt;/</span><span style="color:#FFAB70;">h1</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> @click</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;decrease&quot;</span><span style="color:#B392F0;">&gt;decrease&lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">    &lt;</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;"> @click</span><span style="color:#F97583;">=</span><span style="color:#FFAB70;">&quot;increase&quot;</span><span style="color:#B392F0;">&gt;increase&lt;/</span><span style="color:#FFAB70;">button</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">  &lt;/</span><span style="color:#FFAB70;">p</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">template</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">&lt;</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#B392F0;"> { ref } </span><span style="color:#F97583;">from</span><span style="color:#B392F0;"> </span><span style="color:#FFAB70;">&quot;vue&quot;</span><span style="color:#B392F0;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> useCount() {</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">let</span><span style="color:#B392F0;"> countRef </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> ref(</span><span style="color:#F8F8F8;">0</span><span style="color:#B392F0;">); </span><span style="color:#6B737C;">//å…·æœ‰å“åº”å¼äº†</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#6B737C;">// console.log(countRef);</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> increase </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">countRef</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">++</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">const</span><span style="color:#B392F0;"> decrease </span><span style="color:#F97583;">=</span><span style="color:#B392F0;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#79B8FF;">countRef</span><span style="color:#B392F0;">.value</span><span style="color:#F97583;">--</span><span style="color:#B392F0;">;</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">  </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">    countRef</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    increase</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    decrease</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">  };</span></span>
<span class="line"><span style="color:#B392F0;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#B392F0;"> </span><span style="color:#F97583;">default</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">  setup() {</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// console.log(&quot;æ‰€æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¹‹å‰è‡ªåŠ¨è°ƒç”¨&quot;);</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// console.log(this); // this -&gt; undefined</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// setupä¸­ï¼Œcountæ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">// å®ä¾‹ä»£ç†ä¸­ï¼Œcountæ˜¯ä¸€ä¸ªcount.value</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">//1. æ–°å¢</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">//2. ä¿®æ”¹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#6B737C;">//3. åˆ é™¤</span></span>
<span class="line"><span style="color:#B392F0;">    </span><span style="color:#F97583;">return</span><span style="color:#B392F0;"> {</span></span>
<span class="line"><span style="color:#B392F0;">      </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">useCount()</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">    };</span></span>
<span class="line"><span style="color:#B392F0;">  }</span><span style="color:#BBBBBB;">,</span></span>
<span class="line"><span style="color:#B392F0;">};</span></span>
<span class="line"><span style="color:#B392F0;">&lt;/</span><span style="color:#FFAB70;">script</span><span style="color:#B392F0;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><h2 id="è¯´ä¸€ä¸‹-vue3-0-æ˜¯å¦‚ä½•å˜å¾—æ›´å¿«çš„" tabindex="-1"><strong>è¯´ä¸€ä¸‹ <em>vue3.0</em> æ˜¯å¦‚ä½•å˜å¾—æ›´å¿«çš„ï¼Ÿ</strong> <a class="header-anchor" href="#è¯´ä¸€ä¸‹-vue3-0-æ˜¯å¦‚ä½•å˜å¾—æ›´å¿«çš„" aria-hidden="true">#</a></h2><blockquote><p><strong>ä¼˜åŒ– <em>Diff</em> ç®—æ³•</strong></p><p>ç›¸æ¯” <em>Vue 2</em>ï¼Œ<em>Vue 3</em> é‡‡ç”¨äº†æ›´åŠ ä¼˜åŒ–çš„æ¸²æŸ“ç­–ç•¥ã€‚å»æ‰ä¸å¿…è¦çš„è™šæ‹Ÿ <em>DOM</em> æ ‘éå†å’Œå±æ€§æ¯”è¾ƒï¼Œå› ä¸ºè¿™åœ¨æ›´æ–°æœŸé—´å¾€å¾€ä¼šäº§ç”Ÿæœ€å¤§çš„æ€§èƒ½å¼€é”€ã€‚</p><p>è¿™é‡Œæœ‰ä¸‰ä¸ªä¸»è¦çš„ä¼˜åŒ–ï¼š</p><ul><li>é¦–å…ˆï¼Œåœ¨ <em>DOM</em> æ ‘çº§åˆ«ã€‚</li></ul></blockquote><blockquote><p>åœ¨æ²¡æœ‰åŠ¨æ€æ”¹å˜èŠ‚ç‚¹ç»“æ„çš„æ¨¡æ¿æŒ‡ä»¤ï¼ˆä¾‹å¦‚ <em>v-if</em> å’Œ <em>v-for</em>ï¼‰çš„æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹ç»“æ„ä¿æŒå®Œå…¨é™æ€ã€‚</p><p>å½“æ›´æ–°èŠ‚ç‚¹æ—¶ï¼Œä¸å†éœ€è¦é€’å½’éå† <em>DOM</em> æ ‘ã€‚æ‰€æœ‰çš„åŠ¨æ€ç»‘å®šéƒ¨åˆ†å°†åœ¨ä¸€ä¸ªå¹³é¢æ•°ç»„ä¸­è·Ÿè¸ªã€‚è¿™ç§ä¼˜åŒ–é€šè¿‡å°†éœ€è¦æ‰§è¡Œçš„æ ‘éå†é‡å‡å°‘ä¸€ä¸ªæ•°é‡çº§æ¥è§„é¿è™šæ‹Ÿ <em>DOM</em> çš„å¤§éƒ¨åˆ†å¼€é”€ã€‚</p><ul><li>å…¶æ¬¡ï¼Œç¼–è¯‘å™¨ç§¯æåœ°æ£€æµ‹æ¨¡æ¿ä¸­çš„é™æ€èŠ‚ç‚¹ã€å­æ ‘ç”šè‡³æ•°æ®å¯¹è±¡ï¼Œå¹¶åœ¨ç”Ÿæˆçš„ä»£ç ä¸­å°†å®ƒä»¬æå‡åˆ°æ¸²æŸ“å‡½æ•°ä¹‹å¤–ã€‚è¿™æ ·å¯ä»¥é¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°åˆ›å»ºè¿™äº›å¯¹è±¡ï¼Œä»è€Œå¤§å¤§æé«˜å†…å­˜ä½¿ç”¨ç‡å¹¶å‡å°‘åƒåœ¾å›æ”¶çš„é¢‘ç‡ã€‚</li><li>ç¬¬ä¸‰ï¼Œåœ¨å…ƒç´ çº§åˆ«ã€‚</li></ul></blockquote><blockquote><p>ç¼–è¯‘å™¨è¿˜æ ¹æ®éœ€è¦æ‰§è¡Œçš„æ›´æ–°ç±»å‹ï¼Œä¸ºæ¯ä¸ªå…·æœ‰åŠ¨æ€ç»‘å®šçš„å…ƒç´ ç”Ÿæˆä¸€ä¸ªä¼˜åŒ–æ ‡å¿—ã€‚</p><p>ä¾‹å¦‚ï¼Œå…·æœ‰åŠ¨æ€ç±»ç»‘å®šå’Œè®¸å¤šé™æ€å±æ€§çš„å…ƒç´ å°†æ”¶åˆ°ä¸€ä¸ªæ ‡å¿—ï¼Œæç¤ºåªéœ€è¦è¿›è¡Œç±»æ£€æŸ¥ã€‚è¿è¡Œæ—¶å°†è·å–è¿™äº›æç¤ºå¹¶é‡‡ç”¨ä¸“ç”¨çš„å¿«é€Ÿè·¯å¾„ã€‚</p><p>ç»¼åˆèµ·æ¥ï¼Œè¿™äº›æŠ€æœ¯å¤§å¤§æ”¹è¿›äº†æ¸²æŸ“æ›´æ–°åŸºå‡†ï¼Œ<em>Vue 3.0</em> æœ‰æ—¶å ç”¨çš„ <em>CPU</em> æ—¶é—´ä¸åˆ° <em>Vue 2</em> çš„ååˆ†ä¹‹ä¸€ã€‚</p><p><strong>ä½“ç§¯å˜å°</strong></p><p>é‡å†™åçš„ <em>Vue</em> æ”¯æŒäº† <em>tree-shaking</em>ï¼Œåƒä¿®å‰ªæ ‘å¶ä¸€æ ·æŠŠä¸éœ€è¦çš„ä¸œè¥¿ç»™ä¿®å‰ªæ‰ï¼Œä½¿ <em>Vue 3.0</em> çš„ä½“ç§¯æ›´å°ã€‚</p><p>éœ€è¦çš„æ¨¡å—æ‰ä¼šæ‰“å…¥åˆ°åŒ…é‡Œï¼Œä¼˜åŒ–åçš„ <em>Vue 3.0</em> çš„æ‰“åŒ…ä½“ç§¯åªæœ‰åŸæ¥çš„ä¸€åŠï¼ˆ<em>13kb</em>ï¼‰ã€‚å“ªæ€•æŠŠæ‰€æœ‰çš„åŠŸèƒ½éƒ½å¼•å…¥è¿›æ¥ä¹Ÿåªæœ‰ <em>23kb</em>ï¼Œä¾ç„¶æ¯” <em>Vue 2.x</em> æ›´å°ã€‚åƒ <em>keep-aliveã€transition</em> ç”šè‡³ <em>v-for</em> ç­‰åŠŸèƒ½éƒ½å¯ä»¥æŒ‰éœ€å¼•å…¥ã€‚</p><p>å¹¶ä¸” <em>Vue 3.0</em> ä¼˜åŒ–äº†æ‰“åŒ…æ–¹æ³•ï¼Œä½¿å¾—æ‰“åŒ…åçš„ <em>bundle</em> çš„ä½“ç§¯ä¹Ÿæ›´å°ã€‚</p><p>å®˜æ–¹æ‰€ç»™å‡ºçš„ä¸€ä»½æƒŠè‰³çš„æ•°æ®ï¼šæ‰“åŒ…å¤§å°å‡å°‘ <em>41%</em>ï¼Œåˆæ¬¡æ¸²æŸ“å¿« <em>55%</em>ï¼Œæ›´æ–°å¿« <em>133%</em>ï¼Œå†…å­˜ä½¿ç”¨å‡å°‘ <em>54%</em>ã€‚</p></blockquote><h2 id="è¯´ä¸€è¯´ç›¸æ¯”-vue3-x-å¯¹æ¯”-vue2-x-å˜åŒ–" tabindex="-1">è¯´ä¸€è¯´ç›¸æ¯” <em>vue3.x</em> å¯¹æ¯” <em>vue2.x</em> å˜åŒ– <a class="header-anchor" href="#è¯´ä¸€è¯´ç›¸æ¯”-vue3-x-å¯¹æ¯”-vue2-x-å˜åŒ–" aria-hidden="true">#</a></h2><blockquote><ol><li>æºç ç»„ç»‡æ–¹å¼å˜åŒ–ï¼šä½¿ç”¨ TS é‡å†™</li><li>æ”¯æŒ Composition APIï¼šåŸºäºå‡½æ•°çš„ APIï¼Œæ›´åŠ çµæ´»ç»„ç»‡ç»„ä»¶é€»è¾‘ï¼ˆvue2 ç”¨çš„æ˜¯ options apiï¼‰</li><li>å“åº”å¼ç³»ç»Ÿæå‡ï¼šVue3 ä¸­å“åº”å¼æ•°æ®åŸç†æ”¹æˆ proxyï¼Œå¯ç›‘å¬åŠ¨æ€æ–°å¢åˆ é™¤å±æ€§ï¼Œä»¥åŠæ•°ç»„å˜åŒ–</li><li>ç¼–è¯‘ä¼˜åŒ–ï¼švue2 é€šè¿‡æ ‡è®°é™æ€æ ¹èŠ‚ç‚¹ä¼˜åŒ– diffï¼ŒVue3 æ ‡è®°å’Œæå‡æ‰€æœ‰é™æ€æ ¹èŠ‚ç‚¹ï¼Œdiff çš„æ—¶å€™åªéœ€è¦å¯¹æ¯”åŠ¨æ€èŠ‚ç‚¹å†…å®¹</li><li>æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–ï¼šç§»é™¤äº†ä¸€äº›ä¸å¸¸ç”¨çš„ apiï¼ˆinline-templateã€filterï¼‰</li><li>ç”Ÿå‘½å‘¨æœŸçš„å˜åŒ–ï¼šä½¿ç”¨ setup ä»£æ›¿äº†ä¹‹å‰çš„ beforeCreate å’Œ created</li><li>Vue3 çš„ template æ¨¡æ¿æ”¯æŒå¤šä¸ªæ ¹æ ‡ç­¾</li><li>Vuex çŠ¶æ€ç®¡ç†ï¼šåˆ›å»ºå®ä¾‹çš„æ–¹å¼æ”¹å˜,Vue2 ä¸º new Store , Vue3 ä¸º createStore</li><li>Route è·å–é¡µé¢å®ä¾‹ä¸è·¯ç”±ä¿¡æ¯ï¼švue2 é€šè¿‡ this è·å– router å®ä¾‹ï¼Œvue3 é€šè¿‡ä½¿ç”¨ getCurrentInstance/ userRoute å’Œ userRouter æ–¹æ³•è·å–å½“å‰ç»„ä»¶å®ä¾‹</li><li>Props çš„ä½¿ç”¨å˜åŒ–ï¼švue2 é€šè¿‡ this è·å– props é‡Œé¢çš„å†…å®¹ï¼Œvue3 ç›´æ¥é€šè¿‡ props</li><li>çˆ¶å­ç»„ä»¶ä¼ å€¼ï¼švue3 åœ¨å‘çˆ¶ç»„ä»¶ä¼ å›æ•°æ®æ—¶ï¼Œå¦‚ä½¿ç”¨çš„è‡ªå®šä¹‰åç§°ï¼Œå¦‚ backDataï¼Œåˆ™éœ€è¦åœ¨ emits ä¸­å®šä¹‰ä¸€ä¸‹</li></ol></blockquote></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-24d2ee3f data-v-8dc25fc0><div class="edit-info" data-v-8dc25fc0><div class="edit-link" data-v-8dc25fc0><a class="VPLink link edit-link-button" href="https://github.com/Sunny-117/blog" target="_blank" rel="noreferrer" data-v-8dc25fc0 data-v-4aa6d729><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-8dc25fc0><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on Gitlab<!--]--><!----></a></div><div class="last-updated" data-v-8dc25fc0><p class="VPLastUpdated" data-v-8dc25fc0 data-v-446364c7>Last Updated: <time datetime="2023-03-07T06:06:16.000Z" data-v-446364c7></time></p></div></div><div class="prev-next" data-v-8dc25fc0><div class="pager" data-v-8dc25fc0><a class="pager-link prev" href="/blog/vue/keep-alive-LRU.html" data-v-8dc25fc0><span class="desc" data-v-8dc25fc0>Previous page</span><span class="title" data-v-8dc25fc0>keep-alive ä¸ LRU ç®—æ³•</span></a></div><div class="has-prev pager" data-v-8dc25fc0><a class="pager-link next" href="/blog/vue/vue-cli.html" data-v-8dc25fc0><span class="desc" data-v-8dc25fc0>Next page</span><span class="title" data-v-8dc25fc0>vue-cli åˆ°åº•å¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆ</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-110af560 data-v-1d7d15a8><div class="container" data-v-1d7d15a8><!----><p class="copyright" data-v-1d7d15a8>Copyright Â© 2022-present sunny-117</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"fe-utils_ä½ çš„å‰ç«¯å¼€å‘å°åŠ©æ‰‹.md\":\"bbab0c8a\",\"front-end-engineering_performance.md\":\"4f59fff1\",\"fe-utils_ä¸“ä¸šå‰ç«¯å·¥ç¨‹å¸ˆçš„æµè§ˆå™¨æ”¶è—å¤¹.md\":\"4aafde3b\",\"getting-started.md\":\"3152d496\",\"front-end-engineering_pnpmåŸç†.md\":\"5bd2d268\",\"fe-utils_jså·¥å…·åº“.md\":\"5f52423d\",\"front-end-engineering_modularization.md\":\"36de4534\",\"front-end-engineering_jscompatibility.md\":\"3e437dd3\",\"algorithm_ğŸ”¥åˆ·é¢˜ä¹‹æ¢ç´¢æœ€ä¼˜è§£.md\":\"35f9f960\",\"front-end-engineering_webpack5.md\":\"d9588748\",\"front-end-engineering_csså·¥ç¨‹åŒ–.md\":\"a73a5520\",\"front-end-engineering_packagemanager.md\":\"cab0d754\",\"front-end-engineering_webpackå¸¸ç”¨æ‹“å±•.md\":\"eb188c0b\",\"html-css_html.md\":\"8cb7abbf\",\"front-end-engineering_git.md\":\"bed8eca5\",\"html-css_drag.md\":\"5dd35c78\",\"html-css_animation.md\":\"b28381bd\",\"html-css_canvas-svg.md\":\"c191617f\",\"html-css_principle.md\":\"6bb8c3cf\",\"html-css_css.md\":\"60a004c5\",\"index.md\":\"a9a1bbe1\",\"html-css_temop.md\":\"102ffd4b\",\"js_index.md\":\"ea81f91b\",\"interview_é¢è¯•å®˜ï¼šä½ è¿˜æœ‰é—®é¢˜è¦é—®æˆ‘å—.md\":\"29f80482\",\"interview_ç®—æ³•ç¬”è¯•.md\":\"e0462985\",\"html-css_selector.md\":\"11f0476a\",\"js_ä»£ç†ä¸åå°„.md\":\"13b6e184\",\"react_fiber.md\":\"83d2c0b7\",\"html-css_interview.md\":\"d92f12a8\",\"react_component-communication.md\":\"0a23ddb3\",\"react_redux.md\":\"2862a1fa\",\"react_dva.md\":\"85941735\",\"react_event.md\":\"3f323a7f\",\"react_reactrouter.md\":\"fec5c407\",\"react_context.md\":\"3ecb5d7a\",\"js_è¿­ä»£å™¨å’Œç”Ÿæˆå™¨.md\":\"24630c4d\",\"react_hooks.md\":\"68097698\",\"js_å¼‚æ­¥å¤„ç†.md\":\"b0b9faa8\",\"react_lifecycle.md\":\"33de786d\",\"react_index.md\":\"5e453d08\",\"react_react-redux-router.md\":\"3b5b49e4\",\"react_utils.md\":\"0757f7be\",\"react_umi.md\":\"f9371cca\",\"react_transition.md\":\"99149897\",\"react_render.md\":\"1d4d4b1c\",\"vue_ssr.md\":\"f3d56148\",\"react_react-interview.md\":\"26f86477\",\"vue_computed.md\":\"24ef2f70\",\"vue_directive.md\":\"49c34e90\",\"vue_index.md\":\"38b8e5fe\",\"vue_keep-alive-lru.md\":\"1ab3c0e2\",\"vue_slot.md\":\"caccfaea\",\"vue_diff.md\":\"99496dae\",\"vue_reactive-v3.md\":\"afc95a95\",\"vue_lifecycle.md\":\"c8167249\",\"vue_interviewer.md\":\"17c1db85\",\"vue_nexttick.md\":\"440668c1\",\"vue_reactive.md\":\"0dac3cc4\",\"vue_v-model.md\":\"ab618c68\",\"vue_vs.md\":\"ed45acf7\",\"vue_vue-compile.md\":\"431614da\",\"vue_vue-cli.md\":\"958e6421\",\"vue_component-communication.md\":\"4789ea6e\",\"vue_vdom.md\":\"5d839ae4\",\"vue_vue-interview.md\":\"b3892c5e\",\"vue_vue-router.md\":\"048a9eaa\",\"ts_typescript-onepage.md\":\"36ed072b\",\"vue_vuex.md\":\"ae7fd832\",\"vue_vue3-onepage.md\":\"18b88cfb\"}")</script>
    <script type="module" async src="/blog/assets/app.8207ecbb.js"></script>
    
  </body>
</html>